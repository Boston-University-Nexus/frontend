{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _class, _temp;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _AddMore = require('./AddMore');\n\nvar _AddMore2 = _interopRequireDefault(_AddMore);\n\nvar _Summary = require('./Summary');\n\nvar _Summary2 = _interopRequireDefault(_Summary);\n\nvar _SelectedArea = require('./SelectedArea');\n\nvar _SelectedArea2 = _interopRequireDefault(_SelectedArea);\n\nvar _index = require('./index');\n\nvar _Util = require('./Util');\n\nvar _DnDTypes = require('./DnDTypes');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar supportTouch = ('ontouchstart' in window);\nvar ResourceEvents = (_temp = _class = function (_Component) {\n  _inherits(ResourceEvents, _Component);\n\n  function ResourceEvents(props) {\n    _classCallCheck(this, ResourceEvents);\n\n    var _this = _possibleConstructorReturn(this, (ResourceEvents.__proto__ || Object.getPrototypeOf(ResourceEvents)).call(this, props));\n\n    _this.initDrag = function (ev) {\n      var isSelecting = _this.state.isSelecting;\n      if (isSelecting) return;\n      if ((ev.srcElement || ev.target) !== _this.eventContainer) return;\n      ev.stopPropagation();\n      var resourceEvents = _this.props.resourceEvents;\n      if (resourceEvents.groupOnly) return;\n      var clientX = 0;\n\n      if (supportTouch) {\n        if (ev.changedTouches.length == 0) return;\n        var touch = ev.changedTouches[0];\n        clientX = touch.pageX;\n      } else {\n        if (ev.buttons !== undefined && ev.buttons !== 1) return;\n        clientX = ev.clientX;\n      }\n\n      var schedulerData = _this.props.schedulerData;\n      var cellWidth = schedulerData.getContentCellWidth();\n      var pos = (0, _Util.getPos)(_this.eventContainer);\n      var startX = clientX - pos.x;\n      var leftIndex = Math.floor(startX / cellWidth);\n      var left = leftIndex * cellWidth;\n      var rightIndex = Math.ceil(startX / cellWidth);\n      var width = (rightIndex - leftIndex) * cellWidth;\n\n      _this.setState({\n        startX: startX,\n        left: left,\n        leftIndex: leftIndex,\n        width: width,\n        rightIndex: rightIndex,\n        isSelecting: true\n      });\n\n      if (supportTouch) {\n        document.documentElement.addEventListener('touchmove', _this.doDrag, false);\n        document.documentElement.addEventListener('touchend', _this.stopDrag, false);\n        document.documentElement.addEventListener('touchcancel', _this.cancelDrag, false);\n      } else {\n        document.documentElement.addEventListener('mousemove', _this.doDrag, false);\n        document.documentElement.addEventListener('mouseup', _this.stopDrag, false);\n      }\n\n      document.onselectstart = function () {\n        return false;\n      };\n\n      document.ondragstart = function () {\n        return false;\n      };\n    };\n\n    _this.doDrag = function (ev) {\n      ev.stopPropagation();\n      var clientX = 0;\n\n      if (supportTouch) {\n        if (ev.changedTouches.length == 0) return;\n        var touch = ev.changedTouches[0];\n        clientX = touch.pageX;\n      } else {\n        clientX = ev.clientX;\n      }\n\n      var startX = _this.state.startX;\n      var schedulerData = _this.props.schedulerData;\n      var headers = schedulerData.headers;\n      var cellWidth = schedulerData.getContentCellWidth();\n      var pos = (0, _Util.getPos)(_this.eventContainer);\n      var currentX = clientX - pos.x;\n      var leftIndex = Math.floor(Math.min(startX, currentX) / cellWidth);\n      leftIndex = leftIndex < 0 ? 0 : leftIndex;\n      var left = leftIndex * cellWidth;\n      var rightIndex = Math.ceil(Math.max(startX, currentX) / cellWidth);\n      rightIndex = rightIndex > headers.length ? headers.length : rightIndex;\n      var width = (rightIndex - leftIndex) * cellWidth;\n\n      _this.setState({\n        leftIndex: leftIndex,\n        left: left,\n        rightIndex: rightIndex,\n        width: width,\n        isSelecting: true\n      });\n    };\n\n    _this.stopDrag = function (ev) {\n      ev.stopPropagation();\n      var _this$props = _this.props,\n          schedulerData = _this$props.schedulerData,\n          newEvent = _this$props.newEvent,\n          resourceEvents = _this$props.resourceEvents;\n      var headers = schedulerData.headers,\n          events = schedulerData.events,\n          config = schedulerData.config,\n          cellUnit = schedulerData.cellUnit,\n          localeMoment = schedulerData.localeMoment;\n      var _this$state = _this.state,\n          leftIndex = _this$state.leftIndex,\n          rightIndex = _this$state.rightIndex;\n\n      if (supportTouch) {\n        document.documentElement.removeEventListener('touchmove', _this.doDrag, false);\n        document.documentElement.removeEventListener('touchend', _this.stopDrag, false);\n        document.documentElement.removeEventListener('touchcancel', _this.cancelDrag, false);\n      } else {\n        document.documentElement.removeEventListener('mousemove', _this.doDrag, false);\n        document.documentElement.removeEventListener('mouseup', _this.stopDrag, false);\n      }\n\n      document.onselectstart = null;\n      document.ondragstart = null;\n      var startTime = headers[leftIndex].time;\n      var endTime = resourceEvents.headerItems[rightIndex - 1].end;\n      if (cellUnit !== _index.CellUnits.Hour) endTime = localeMoment(resourceEvents.headerItems[rightIndex - 1].start).hour(23).minute(59).second(59).format(_index.DATETIME_FORMAT);\n      var slotId = resourceEvents.slotId;\n      var slotName = resourceEvents.slotName;\n\n      _this.setState({\n        startX: 0,\n        leftIndex: 0,\n        left: 0,\n        rightIndex: 0,\n        width: 0,\n        isSelecting: false\n      });\n\n      var hasConflict = false;\n\n      if (config.checkConflict) {\n        var start = localeMoment(startTime),\n            end = localeMoment(endTime);\n        events.forEach(function (e) {\n          if (schedulerData._getEventSlotId(e) === slotId) {\n            var eStart = localeMoment(e.start),\n                eEnd = localeMoment(e.end);\n            if (start >= eStart && start < eEnd || end > eStart && end <= eEnd || eStart >= start && eStart < end || eEnd > start && eEnd <= end) hasConflict = true;\n          }\n        });\n      }\n\n      if (hasConflict) {\n        var conflictOccurred = _this.props.conflictOccurred;\n\n        if (conflictOccurred != undefined) {\n          conflictOccurred(schedulerData, 'New', {\n            id: undefined,\n            start: startTime,\n            end: endTime,\n            slotId: slotId,\n            slotName: slotName,\n            title: undefined\n          }, _DnDTypes.DnDTypes.EVENT, slotId, slotName, startTime, endTime);\n        } else {\n          console.log('Conflict occurred, set conflictOccurred func in Scheduler to handle it');\n        }\n      } else {\n        if (newEvent != undefined) newEvent(schedulerData, slotId, slotName, startTime, endTime);\n      }\n    };\n\n    _this.cancelDrag = function (ev) {\n      ev.stopPropagation();\n      var isSelecting = _this.state.isSelecting;\n\n      if (isSelecting) {\n        document.documentElement.removeEventListener('touchmove', _this.doDrag, false);\n        document.documentElement.removeEventListener('touchend', _this.stopDrag, false);\n        document.documentElement.removeEventListener('touchcancel', _this.cancelDrag, false);\n        document.onselectstart = null;\n        document.ondragstart = null;\n\n        _this.setState({\n          startX: 0,\n          leftIndex: 0,\n          left: 0,\n          rightIndex: 0,\n          width: 0,\n          isSelecting: false\n        });\n      }\n    };\n\n    _this.onAddMoreClick = function (headerItem) {\n      var _this$props2 = _this.props,\n          onSetAddMoreState = _this$props2.onSetAddMoreState,\n          resourceEvents = _this$props2.resourceEvents,\n          schedulerData = _this$props2.schedulerData;\n\n      if (!!onSetAddMoreState) {\n        var config = schedulerData.config;\n        var cellWidth = schedulerData.getContentCellWidth();\n        var index = resourceEvents.headerItems.indexOf(headerItem);\n\n        if (index !== -1) {\n          var left = index * (cellWidth - 1);\n          var pos = (0, _Util.getPos)(_this.eventContainer);\n          left = left + pos.x;\n          var top = pos.y;\n          var height = (headerItem.count + 1) * config.eventItemLineHeight + 20;\n          onSetAddMoreState({\n            headerItem: headerItem,\n            left: left,\n            top: top,\n            height: height\n          });\n        }\n      }\n    };\n\n    _this.eventContainerRef = function (element) {\n      _this.eventContainer = element;\n    };\n\n    _this.state = {\n      isSelecting: false,\n      left: 0,\n      width: 0\n    };\n    return _this;\n  }\n\n  _createClass(ResourceEvents, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var schedulerData = this.props.schedulerData;\n      var config = schedulerData.config;\n\n      if (config.creatable === true) {\n        if (supportTouch) {// this.eventContainer.addEventListener('touchstart', this.initDrag, false);\n        } else {\n          this.eventContainer.addEventListener('mousedown', this.initDrag, false);\n        }\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(np) {\n      if (supportTouch) {// this.eventContainer.removeEventListener('touchstart', this.initDrag, false);\n      } else {\n        this.eventContainer.removeEventListener('mousedown', this.initDrag, false);\n      }\n\n      if (np.schedulerData.config.creatable) {\n        if (supportTouch) {// this.eventContainer.addEventListener('touchstart', this.initDrag, false);\n        } else {\n          this.eventContainer.addEventListener('mousedown', this.initDrag, false);\n        }\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          resourceEvents = _props.resourceEvents,\n          schedulerData = _props.schedulerData,\n          connectDropTarget = _props.connectDropTarget,\n          dndSource = _props.dndSource;\n      var cellUnit = schedulerData.cellUnit,\n          startDate = schedulerData.startDate,\n          endDate = schedulerData.endDate,\n          config = schedulerData.config,\n          localeMoment = schedulerData.localeMoment;\n      var _state = this.state,\n          isSelecting = _state.isSelecting,\n          left = _state.left,\n          width = _state.width;\n      var cellWidth = schedulerData.getContentCellWidth();\n      var cellMaxEvents = schedulerData.getCellMaxEvents();\n      var rowWidth = schedulerData.getContentTableWidth();\n      var DnDEventItem = dndSource.getDragSource();\n      var selectedArea = isSelecting ? _react2.default.createElement(_SelectedArea2.default, _extends({}, this.props, {\n        left: left,\n        width: width\n      })) : _react2.default.createElement('div', null);\n      var eventList = [];\n      resourceEvents.headerItems.forEach(function (headerItem, index) {\n        if (headerItem.count > 0 || headerItem.summary != undefined) {\n          var isTop = config.summaryPos === _index.SummaryPos.TopRight || config.summaryPos === _index.SummaryPos.Top || config.summaryPos === _index.SummaryPos.TopLeft;\n          var marginTop = resourceEvents.hasSummary && isTop ? 1 + config.eventItemLineHeight : 1;\n          var renderEventsMaxIndex = headerItem.addMore === 0 ? cellMaxEvents : headerItem.addMoreIndex;\n          headerItem.events.forEach(function (evt, idx) {\n            if (idx < renderEventsMaxIndex && evt !== undefined && evt.render) {\n              var durationStart = localeMoment(startDate);\n              var durationEnd = localeMoment(endDate).add(1, 'days');\n\n              if (cellUnit === _index.CellUnits.Hour) {\n                durationStart = localeMoment(startDate).add(config.dayStartFrom, 'hours');\n                durationEnd = localeMoment(endDate).add(config.dayStopTo + 1, 'hours');\n              }\n\n              var eventStart = localeMoment(evt.eventItem.start);\n              var eventEnd = localeMoment(evt.eventItem.end);\n              var isStart = eventStart >= durationStart;\n              var isEnd = eventEnd <= durationEnd;\n\n              var _left = index * cellWidth + (index > 0 ? 2 : 3);\n\n              var _width = evt.span * cellWidth - (index > 0 ? 5 : 6) > 0 ? evt.span * cellWidth - (index > 0 ? 5 : 6) : 0;\n\n              var top = marginTop + idx * config.eventItemLineHeight;\n\n              var eventItem = _react2.default.createElement(DnDEventItem, _extends({}, _this2.props, {\n                key: evt.eventItem.id,\n                eventItem: evt.eventItem,\n                isStart: isStart,\n                isEnd: isEnd,\n                isInPopover: false,\n                left: _left,\n                width: _width,\n                top: top,\n                leftIndex: index,\n                rightIndex: index + evt.span\n              }));\n\n              eventList.push(eventItem);\n            }\n          });\n\n          if (headerItem.addMore > 0) {\n            var _left2 = index * cellWidth + (index > 0 ? 2 : 3);\n\n            var _width2 = cellWidth - (index > 0 ? 5 : 6);\n\n            var top = marginTop + headerItem.addMoreIndex * config.eventItemLineHeight;\n\n            var addMoreItem = _react2.default.createElement(_AddMore2.default, _extends({}, _this2.props, {\n              key: headerItem.time,\n              headerItem: headerItem,\n              number: headerItem.addMore,\n              left: _left2,\n              width: _width2,\n              top: top,\n              clickAction: _this2.onAddMoreClick\n            }));\n\n            eventList.push(addMoreItem);\n          }\n\n          if (headerItem.summary != undefined) {\n            var _top = isTop ? 1 : resourceEvents.rowHeight - config.eventItemLineHeight + 1;\n\n            var _left3 = index * cellWidth + (index > 0 ? 2 : 3);\n\n            var _width3 = cellWidth - (index > 0 ? 5 : 6);\n\n            var key = resourceEvents.slotId + '_' + headerItem.time;\n\n            var summary = _react2.default.createElement(_Summary2.default, {\n              key: key,\n              schedulerData: schedulerData,\n              summary: headerItem.summary,\n              left: _left3,\n              width: _width3,\n              top: _top\n            });\n\n            eventList.push(summary);\n          }\n        }\n      });\n      return _react2.default.createElement('tr', null, _react2.default.createElement('td', {\n        style: {\n          width: rowWidth\n        }\n      }, connectDropTarget(_react2.default.createElement('div', {\n        ref: this.eventContainerRef,\n        className: 'event-container',\n        style: {\n          height: resourceEvents.rowHeight\n        }\n      }, selectedArea, eventList))));\n    }\n  }]);\n\n  return ResourceEvents;\n}(_react.Component), _class.propTypes = {\n  resourceEvents: _propTypes.PropTypes.object.isRequired,\n  schedulerData: _propTypes.PropTypes.object.isRequired,\n  dndSource: _propTypes.PropTypes.object.isRequired,\n  onSetAddMoreState: _propTypes.PropTypes.func,\n  updateEventStart: _propTypes.PropTypes.func,\n  updateEventEnd: _propTypes.PropTypes.func,\n  moveEvent: _propTypes.PropTypes.func,\n  movingEvent: _propTypes.PropTypes.func,\n  conflictOccurred: _propTypes.PropTypes.func,\n  subtitleGetter: _propTypes.PropTypes.func,\n  eventItemClick: _propTypes.PropTypes.func,\n  viewEventClick: _propTypes.PropTypes.func,\n  viewEventText: _propTypes.PropTypes.string,\n  viewEvent2Click: _propTypes.PropTypes.func,\n  viewEvent2Text: _propTypes.PropTypes.string,\n  newEvent: _propTypes.PropTypes.func,\n  eventItemTemplateResolver: _propTypes.PropTypes.func\n}, _temp);\nexports.default = ResourceEvents;","map":{"version":3,"sources":["/home/danielmelchor/Documents/CodeProjects/nexus/frontend/node_modules/react-big-scheduler/lib/ResourceEvents.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_class","_temp","_react","require","_react2","_interopRequireDefault","_propTypes","_AddMore","_AddMore2","_Summary","_Summary2","_SelectedArea","_SelectedArea2","_index","_Util","_DnDTypes","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","supportTouch","window","ResourceEvents","_Component","_this","getPrototypeOf","initDrag","ev","isSelecting","state","srcElement","eventContainer","stopPropagation","resourceEvents","groupOnly","clientX","changedTouches","touch","pageX","buttons","undefined","schedulerData","cellWidth","getContentCellWidth","pos","getPos","startX","x","leftIndex","Math","floor","left","rightIndex","ceil","width","setState","document","documentElement","addEventListener","doDrag","stopDrag","cancelDrag","onselectstart","ondragstart","headers","currentX","min","max","_this$props","newEvent","events","config","cellUnit","localeMoment","_this$state","removeEventListener","startTime","time","endTime","headerItems","end","CellUnits","Hour","start","hour","minute","second","format","DATETIME_FORMAT","slotId","slotName","hasConflict","checkConflict","forEach","e","_getEventSlotId","eStart","eEnd","conflictOccurred","id","title","DnDTypes","EVENT","console","log","onAddMoreClick","headerItem","_this$props2","onSetAddMoreState","index","indexOf","top","y","height","count","eventItemLineHeight","eventContainerRef","element","componentDidMount","creatable","componentWillReceiveProps","np","render","_this2","_props","connectDropTarget","dndSource","startDate","endDate","_state","cellMaxEvents","getCellMaxEvents","rowWidth","getContentTableWidth","DnDEventItem","getDragSource","selectedArea","createElement","eventList","summary","isTop","summaryPos","SummaryPos","TopRight","Top","TopLeft","marginTop","hasSummary","renderEventsMaxIndex","addMore","addMoreIndex","evt","idx","durationStart","durationEnd","add","dayStartFrom","dayStopTo","eventStart","eventItem","eventEnd","isStart","isEnd","_left","_width","span","isInPopover","push","_left2","_width2","addMoreItem","number","clickAction","_top","rowHeight","_left3","_width3","style","ref","className","Component","propTypes","PropTypes","object","isRequired","func","updateEventStart","updateEventEnd","moveEvent","movingEvent","subtitleGetter","eventItemClick","viewEventClick","viewEventText","string","viewEvent2Click","viewEvent2Text","eventItemTemplateResolver"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _class, _temp;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _AddMore = require('./AddMore');\n\nvar _AddMore2 = _interopRequireDefault(_AddMore);\n\nvar _Summary = require('./Summary');\n\nvar _Summary2 = _interopRequireDefault(_Summary);\n\nvar _SelectedArea = require('./SelectedArea');\n\nvar _SelectedArea2 = _interopRequireDefault(_SelectedArea);\n\nvar _index = require('./index');\n\nvar _Util = require('./Util');\n\nvar _DnDTypes = require('./DnDTypes');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar supportTouch = 'ontouchstart' in window;\n\nvar ResourceEvents = (_temp = _class = function (_Component) {\n    _inherits(ResourceEvents, _Component);\n\n    function ResourceEvents(props) {\n        _classCallCheck(this, ResourceEvents);\n\n        var _this = _possibleConstructorReturn(this, (ResourceEvents.__proto__ || Object.getPrototypeOf(ResourceEvents)).call(this, props));\n\n        _this.initDrag = function (ev) {\n            var isSelecting = _this.state.isSelecting;\n\n            if (isSelecting) return;\n            if ((ev.srcElement || ev.target) !== _this.eventContainer) return;\n\n            ev.stopPropagation();\n\n            var resourceEvents = _this.props.resourceEvents;\n\n            if (resourceEvents.groupOnly) return;\n            var clientX = 0;\n            if (supportTouch) {\n                if (ev.changedTouches.length == 0) return;\n                var touch = ev.changedTouches[0];\n                clientX = touch.pageX;\n            } else {\n                if (ev.buttons !== undefined && ev.buttons !== 1) return;\n                clientX = ev.clientX;\n            }\n\n            var schedulerData = _this.props.schedulerData;\n\n            var cellWidth = schedulerData.getContentCellWidth();\n            var pos = (0, _Util.getPos)(_this.eventContainer);\n            var startX = clientX - pos.x;\n            var leftIndex = Math.floor(startX / cellWidth);\n            var left = leftIndex * cellWidth;\n            var rightIndex = Math.ceil(startX / cellWidth);\n            var width = (rightIndex - leftIndex) * cellWidth;\n\n            _this.setState({\n                startX: startX,\n                left: left,\n                leftIndex: leftIndex,\n                width: width,\n                rightIndex: rightIndex,\n                isSelecting: true\n            });\n\n            if (supportTouch) {\n                document.documentElement.addEventListener('touchmove', _this.doDrag, false);\n                document.documentElement.addEventListener('touchend', _this.stopDrag, false);\n                document.documentElement.addEventListener('touchcancel', _this.cancelDrag, false);\n            } else {\n                document.documentElement.addEventListener('mousemove', _this.doDrag, false);\n                document.documentElement.addEventListener('mouseup', _this.stopDrag, false);\n            }\n            document.onselectstart = function () {\n                return false;\n            };\n            document.ondragstart = function () {\n                return false;\n            };\n        };\n\n        _this.doDrag = function (ev) {\n            ev.stopPropagation();\n\n            var clientX = 0;\n            if (supportTouch) {\n                if (ev.changedTouches.length == 0) return;\n                var touch = ev.changedTouches[0];\n                clientX = touch.pageX;\n            } else {\n                clientX = ev.clientX;\n            }\n            var startX = _this.state.startX;\n            var schedulerData = _this.props.schedulerData;\n            var headers = schedulerData.headers;\n\n            var cellWidth = schedulerData.getContentCellWidth();\n            var pos = (0, _Util.getPos)(_this.eventContainer);\n            var currentX = clientX - pos.x;\n            var leftIndex = Math.floor(Math.min(startX, currentX) / cellWidth);\n            leftIndex = leftIndex < 0 ? 0 : leftIndex;\n            var left = leftIndex * cellWidth;\n            var rightIndex = Math.ceil(Math.max(startX, currentX) / cellWidth);\n            rightIndex = rightIndex > headers.length ? headers.length : rightIndex;\n            var width = (rightIndex - leftIndex) * cellWidth;\n\n            _this.setState({\n                leftIndex: leftIndex,\n                left: left,\n                rightIndex: rightIndex,\n                width: width,\n                isSelecting: true\n            });\n        };\n\n        _this.stopDrag = function (ev) {\n            ev.stopPropagation();\n\n            var _this$props = _this.props,\n                schedulerData = _this$props.schedulerData,\n                newEvent = _this$props.newEvent,\n                resourceEvents = _this$props.resourceEvents;\n            var headers = schedulerData.headers,\n                events = schedulerData.events,\n                config = schedulerData.config,\n                cellUnit = schedulerData.cellUnit,\n                localeMoment = schedulerData.localeMoment;\n            var _this$state = _this.state,\n                leftIndex = _this$state.leftIndex,\n                rightIndex = _this$state.rightIndex;\n\n            if (supportTouch) {\n                document.documentElement.removeEventListener('touchmove', _this.doDrag, false);\n                document.documentElement.removeEventListener('touchend', _this.stopDrag, false);\n                document.documentElement.removeEventListener('touchcancel', _this.cancelDrag, false);\n            } else {\n                document.documentElement.removeEventListener('mousemove', _this.doDrag, false);\n                document.documentElement.removeEventListener('mouseup', _this.stopDrag, false);\n            }\n            document.onselectstart = null;\n            document.ondragstart = null;\n\n            var startTime = headers[leftIndex].time;\n            var endTime = resourceEvents.headerItems[rightIndex - 1].end;\n            if (cellUnit !== _index.CellUnits.Hour) endTime = localeMoment(resourceEvents.headerItems[rightIndex - 1].start).hour(23).minute(59).second(59).format(_index.DATETIME_FORMAT);\n            var slotId = resourceEvents.slotId;\n            var slotName = resourceEvents.slotName;\n\n            _this.setState({\n                startX: 0,\n                leftIndex: 0,\n                left: 0,\n                rightIndex: 0,\n                width: 0,\n                isSelecting: false\n            });\n\n            var hasConflict = false;\n            if (config.checkConflict) {\n                var start = localeMoment(startTime),\n                    end = localeMoment(endTime);\n\n                events.forEach(function (e) {\n                    if (schedulerData._getEventSlotId(e) === slotId) {\n                        var eStart = localeMoment(e.start),\n                            eEnd = localeMoment(e.end);\n                        if (start >= eStart && start < eEnd || end > eStart && end <= eEnd || eStart >= start && eStart < end || eEnd > start && eEnd <= end) hasConflict = true;\n                    }\n                });\n            }\n\n            if (hasConflict) {\n                var conflictOccurred = _this.props.conflictOccurred;\n\n                if (conflictOccurred != undefined) {\n                    conflictOccurred(schedulerData, 'New', {\n                        id: undefined,\n                        start: startTime,\n                        end: endTime,\n                        slotId: slotId,\n                        slotName: slotName,\n                        title: undefined\n                    }, _DnDTypes.DnDTypes.EVENT, slotId, slotName, startTime, endTime);\n                } else {\n                    console.log('Conflict occurred, set conflictOccurred func in Scheduler to handle it');\n                }\n            } else {\n                if (newEvent != undefined) newEvent(schedulerData, slotId, slotName, startTime, endTime);\n            }\n        };\n\n        _this.cancelDrag = function (ev) {\n            ev.stopPropagation();\n\n            var isSelecting = _this.state.isSelecting;\n\n            if (isSelecting) {\n                document.documentElement.removeEventListener('touchmove', _this.doDrag, false);\n                document.documentElement.removeEventListener('touchend', _this.stopDrag, false);\n                document.documentElement.removeEventListener('touchcancel', _this.cancelDrag, false);\n                document.onselectstart = null;\n                document.ondragstart = null;\n                _this.setState({\n                    startX: 0,\n                    leftIndex: 0,\n                    left: 0,\n                    rightIndex: 0,\n                    width: 0,\n                    isSelecting: false\n                });\n            }\n        };\n\n        _this.onAddMoreClick = function (headerItem) {\n            var _this$props2 = _this.props,\n                onSetAddMoreState = _this$props2.onSetAddMoreState,\n                resourceEvents = _this$props2.resourceEvents,\n                schedulerData = _this$props2.schedulerData;\n\n            if (!!onSetAddMoreState) {\n                var config = schedulerData.config;\n\n                var cellWidth = schedulerData.getContentCellWidth();\n                var index = resourceEvents.headerItems.indexOf(headerItem);\n                if (index !== -1) {\n                    var left = index * (cellWidth - 1);\n                    var pos = (0, _Util.getPos)(_this.eventContainer);\n                    left = left + pos.x;\n                    var top = pos.y;\n                    var height = (headerItem.count + 1) * config.eventItemLineHeight + 20;\n\n                    onSetAddMoreState({\n                        headerItem: headerItem,\n                        left: left,\n                        top: top,\n                        height: height\n                    });\n                }\n            }\n        };\n\n        _this.eventContainerRef = function (element) {\n            _this.eventContainer = element;\n        };\n\n        _this.state = {\n            isSelecting: false,\n            left: 0,\n            width: 0\n        };\n        return _this;\n    }\n\n    _createClass(ResourceEvents, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var schedulerData = this.props.schedulerData;\n            var config = schedulerData.config;\n\n            if (config.creatable === true) {\n                if (supportTouch) {\n                    // this.eventContainer.addEventListener('touchstart', this.initDrag, false);\n                } else {\n                    this.eventContainer.addEventListener('mousedown', this.initDrag, false);\n                }\n            }\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(np) {\n            if (supportTouch) {\n                // this.eventContainer.removeEventListener('touchstart', this.initDrag, false);\n            } else {\n                this.eventContainer.removeEventListener('mousedown', this.initDrag, false);\n            }\n            if (np.schedulerData.config.creatable) {\n                if (supportTouch) {\n                    // this.eventContainer.addEventListener('touchstart', this.initDrag, false);\n                } else {\n                    this.eventContainer.addEventListener('mousedown', this.initDrag, false);\n                }\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var _props = this.props,\n                resourceEvents = _props.resourceEvents,\n                schedulerData = _props.schedulerData,\n                connectDropTarget = _props.connectDropTarget,\n                dndSource = _props.dndSource;\n            var cellUnit = schedulerData.cellUnit,\n                startDate = schedulerData.startDate,\n                endDate = schedulerData.endDate,\n                config = schedulerData.config,\n                localeMoment = schedulerData.localeMoment;\n            var _state = this.state,\n                isSelecting = _state.isSelecting,\n                left = _state.left,\n                width = _state.width;\n\n            var cellWidth = schedulerData.getContentCellWidth();\n            var cellMaxEvents = schedulerData.getCellMaxEvents();\n            var rowWidth = schedulerData.getContentTableWidth();\n            var DnDEventItem = dndSource.getDragSource();\n\n            var selectedArea = isSelecting ? _react2.default.createElement(_SelectedArea2.default, _extends({}, this.props, { left: left, width: width })) : _react2.default.createElement('div', null);\n\n            var eventList = [];\n            resourceEvents.headerItems.forEach(function (headerItem, index) {\n\n                if (headerItem.count > 0 || headerItem.summary != undefined) {\n\n                    var isTop = config.summaryPos === _index.SummaryPos.TopRight || config.summaryPos === _index.SummaryPos.Top || config.summaryPos === _index.SummaryPos.TopLeft;\n                    var marginTop = resourceEvents.hasSummary && isTop ? 1 + config.eventItemLineHeight : 1;\n                    var renderEventsMaxIndex = headerItem.addMore === 0 ? cellMaxEvents : headerItem.addMoreIndex;\n\n                    headerItem.events.forEach(function (evt, idx) {\n                        if (idx < renderEventsMaxIndex && evt !== undefined && evt.render) {\n                            var durationStart = localeMoment(startDate);\n                            var durationEnd = localeMoment(endDate).add(1, 'days');\n                            if (cellUnit === _index.CellUnits.Hour) {\n                                durationStart = localeMoment(startDate).add(config.dayStartFrom, 'hours');\n                                durationEnd = localeMoment(endDate).add(config.dayStopTo + 1, 'hours');\n                            }\n                            var eventStart = localeMoment(evt.eventItem.start);\n                            var eventEnd = localeMoment(evt.eventItem.end);\n                            var isStart = eventStart >= durationStart;\n                            var isEnd = eventEnd <= durationEnd;\n                            var _left = index * cellWidth + (index > 0 ? 2 : 3);\n                            var _width = evt.span * cellWidth - (index > 0 ? 5 : 6) > 0 ? evt.span * cellWidth - (index > 0 ? 5 : 6) : 0;\n                            var top = marginTop + idx * config.eventItemLineHeight;\n                            var eventItem = _react2.default.createElement(DnDEventItem, _extends({}, _this2.props, {\n                                key: evt.eventItem.id,\n                                eventItem: evt.eventItem,\n                                isStart: isStart,\n                                isEnd: isEnd,\n                                isInPopover: false,\n                                left: _left,\n                                width: _width,\n                                top: top,\n                                leftIndex: index,\n                                rightIndex: index + evt.span\n                            }));\n                            eventList.push(eventItem);\n                        }\n                    });\n\n                    if (headerItem.addMore > 0) {\n                        var _left2 = index * cellWidth + (index > 0 ? 2 : 3);\n                        var _width2 = cellWidth - (index > 0 ? 5 : 6);\n                        var top = marginTop + headerItem.addMoreIndex * config.eventItemLineHeight;\n                        var addMoreItem = _react2.default.createElement(_AddMore2.default, _extends({}, _this2.props, {\n                            key: headerItem.time,\n                            headerItem: headerItem,\n                            number: headerItem.addMore,\n                            left: _left2,\n                            width: _width2,\n                            top: top,\n                            clickAction: _this2.onAddMoreClick\n                        }));\n                        eventList.push(addMoreItem);\n                    }\n\n                    if (headerItem.summary != undefined) {\n                        var _top = isTop ? 1 : resourceEvents.rowHeight - config.eventItemLineHeight + 1;\n                        var _left3 = index * cellWidth + (index > 0 ? 2 : 3);\n                        var _width3 = cellWidth - (index > 0 ? 5 : 6);\n                        var key = resourceEvents.slotId + '_' + headerItem.time;\n                        var summary = _react2.default.createElement(_Summary2.default, { key: key, schedulerData: schedulerData, summary: headerItem.summary, left: _left3, width: _width3, top: _top });\n                        eventList.push(summary);\n                    }\n                }\n            });\n\n            return _react2.default.createElement(\n                'tr',\n                null,\n                _react2.default.createElement(\n                    'td',\n                    { style: { width: rowWidth } },\n                    connectDropTarget(_react2.default.createElement(\n                        'div',\n                        { ref: this.eventContainerRef, className: 'event-container', style: { height: resourceEvents.rowHeight } },\n                        selectedArea,\n                        eventList\n                    ))\n                )\n            );\n        }\n    }]);\n\n    return ResourceEvents;\n}(_react.Component), _class.propTypes = {\n    resourceEvents: _propTypes.PropTypes.object.isRequired,\n    schedulerData: _propTypes.PropTypes.object.isRequired,\n    dndSource: _propTypes.PropTypes.object.isRequired,\n    onSetAddMoreState: _propTypes.PropTypes.func,\n    updateEventStart: _propTypes.PropTypes.func,\n    updateEventEnd: _propTypes.PropTypes.func,\n    moveEvent: _propTypes.PropTypes.func,\n    movingEvent: _propTypes.PropTypes.func,\n    conflictOccurred: _propTypes.PropTypes.func,\n    subtitleGetter: _propTypes.PropTypes.func,\n    eventItemClick: _propTypes.PropTypes.func,\n    viewEventClick: _propTypes.PropTypes.func,\n    viewEventText: _propTypes.PropTypes.string,\n    viewEvent2Click: _propTypes.PropTypes.func,\n    viewEvent2Text: _propTypes.PropTypes.string,\n    newEvent: _propTypes.PropTypes.func,\n    eventItemTemplateResolver: _propTypes.PropTypes.func\n}, _temp);\nexports.default = ResourceEvents;"]},"metadata":{},"sourceType":"script"}