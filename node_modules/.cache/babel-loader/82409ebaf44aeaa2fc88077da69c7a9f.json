{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _rrule = require('rrule');\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _behaviors = require('./behaviors');\n\nvar _behaviors2 = _interopRequireDefault(_behaviors);\n\nvar _index = require('./index');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar SchedulerData = function () {\n  function SchedulerData() {\n    var date = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : (0, _moment2.default)().format(_index.DATE_FORMAT);\n    var viewType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _index.ViewTypes.Week;\n    var showAgenda = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var isEventPerspective = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    var newConfig = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : undefined;\n    var newBehaviors = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : undefined;\n    var localeMoment = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : undefined;\n\n    _classCallCheck(this, SchedulerData);\n\n    this.resources = [];\n    this.events = [];\n    this.eventGroups = [];\n    this.eventGroupsAutoGenerated = true;\n    this.viewType = viewType;\n    this.cellUnit = viewType === _index.ViewTypes.Day ? _index.CellUnits.Hour : _index.CellUnits.Day;\n    this.showAgenda = showAgenda;\n    this.isEventPerspective = isEventPerspective;\n    this.resizing = false;\n    this.scrollToSpecialMoment = false;\n    this.documentWidth = 0;\n    this.localeMoment = _moment2.default;\n    if (!!localeMoment) this.localeMoment = localeMoment;\n    this.config = newConfig == undefined ? _config2.default : _extends({}, _config2.default, newConfig);\n\n    this._validateMinuteStep(this.config.minuteStep);\n\n    this.behaviors = newBehaviors == undefined ? _behaviors2.default : _extends({}, _behaviors2.default, newBehaviors);\n\n    this._resolveDate(0, date);\n\n    this._createHeaders();\n\n    this._createRenderData();\n  }\n\n  _createClass(SchedulerData, [{\n    key: 'setLocaleMoment',\n    value: function setLocaleMoment(localeMoment) {\n      if (!!localeMoment) {\n        this.localeMoment = localeMoment;\n\n        this._createHeaders();\n\n        this._createRenderData();\n      }\n    }\n  }, {\n    key: 'setResources',\n    value: function setResources(resources) {\n      this._validateResource(resources);\n\n      this.resources = Array.from(new Set(resources));\n\n      this._createRenderData();\n\n      this.setScrollToSpecialMoment(true);\n    }\n  }, {\n    key: 'setEventGroupsAutoGenerated',\n    value: function setEventGroupsAutoGenerated(autoGenerated) {\n      this.eventGroupsAutoGenerated = autoGenerated;\n    } //optional\n\n  }, {\n    key: 'setEventGroups',\n    value: function setEventGroups(eventGroups) {\n      this._validateEventGroups(eventGroups);\n\n      this.eventGroups = Array.from(new Set(eventGroups));\n      this.eventGroupsAutoGenerated = false;\n\n      this._createRenderData();\n\n      this.setScrollToSpecialMoment(true);\n    }\n  }, {\n    key: 'setMinuteStep',\n    value: function setMinuteStep(minuteStep) {\n      if (this.config.minuteStep !== minuteStep) {\n        this._validateMinuteStep(minuteStep);\n\n        this.config.minuteStep = minuteStep;\n\n        this._createHeaders();\n\n        this._createRenderData();\n      }\n    }\n  }, {\n    key: 'setBesidesWidth',\n    value: function setBesidesWidth(besidesWidth) {\n      if (besidesWidth >= 0) {\n        this.config.besidesWidth = besidesWidth;\n      }\n    }\n  }, {\n    key: 'getMinuteStepsInHour',\n    value: function getMinuteStepsInHour() {\n      return 60 / this.config.minuteStep;\n    }\n  }, {\n    key: 'addResource',\n    value: function addResource(resource) {\n      var existedResources = this.resources.filter(function (x) {\n        return x.id === resource.id;\n      });\n\n      if (existedResources.length === 0) {\n        this.resources.push(resource);\n\n        this._createRenderData();\n      }\n    }\n  }, {\n    key: 'addEventGroup',\n    value: function addEventGroup(eventGroup) {\n      var existedEventGroups = this.eventGroups.filter(function (x) {\n        return x.id === eventGroup.id;\n      });\n\n      if (existedEventGroups.length === 0) {\n        this.eventGroups.push(eventGroup);\n\n        this._createRenderData();\n      }\n    }\n  }, {\n    key: 'removeEventGroupById',\n    value: function removeEventGroupById(eventGroupId) {\n      var index = -1;\n      this.eventGroups.forEach(function (item, idx) {\n        if (item.id === eventGroupId) index = idx;\n      });\n      if (index !== -1) this.eventGroups.splice(index, 1);\n    }\n  }, {\n    key: 'containsEventGroupId',\n    value: function containsEventGroupId(eventGroupId) {\n      var index = -1;\n      this.eventGroups.forEach(function (item, idx) {\n        if (item.id === eventGroupId) index = idx;\n      });\n      return index !== -1;\n    }\n  }, {\n    key: 'setEvents',\n    value: function setEvents(events) {\n      this._validateEvents(events);\n\n      this.events = Array.from(events);\n      if (this.eventGroupsAutoGenerated) this._generateEventGroups();\n      if (this.config.recurringEventsEnabled) this._handleRecurringEvents();\n\n      this._createRenderData();\n    }\n  }, {\n    key: 'setScrollToSpecialMoment',\n    value: function setScrollToSpecialMoment(scrollToSpecialMoment) {\n      if (this.config.scrollToSpecialMomentEnabled) this.scrollToSpecialMoment = scrollToSpecialMoment;\n    }\n  }, {\n    key: 'prev',\n    value: function prev() {\n      this._resolveDate(-1);\n\n      this.events = [];\n\n      this._createHeaders();\n\n      this._createRenderData();\n    }\n  }, {\n    key: 'next',\n    value: function next() {\n      this._resolveDate(1);\n\n      this.events = [];\n\n      this._createHeaders();\n\n      this._createRenderData();\n    }\n  }, {\n    key: 'setDate',\n    value: function setDate() {\n      var date = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : (0, _moment2.default)().format(_index.DATE_FORMAT);\n\n      this._resolveDate(0, date);\n\n      this.events = [];\n\n      this._createHeaders();\n\n      this._createRenderData();\n    }\n  }, {\n    key: 'setViewType',\n    value: function setViewType() {\n      var viewType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _index.ViewTypes.Week;\n      var showAgenda = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var isEventPerspective = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      this.showAgenda = showAgenda;\n      this.isEventPerspective = isEventPerspective;\n      this.cellUnit = _index.CellUnits.Day;\n\n      if (this.viewType !== viewType) {\n        var date = this.startDate;\n\n        if (viewType === _index.ViewTypes.Custom || viewType === _index.ViewTypes.Custom1 || viewType === _index.ViewTypes.Custom2) {\n          this.viewType = viewType;\n\n          this._resolveDate(0, date);\n        } else {\n          if (this.viewType < viewType) {\n            if (viewType === _index.ViewTypes.Week) {\n              this.startDate = this.localeMoment(date).startOf('week').format(_index.DATE_FORMAT);\n              this.endDate = this.localeMoment(this.startDate).endOf('week').format(_index.DATE_FORMAT);\n            } else if (viewType === _index.ViewTypes.Month) {\n              this.startDate = this.localeMoment(date).startOf('month').format(_index.DATE_FORMAT);\n              this.endDate = this.localeMoment(this.startDate).endOf('month').format(_index.DATE_FORMAT);\n            } else if (viewType === _index.ViewTypes.Quarter) {\n              this.startDate = this.localeMoment(date).startOf('quarter').format(_index.DATE_FORMAT);\n              this.endDate = this.localeMoment(this.startDate).endOf('quarter').format(_index.DATE_FORMAT);\n            } else if (viewType === _index.ViewTypes.Year) {\n              this.startDate = this.localeMoment(date).startOf('year').format(_index.DATE_FORMAT);\n              this.endDate = this.localeMoment(this.startDate).endOf('year').format(_index.DATE_FORMAT);\n            }\n          } else {\n            var start = this.localeMoment(this.startDate);\n            var end = this.localeMoment(this.endDate).add(1, 'days');\n\n            if (this.selectDate !== undefined) {\n              var selectDate = this.localeMoment(this.selectDate);\n\n              if (selectDate >= start && selectDate < end) {\n                date = this.selectDate;\n              }\n            }\n\n            var now = this.localeMoment();\n\n            if (now >= start && now < end) {\n              date = now.format(_index.DATE_FORMAT);\n            }\n\n            if (viewType === _index.ViewTypes.Day) {\n              this.startDate = date;\n              this.endDate = this.startDate;\n              this.cellUnit = _index.CellUnits.Hour;\n            } else if (viewType === _index.ViewTypes.Week) {\n              this.startDate = this.localeMoment(date).startOf('week').format(_index.DATE_FORMAT);\n              this.endDate = this.localeMoment(this.startDate).endOf('week').format(_index.DATE_FORMAT);\n            } else if (viewType === _index.ViewTypes.Month) {\n              this.startDate = this.localeMoment(date).startOf('month').format(_index.DATE_FORMAT);\n              this.endDate = this.localeMoment(this.startDate).endOf('month').format(_index.DATE_FORMAT);\n            } else if (viewType === _index.ViewTypes.Quarter) {\n              this.startDate = this.localeMoment(date).startOf('quarter').format(_index.DATE_FORMAT);\n              this.endDate = this.localeMoment(this.startDate).endOf('quarter').format(_index.DATE_FORMAT);\n            }\n          }\n\n          this.viewType = viewType;\n        }\n\n        this.events = [];\n\n        this._createHeaders();\n\n        this._createRenderData();\n\n        this.setScrollToSpecialMoment(true);\n      }\n    }\n  }, {\n    key: 'setSchedulerMaxHeight',\n    value: function setSchedulerMaxHeight(newSchedulerMaxHeight) {\n      this.config.schedulerMaxHeight = newSchedulerMaxHeight;\n    }\n  }, {\n    key: 'isSchedulerResponsive',\n    value: function isSchedulerResponsive() {\n      return !!this.config.schedulerWidth.endsWith && this.config.schedulerWidth.endsWith(\"%\");\n    }\n  }, {\n    key: 'toggleExpandStatus',\n    value: function toggleExpandStatus(slotId) {\n      var slotEntered = false;\n      var slotIndent = -1;\n      var isExpanded = false;\n      var expandedMap = new Map();\n      this.renderData.forEach(function (item) {\n        if (slotEntered === false) {\n          if (item.slotId === slotId && item.hasChildren) {\n            slotEntered = true;\n            isExpanded = !item.expanded;\n            item.expanded = isExpanded;\n            slotIndent = item.indent;\n            expandedMap.set(item.indent, {\n              expanded: item.expanded,\n              render: item.render\n            });\n          }\n        } else {\n          if (item.indent > slotIndent) {\n            var expandStatus = expandedMap.get(item.indent - 1);\n            item.render = expandStatus.expanded && expandStatus.render;\n\n            if (item.hasChildren) {\n              expandedMap.set(item.indent, {\n                expanded: item.expanded,\n                render: item.render\n              });\n            }\n          } else {\n            slotEntered = false;\n          }\n        }\n      });\n    }\n  }, {\n    key: 'isResourceViewResponsive',\n    value: function isResourceViewResponsive() {\n      var resourceTableWidth = this.getResourceTableConfigWidth();\n      return !!resourceTableWidth.endsWith && resourceTableWidth.endsWith(\"%\");\n    }\n  }, {\n    key: 'isContentViewResponsive',\n    value: function isContentViewResponsive() {\n      var contentCellWidth = this.getContentCellConfigWidth();\n      return !!contentCellWidth.endsWith && contentCellWidth.endsWith(\"%\");\n    }\n  }, {\n    key: 'getSchedulerWidth',\n    value: function getSchedulerWidth() {\n      var baseWidth = this.documentWidth - this.config.besidesWidth > 0 ? this.documentWidth - this.config.besidesWidth : 0;\n      return this.isSchedulerResponsive() ? parseInt(baseWidth * Number(this.config.schedulerWidth.slice(0, -1)) / 100) : this.config.schedulerWidth;\n    }\n  }, {\n    key: 'getResourceTableWidth',\n    value: function getResourceTableWidth() {\n      var resourceTableConfigWidth = this.getResourceTableConfigWidth();\n      var schedulerWidth = this.getSchedulerWidth();\n      var resourceTableWidth = this.isResourceViewResponsive() ? parseInt(schedulerWidth * Number(resourceTableConfigWidth.slice(0, -1)) / 100) : resourceTableConfigWidth;\n      if (this.isSchedulerResponsive() && this.getContentTableWidth() + resourceTableWidth < schedulerWidth) resourceTableWidth = schedulerWidth - this.getContentTableWidth();\n      return resourceTableWidth;\n    }\n  }, {\n    key: 'getContentCellWidth',\n    value: function getContentCellWidth() {\n      var contentCellConfigWidth = this.getContentCellConfigWidth();\n      var schedulerWidth = this.getSchedulerWidth();\n      return this.isContentViewResponsive() ? parseInt(schedulerWidth * Number(contentCellConfigWidth.slice(0, -1)) / 100) : contentCellConfigWidth;\n    }\n  }, {\n    key: 'getContentTableWidth',\n    value: function getContentTableWidth() {\n      return this.headers.length * this.getContentCellWidth();\n    }\n  }, {\n    key: 'getScrollToSpecialMoment',\n    value: function getScrollToSpecialMoment() {\n      if (this.config.scrollToSpecialMomentEnabled) return this.scrollToSpecialMoment;\n      return false;\n    }\n  }, {\n    key: 'getSlots',\n    value: function getSlots() {\n      return this.isEventPerspective ? this.eventGroups : this.resources;\n    }\n  }, {\n    key: 'getSlotById',\n    value: function getSlotById(slotId) {\n      var slots = this.getSlots();\n      var slot = undefined;\n      slots.forEach(function (item) {\n        if (item.id === slotId) slot = item;\n      });\n      return slot;\n    }\n  }, {\n    key: 'getResourceById',\n    value: function getResourceById(resourceId) {\n      var resource = undefined;\n      this.resources.forEach(function (item) {\n        if (item.id === resourceId) resource = item;\n      });\n      return resource;\n    }\n  }, {\n    key: 'getTableHeaderHeight',\n    value: function getTableHeaderHeight() {\n      return this.config.tableHeaderHeight;\n    }\n  }, {\n    key: 'getSchedulerContentDesiredHeight',\n    value: function getSchedulerContentDesiredHeight() {\n      var height = 0;\n      this.renderData.forEach(function (item) {\n        if (item.render) height += item.rowHeight;\n      });\n      return height;\n    }\n  }, {\n    key: 'getCellMaxEvents',\n    value: function getCellMaxEvents() {\n      return this.viewType === _index.ViewTypes.Week ? this.config.weekMaxEvents : this.viewType === _index.ViewTypes.Day ? this.config.dayMaxEvents : this.viewType === _index.ViewTypes.Month ? this.config.monthMaxEvents : this.viewType === _index.ViewTypes.Year ? this.config.yearMaxEvents : this.viewType === _index.ViewTypes.Quarter ? this.config.quarterMaxEvents : this.config.customMaxEvents;\n    }\n  }, {\n    key: 'getDateLabel',\n    value: function getDateLabel() {\n      var start = this.localeMoment(this.startDate);\n      var end = this.localeMoment(this.endDate);\n      var dateLabel = start.format('LL');\n      if (start != end) dateLabel = start.format('LL') + '-' + end.format('LL');\n      if (!!this.behaviors.getDateLabelFunc) dateLabel = this.behaviors.getDateLabelFunc(this, this.viewType, this.startDate, this.endDate);\n      return dateLabel;\n    }\n  }, {\n    key: 'addEvent',\n    value: function addEvent(newEvent) {\n      this._attachEvent(newEvent);\n\n      if (this.eventGroupsAutoGenerated) this._generateEventGroups();\n\n      this._createRenderData();\n    }\n  }, {\n    key: 'updateEventStart',\n    value: function updateEventStart(event, newStart) {\n      this._detachEvent(event);\n\n      event.start = newStart;\n\n      this._attachEvent(event);\n\n      this._createRenderData();\n    }\n  }, {\n    key: 'updateEventEnd',\n    value: function updateEventEnd(event, newEnd) {\n      event.end = newEnd;\n\n      this._createRenderData();\n    }\n  }, {\n    key: 'moveEvent',\n    value: function moveEvent(event, newSlotId, newSlotName, newStart, newEnd) {\n      this._detachEvent(event);\n\n      if (this.isEventPerspective) {\n        event.groupId = newSlotId;\n        event.groupName = newSlotName;\n      } else event.resourceId = newSlotId;\n\n      event.end = newEnd;\n      event.start = newStart;\n\n      this._attachEvent(event);\n\n      this._createRenderData();\n    }\n  }, {\n    key: 'isEventInTimeWindow',\n    value: function isEventInTimeWindow(eventStart, eventEnd, windowStart, windowEnd) {\n      return eventStart < windowEnd && eventEnd > windowStart;\n    }\n  }, {\n    key: 'removeEvent',\n    value: function removeEvent(event) {\n      var index = this.events.indexOf(event);\n\n      if (index !== -1) {\n        this.events.splice(index, 1);\n\n        this._createRenderData();\n      }\n    }\n  }, {\n    key: 'removeEventById',\n    value: function removeEventById(eventId) {\n      var index = -1;\n      this.events.forEach(function (item, idx) {\n        if (item.id === eventId) index = idx;\n      });\n\n      if (index !== -1) {\n        this.events.splice(index, 1);\n\n        this._createRenderData();\n      }\n    }\n  }, {\n    key: 'getResourceTableConfigWidth',\n    value: function getResourceTableConfigWidth() {\n      if (this.showAgenda) return this.config.agendaResourceTableWidth;\n      return this.viewType === _index.ViewTypes.Week ? this.config.weekResourceTableWidth : this.viewType === _index.ViewTypes.Day ? this.config.dayResourceTableWidth : this.viewType === _index.ViewTypes.Month ? this.config.monthResourceTableWidth : this.viewType === _index.ViewTypes.Year ? this.config.yearResourceTableWidth : this.viewType === _index.ViewTypes.Quarter ? this.config.quarterResourceTableWidth : this.config.customResourceTableWidth;\n    }\n  }, {\n    key: 'getContentCellConfigWidth',\n    value: function getContentCellConfigWidth() {\n      return this.viewType === _index.ViewTypes.Week ? this.config.weekCellWidth : this.viewType === _index.ViewTypes.Day ? this.config.dayCellWidth : this.viewType === _index.ViewTypes.Month ? this.config.monthCellWidth : this.viewType === _index.ViewTypes.Year ? this.config.yearCellWidth : this.viewType === _index.ViewTypes.Quarter ? this.config.quarterCellWidth : this.config.customCellWidth;\n    }\n  }, {\n    key: '_setDocumentWidth',\n    value: function _setDocumentWidth(documentWidth) {\n      if (documentWidth >= 0) {\n        this.documentWidth = documentWidth;\n      }\n    }\n  }, {\n    key: '_detachEvent',\n    value: function _detachEvent(event) {\n      var index = this.events.indexOf(event);\n      if (index !== -1) this.events.splice(index, 1);\n    }\n  }, {\n    key: '_attachEvent',\n    value: function _attachEvent(event) {\n      var _this = this;\n\n      var pos = 0;\n      var eventStart = this.localeMoment(event.start);\n      this.events.forEach(function (item, index) {\n        var start = _this.localeMoment(item.start);\n\n        if (eventStart >= start) pos = index + 1;\n      });\n      this.events.splice(pos, 0, event);\n    }\n  }, {\n    key: '_handleRecurringEvents',\n    value: function _handleRecurringEvents() {\n      var _this2 = this;\n\n      var recurringEvents = this.events.filter(function (x) {\n        return !!x.rrule;\n      });\n      recurringEvents.forEach(function (item) {\n        _this2._detachEvent(item);\n      });\n      recurringEvents.forEach(function (item) {\n        var windowStart = _this2.localeMoment(_this2.startDate),\n            windowEnd = _this2.localeMoment(_this2.endDate).add(1, 'days'),\n            oldStart = _this2.localeMoment(item.start),\n            oldEnd = _this2.localeMoment(item.end),\n            rule = (0, _rrule.rrulestr)(item.rrule),\n            oldDtstart = undefined;\n\n        if (!!rule.origOptions.dtstart) {\n          oldDtstart = _this2.localeMoment(rule.origOptions.dtstart);\n        }\n\n        rule.origOptions.dtstart = oldStart.toDate();\n\n        if (!rule.origOptions.until || windowEnd < _this2.localeMoment(rule.origOptions.until)) {\n          rule.origOptions.until = windowEnd.toDate();\n        } //reload\n\n\n        rule = (0, _rrule.rrulestr)(rule.toString());\n\n        if (item.exdates || item.exrule) {\n          var rruleSet = new _rrule.RRuleSet();\n          rruleSet.rrule(rule);\n\n          if (item.exrule) {\n            rruleSet.exrule((0, _rrule.rrulestr)(item.exrule));\n          }\n\n          if (item.exdates) {\n            item.exdates.forEach(function (exdate) {\n              rruleSet.exdate(_this2.localeMoment(exdate).toDate());\n            });\n          }\n\n          rule = rruleSet;\n        }\n\n        var all = rule.all();\n        var newEvents = all.map(function (time, index) {\n          return _extends({}, item, {\n            recurringEventId: item.id,\n            recurringEventStart: item.start,\n            recurringEventEnd: item.end,\n            id: item.id + '-' + index,\n            start: _this2.localeMoment(time).format(_index.DATETIME_FORMAT),\n            end: _this2.localeMoment(time).add(oldEnd.diff(oldStart), 'ms').format(_index.DATETIME_FORMAT)\n          });\n        });\n        newEvents.forEach(function (newEvent) {\n          var eventStart = _this2.localeMoment(newEvent.start),\n              eventEnd = _this2.localeMoment(newEvent.end);\n\n          if (_this2.isEventInTimeWindow(eventStart, eventEnd, windowStart, windowEnd) && (!oldDtstart || eventStart >= oldDtstart)) {\n            _this2._attachEvent(newEvent);\n          }\n        });\n      });\n    }\n  }, {\n    key: '_resolveDate',\n    value: function _resolveDate(num) {\n      var date = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n      if (date != undefined) this.selectDate = this.localeMoment(date).format(_index.DATE_FORMAT);\n\n      if (this.viewType === _index.ViewTypes.Week) {\n        this.startDate = date != undefined ? this.localeMoment(date).startOf('week').format(_index.DATE_FORMAT) : this.localeMoment(this.startDate).add(num, 'weeks').format(_index.DATE_FORMAT);\n        this.endDate = this.localeMoment(this.startDate).endOf('week').format(_index.DATE_FORMAT);\n      } else if (this.viewType === _index.ViewTypes.Day) {\n        this.startDate = date != undefined ? this.selectDate : this.localeMoment(this.startDate).add(num, 'days').format(_index.DATE_FORMAT);\n        this.endDate = this.startDate;\n      } else if (this.viewType === _index.ViewTypes.Month) {\n        this.startDate = date != undefined ? this.localeMoment(date).startOf('month').format(_index.DATE_FORMAT) : this.localeMoment(this.startDate).add(num, 'months').format(_index.DATE_FORMAT);\n        this.endDate = this.localeMoment(this.startDate).endOf('month').format(_index.DATE_FORMAT);\n      } else if (this.viewType === _index.ViewTypes.Quarter) {\n        this.startDate = date != undefined ? this.localeMoment(date).startOf('quarter').format(_index.DATE_FORMAT) : this.localeMoment(this.startDate).add(num, 'quarters').format(_index.DATE_FORMAT);\n        this.endDate = this.localeMoment(this.startDate).endOf('quarter').format(_index.DATE_FORMAT);\n      } else if (this.viewType === _index.ViewTypes.Year) {\n        this.startDate = date != undefined ? this.localeMoment(date).startOf('year').format(_index.DATE_FORMAT) : this.localeMoment(this.startDate).add(num, 'years').format(_index.DATE_FORMAT);\n        this.endDate = this.localeMoment(this.startDate).endOf('year').format(_index.DATE_FORMAT);\n      } else if (this.viewType === _index.ViewTypes.Custom || this.viewType === _index.ViewTypes.Custom1 || this.viewType === _index.ViewTypes.Custom2) {\n        if (this.behaviors.getCustomDateFunc != undefined) {\n          var customDate = this.behaviors.getCustomDateFunc(this, num, date);\n          this.startDate = customDate.startDate;\n          this.endDate = customDate.endDate;\n          if (!!customDate.cellUnit) this.cellUnit = customDate.cellUnit;\n        } else {\n          throw new Error('This is custom view type, set behaviors.getCustomDateFunc func to resolve the time window(startDate and endDate) yourself');\n        }\n      }\n    }\n  }, {\n    key: '_createHeaders',\n    value: function _createHeaders() {\n      var headers = [],\n          start = this.localeMoment(this.startDate),\n          end = this.localeMoment(this.endDate),\n          header = start;\n\n      if (this.showAgenda) {\n        headers.push({\n          time: header.format(_index.DATETIME_FORMAT),\n          nonWorkingTime: false\n        });\n      } else {\n        if (this.cellUnit === _index.CellUnits.Hour) {\n          start = start.add(this.config.dayStartFrom, 'hours');\n          end = end.add(this.config.dayStopTo, 'hours');\n          header = start;\n\n          while (header >= start && header <= end) {\n            var minuteSteps = this.getMinuteStepsInHour();\n\n            for (var i = 0; i < minuteSteps; i++) {\n              var hour = header.hour();\n\n              if (hour >= this.config.dayStartFrom && hour <= this.config.dayStopTo) {\n                var time = header.format(_index.DATETIME_FORMAT);\n                var nonWorkingTime = this.behaviors.isNonWorkingTimeFunc(this, time);\n                headers.push({\n                  time: time,\n                  nonWorkingTime: nonWorkingTime\n                });\n              }\n\n              header = header.add(this.config.minuteStep, 'minutes');\n            }\n          }\n        } else {\n          while (header >= start && header <= end) {\n            var _time = header.format(_index.DATETIME_FORMAT);\n\n            var dayOfWeek = header.weekday();\n\n            if (this.config.displayWeekend || dayOfWeek !== 0 && dayOfWeek !== 6) {\n              var _nonWorkingTime = this.behaviors.isNonWorkingTimeFunc(this, _time);\n\n              headers.push({\n                time: _time,\n                nonWorkingTime: _nonWorkingTime\n              });\n            }\n\n            header = header.add(1, 'days');\n          }\n        }\n      }\n\n      this.headers = headers;\n    }\n  }, {\n    key: '_createInitHeaderEvents',\n    value: function _createInitHeaderEvents(header) {\n      var start = this.localeMoment(header.time),\n          startValue = start.format(_index.DATETIME_FORMAT);\n      var endValue = this.showAgenda ? this.viewType === _index.ViewTypes.Week ? start.add(1, 'weeks').format(_index.DATETIME_FORMAT) : this.viewType === _index.ViewTypes.Day ? start.add(1, 'days').format(_index.DATETIME_FORMAT) : this.viewType === _index.ViewTypes.Month ? start.add(1, 'months').format(_index.DATETIME_FORMAT) : this.viewType === _index.ViewTypes.Year ? start.add(1, 'years').format(_index.DATETIME_FORMAT) : this.viewType === _index.ViewTypes.Quarter ? start.add(1, 'quarters').format(_index.DATETIME_FORMAT) : this.localeMoment(this.endDate).add(1, 'days').format(_index.DATETIME_FORMAT) : this.cellUnit === _index.CellUnits.Hour ? start.add(this.config.minuteStep, 'minutes').format(_index.DATETIME_FORMAT) : start.add(1, 'days').format(_index.DATETIME_FORMAT);\n      return {\n        time: header.time,\n        nonWorkingTime: header.nonWorkingTime,\n        start: startValue,\n        end: endValue,\n        count: 0,\n        addMore: 0,\n        addMoreIndex: 0,\n        events: [,,,]\n      };\n    }\n  }, {\n    key: '_createHeaderEvent',\n    value: function _createHeaderEvent(render, span, eventItem) {\n      return {\n        render: render,\n        span: span,\n        eventItem: eventItem\n      };\n    }\n  }, {\n    key: '_getEventSlotId',\n    value: function _getEventSlotId(event) {\n      return this.isEventPerspective ? this._getEventGroupId(event) : event.resourceId;\n    }\n  }, {\n    key: '_getEventGroupId',\n    value: function _getEventGroupId(event) {\n      return !!event.groupId ? event.groupId.toString() : event.id.toString();\n    }\n  }, {\n    key: '_getEventGroupName',\n    value: function _getEventGroupName(event) {\n      return !!event.groupName ? event.groupName : event.title;\n    }\n  }, {\n    key: '_generateEventGroups',\n    value: function _generateEventGroups() {\n      var _this3 = this;\n\n      var eventGroups = [];\n      var set = new Set();\n      this.events.forEach(function (item) {\n        var groupId = _this3._getEventGroupId(item);\n\n        var groupName = _this3._getEventGroupName(item);\n\n        if (!set.has(groupId)) {\n          eventGroups.push({\n            id: groupId,\n            name: groupName,\n            state: item\n          });\n          set.add(groupId);\n        }\n      });\n      this.eventGroups = eventGroups;\n    }\n  }, {\n    key: '_createInitRenderData',\n    value: function _createInitRenderData(isEventPerspective, eventGroups, resources, headers) {\n      var _this4 = this;\n\n      var slots = isEventPerspective ? eventGroups : resources;\n      var slotTree = [],\n          slotMap = new Map();\n      slots.forEach(function (slot) {\n        var headerEvents = headers.map(function (header) {\n          return _this4._createInitHeaderEvents(header);\n        });\n        var slotRenderData = {\n          slotId: slot.id,\n          slotName: slot.name,\n          parentId: slot.parentId,\n          groupOnly: slot.groupOnly,\n          hasSummary: false,\n          rowMaxCount: 0,\n          rowHeight: _this4.config.nonAgendaSlotMinHeight !== 0 ? _this4.config.nonAgendaSlotMinHeight : _this4.config.eventItemLineHeight + 2,\n          headerItems: headerEvents,\n          indent: 0,\n          hasChildren: false,\n          expanded: true,\n          render: true\n        };\n        var id = slot.id;\n        var value = undefined;\n\n        if (slotMap.has(id)) {\n          value = slotMap.get(id);\n          value.data = slotRenderData;\n        } else {\n          value = {\n            data: slotRenderData,\n            children: []\n          };\n          slotMap.set(id, value);\n        }\n\n        var parentId = slot.parentId;\n\n        if (!parentId || parentId === id) {\n          slotTree.push(value);\n        } else {\n          var parentValue = undefined;\n\n          if (slotMap.has(parentId)) {\n            parentValue = slotMap.get(parentId);\n          } else {\n            parentValue = {\n              data: undefined,\n              children: []\n            };\n            slotMap.set(parentId, parentValue);\n          }\n\n          parentValue.children.push(value);\n        }\n      });\n      var slotStack = [];\n      var i = void 0;\n\n      for (i = slotTree.length - 1; i >= 0; i--) {\n        slotStack.push(slotTree[i]);\n      }\n\n      var initRenderData = [];\n      var currentNode = undefined;\n\n      while (slotStack.length > 0) {\n        currentNode = slotStack.pop();\n\n        if (currentNode.data.indent > 0) {\n          currentNode.data.render = this.config.defaultExpanded;\n        }\n\n        if (currentNode.children.length > 0) {\n          currentNode.data.hasChildren = true;\n          currentNode.data.expanded = this.config.defaultExpanded;\n        }\n\n        initRenderData.push(currentNode.data);\n\n        for (i = currentNode.children.length - 1; i >= 0; i--) {\n          currentNode.children[i].data.indent = currentNode.data.indent + 1;\n          slotStack.push(currentNode.children[i]);\n        }\n      }\n\n      return initRenderData;\n    }\n  }, {\n    key: '_getSpan',\n    value: function _getSpan(startTime, endTime, headers) {\n      if (this.showAgenda) return 1;\n      var start = this.localeMoment(startTime),\n          end = this.localeMoment(endTime),\n          span = 0;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = headers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var header = _step.value;\n          var spanStart = this.localeMoment(header.time),\n              spanEnd = this.cellUnit === _index.CellUnits.Hour ? this.localeMoment(header.time).add(this.config.minuteStep, 'minutes') : this.localeMoment(header.time).add(1, 'days');\n\n          if (spanStart < end && spanEnd > start) {\n            span++;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return span;\n    }\n  }, {\n    key: '_validateResource',\n    value: function _validateResource(resources) {\n      if (Object.prototype.toString.call(resources) !== \"[object Array]\") {\n        throw new Error('Resources should be Array object');\n      }\n\n      resources.forEach(function (item, index) {\n        if (item == undefined) {\n          console.error('Resource undefined: ' + index);\n          throw new Error('Resource undefined: ' + index);\n        }\n\n        if (item.id == undefined || item.name == undefined) {\n          console.error('Resource property missed', index, item);\n          throw new Error('Resource property undefined: ' + index);\n        }\n      });\n    }\n  }, {\n    key: '_validateEventGroups',\n    value: function _validateEventGroups(eventGroups) {\n      if (Object.prototype.toString.call(eventGroups) !== \"[object Array]\") {\n        throw new Error('Event groups should be Array object');\n      }\n\n      eventGroups.forEach(function (item, index) {\n        if (item == undefined) {\n          console.error('Event group undefined: ' + index);\n          throw new Error('Event group undefined: ' + index);\n        }\n\n        if (item.id == undefined || item.name == undefined) {\n          console.error('Event group property missed', index, item);\n          throw new Error('Event group property undefined: ' + index);\n        }\n      });\n    }\n  }, {\n    key: '_validateEvents',\n    value: function _validateEvents(events) {\n      if (Object.prototype.toString.call(events) !== \"[object Array]\") {\n        throw new Error('Events should be Array object');\n      }\n\n      events.forEach(function (e, index) {\n        if (e == undefined) {\n          console.error('Event undefined: ' + index);\n          throw new Error('Event undefined: ' + index);\n        }\n\n        if (e.id == undefined || e.resourceId == undefined || e.title == undefined || e.start == undefined || e.end == undefined) {\n          console.error('Event property missed', index, e);\n          throw new Error('Event property undefined: ' + index);\n        }\n      });\n    }\n  }, {\n    key: '_validateMinuteStep',\n    value: function _validateMinuteStep(minuteStep) {\n      if (60 % minuteStep !== 0) {\n        console.error('Minute step is not set properly - 60 minutes must be divisible without remainder by this number');\n        throw new Error('Minute step is not set properly - 60 minutes must be divisible without remainder by this number');\n      }\n    }\n  }, {\n    key: '_compare',\n    value: function _compare(event1, event2) {\n      var start1 = this.localeMoment(event1.start),\n          start2 = this.localeMoment(event2.start);\n      if (start1 !== start2) return start1 < start2 ? -1 : 1;\n      var end1 = this.localeMoment(event1.end),\n          end2 = this.localeMoment(event2.end);\n      if (end1 !== end2) return end1 < end2 ? -1 : 1;\n      return event1.id < event2.id ? -1 : 1;\n    }\n  }, {\n    key: '_createRenderData',\n    value: function _createRenderData() {\n      var _this5 = this;\n\n      var initRenderData = this._createInitRenderData(this.isEventPerspective, this.eventGroups, this.resources, this.headers); //this.events.sort(this._compare);\n\n\n      var cellMaxEventsCount = this.getCellMaxEvents();\n      var cellMaxEventsCountValue = 30;\n      this.events.forEach(function (item) {\n        var resourceEventsList = initRenderData.filter(function (x) {\n          return x.slotId === _this5._getEventSlotId(item);\n        });\n\n        if (resourceEventsList.length > 0) {\n          var resourceEvents = resourceEventsList[0];\n\n          var span = _this5._getSpan(item.start, item.end, _this5.headers);\n\n          var eventStart = _this5.localeMoment(item.start),\n              eventEnd = _this5.localeMoment(item.end);\n\n          var pos = -1;\n          resourceEvents.headerItems.forEach(function (header, index) {\n            var headerStart = _this5.localeMoment(header.start),\n                headerEnd = _this5.localeMoment(header.end);\n\n            if (headerEnd > eventStart && headerStart < eventEnd) {\n              header.count = header.count + 1;\n\n              if (header.count > resourceEvents.rowMaxCount) {\n                resourceEvents.rowMaxCount = header.count;\n                var rowsCount = cellMaxEventsCount <= cellMaxEventsCountValue && resourceEvents.rowMaxCount > cellMaxEventsCount ? cellMaxEventsCount : resourceEvents.rowMaxCount;\n                var newRowHeight = rowsCount * _this5.config.eventItemLineHeight + (_this5.config.creatable && _this5.config.checkConflict === false ? 20 : 2);\n                if (newRowHeight > resourceEvents.rowHeight) resourceEvents.rowHeight = newRowHeight;\n              }\n\n              if (pos === -1) {\n                var tmp = 0;\n\n                while (header.events[tmp] !== undefined) {\n                  tmp++;\n                }\n\n                pos = tmp;\n              }\n\n              var render = headerStart <= eventStart || index === 0;\n\n              if (render === false) {\n                var previousHeader = resourceEvents.headerItems[index - 1];\n\n                var previousHeaderStart = _this5.localeMoment(previousHeader.start),\n                    previousHeaderEnd = _this5.localeMoment(previousHeader.end);\n\n                if (previousHeaderEnd <= eventStart || previousHeaderStart >= eventEnd) render = true;\n              }\n\n              header.events[pos] = _this5._createHeaderEvent(render, span, item);\n            }\n          });\n        }\n      });\n\n      if (cellMaxEventsCount <= cellMaxEventsCountValue || this.behaviors.getSummaryFunc !== undefined) {\n        initRenderData.forEach(function (resourceEvents) {\n          var hasSummary = false;\n          resourceEvents.headerItems.forEach(function (headerItem) {\n            if (cellMaxEventsCount <= cellMaxEventsCountValue) {\n              var renderItemsCount = 0,\n                  addMoreIndex = 0,\n                  index = 0;\n\n              while (index < cellMaxEventsCount - 1) {\n                if (headerItem.events[index] !== undefined) {\n                  renderItemsCount++;\n                  addMoreIndex = index + 1;\n                }\n\n                index++;\n              }\n\n              if (headerItem.events[index] !== undefined) {\n                if (renderItemsCount + 1 < headerItem.count) {\n                  headerItem.addMore = headerItem.count - renderItemsCount;\n                  headerItem.addMoreIndex = addMoreIndex;\n                }\n              } else {\n                if (renderItemsCount < headerItem.count) {\n                  headerItem.addMore = headerItem.count - renderItemsCount;\n                  headerItem.addMoreIndex = addMoreIndex;\n                }\n              }\n            }\n\n            if (_this5.behaviors.getSummaryFunc !== undefined) {\n              var events = [];\n              headerItem.events.forEach(function (e) {\n                if (!!e && !!e.eventItem) events.push(e.eventItem);\n              });\n              headerItem.summary = _this5.behaviors.getSummaryFunc(_this5, events, resourceEvents.slotId, resourceEvents.slotName, headerItem.start, headerItem.end);\n              if (!!headerItem.summary && headerItem.summary.text != undefined) hasSummary = true;\n            }\n          });\n          resourceEvents.hasSummary = hasSummary;\n\n          if (hasSummary) {\n            var rowsCount = cellMaxEventsCount <= cellMaxEventsCountValue && resourceEvents.rowMaxCount > cellMaxEventsCount ? cellMaxEventsCount : resourceEvents.rowMaxCount;\n            var newRowHeight = (rowsCount + 1) * _this5.config.eventItemLineHeight + (_this5.config.creatable && _this5.config.checkConflict === false ? 20 : 2);\n            if (newRowHeight > resourceEvents.rowHeight) resourceEvents.rowHeight = newRowHeight;\n          }\n        });\n      }\n\n      this.renderData = initRenderData;\n    }\n  }, {\n    key: '_startResizing',\n    value: function _startResizing() {\n      this.resizing = true;\n    }\n  }, {\n    key: '_stopResizing',\n    value: function _stopResizing() {\n      this.resizing = false;\n    }\n  }, {\n    key: '_isResizing',\n    value: function _isResizing() {\n      return this.resizing;\n    }\n  }]);\n\n  return SchedulerData;\n}();\n\nexports.default = SchedulerData;","map":{"version":3,"sources":["/home/danielmelchor/Documents/CodeProjects/nexus/frontend/node_modules/react-big-scheduler/lib/SchedulerData.js"],"names":["Object","defineProperty","exports","value","default","undefined","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_moment","require","_moment2","_interopRequireDefault","_rrule","_config","_config2","_behaviors","_behaviors2","_index","obj","__esModule","_classCallCheck","instance","TypeError","SchedulerData","date","format","DATE_FORMAT","viewType","ViewTypes","Week","showAgenda","isEventPerspective","newConfig","newBehaviors","localeMoment","resources","events","eventGroups","eventGroupsAutoGenerated","cellUnit","Day","CellUnits","Hour","resizing","scrollToSpecialMoment","documentWidth","config","_validateMinuteStep","minuteStep","behaviors","_resolveDate","_createHeaders","_createRenderData","setLocaleMoment","setResources","_validateResource","Array","from","Set","setScrollToSpecialMoment","setEventGroupsAutoGenerated","autoGenerated","setEventGroups","_validateEventGroups","setMinuteStep","setBesidesWidth","besidesWidth","getMinuteStepsInHour","addResource","resource","existedResources","filter","x","id","push","addEventGroup","eventGroup","existedEventGroups","removeEventGroupById","eventGroupId","index","forEach","item","idx","splice","containsEventGroupId","setEvents","_validateEvents","_generateEventGroups","recurringEventsEnabled","_handleRecurringEvents","scrollToSpecialMomentEnabled","prev","next","setDate","setViewType","startDate","Custom","Custom1","Custom2","startOf","endDate","endOf","Month","Quarter","Year","start","end","add","selectDate","now","setSchedulerMaxHeight","newSchedulerMaxHeight","schedulerMaxHeight","isSchedulerResponsive","schedulerWidth","endsWith","toggleExpandStatus","slotId","slotEntered","slotIndent","isExpanded","expandedMap","Map","renderData","hasChildren","expanded","indent","set","render","expandStatus","get","isResourceViewResponsive","resourceTableWidth","getResourceTableConfigWidth","isContentViewResponsive","contentCellWidth","getContentCellConfigWidth","getSchedulerWidth","baseWidth","parseInt","Number","slice","getResourceTableWidth","resourceTableConfigWidth","getContentTableWidth","getContentCellWidth","contentCellConfigWidth","headers","getScrollToSpecialMoment","getSlots","getSlotById","slots","slot","getResourceById","resourceId","getTableHeaderHeight","tableHeaderHeight","getSchedulerContentDesiredHeight","height","rowHeight","getCellMaxEvents","weekMaxEvents","dayMaxEvents","monthMaxEvents","yearMaxEvents","quarterMaxEvents","customMaxEvents","getDateLabel","dateLabel","getDateLabelFunc","addEvent","newEvent","_attachEvent","updateEventStart","event","newStart","_detachEvent","updateEventEnd","newEnd","moveEvent","newSlotId","newSlotName","groupId","groupName","isEventInTimeWindow","eventStart","eventEnd","windowStart","windowEnd","removeEvent","indexOf","removeEventById","eventId","agendaResourceTableWidth","weekResourceTableWidth","dayResourceTableWidth","monthResourceTableWidth","yearResourceTableWidth","quarterResourceTableWidth","customResourceTableWidth","weekCellWidth","dayCellWidth","monthCellWidth","yearCellWidth","quarterCellWidth","customCellWidth","_setDocumentWidth","_this","pos","_this2","recurringEvents","rrule","oldStart","oldEnd","rule","rrulestr","oldDtstart","origOptions","dtstart","toDate","until","toString","exdates","exrule","rruleSet","RRuleSet","exdate","all","newEvents","map","time","recurringEventId","recurringEventStart","recurringEventEnd","DATETIME_FORMAT","diff","num","getCustomDateFunc","customDate","Error","header","nonWorkingTime","dayStartFrom","dayStopTo","minuteSteps","hour","isNonWorkingTimeFunc","_time","dayOfWeek","weekday","displayWeekend","_nonWorkingTime","_createInitHeaderEvents","startValue","endValue","count","addMore","addMoreIndex","_createHeaderEvent","span","eventItem","_getEventSlotId","_getEventGroupId","_getEventGroupName","title","_this3","has","name","state","_createInitRenderData","_this4","slotTree","slotMap","headerEvents","slotRenderData","slotName","parentId","groupOnly","hasSummary","rowMaxCount","nonAgendaSlotMinHeight","eventItemLineHeight","headerItems","data","children","parentValue","slotStack","initRenderData","currentNode","pop","defaultExpanded","_getSpan","startTime","endTime","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","Symbol","iterator","_step","done","spanStart","spanEnd","err","return","console","error","e","_compare","event1","event2","start1","start2","end1","end2","_this5","cellMaxEventsCount","cellMaxEventsCountValue","resourceEventsList","resourceEvents","headerStart","headerEnd","rowsCount","newRowHeight","creatable","checkConflict","tmp","previousHeader","previousHeaderStart","previousHeaderEnd","getSummaryFunc","headerItem","renderItemsCount","summary","text","_startResizing","_stopResizing","_isResizing"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _rrule = require('rrule');\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _behaviors = require('./behaviors');\n\nvar _behaviors2 = _interopRequireDefault(_behaviors);\n\nvar _index = require('./index');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SchedulerData = function () {\n    function SchedulerData() {\n        var date = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : (0, _moment2.default)().format(_index.DATE_FORMAT);\n        var viewType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _index.ViewTypes.Week;\n        var showAgenda = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n        var isEventPerspective = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n        var newConfig = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : undefined;\n        var newBehaviors = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : undefined;\n        var localeMoment = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : undefined;\n\n        _classCallCheck(this, SchedulerData);\n\n        this.resources = [];\n        this.events = [];\n        this.eventGroups = [];\n        this.eventGroupsAutoGenerated = true;\n        this.viewType = viewType;\n        this.cellUnit = viewType === _index.ViewTypes.Day ? _index.CellUnits.Hour : _index.CellUnits.Day;\n        this.showAgenda = showAgenda;\n        this.isEventPerspective = isEventPerspective;\n        this.resizing = false;\n        this.scrollToSpecialMoment = false;\n        this.documentWidth = 0;\n\n        this.localeMoment = _moment2.default;\n        if (!!localeMoment) this.localeMoment = localeMoment;\n        this.config = newConfig == undefined ? _config2.default : _extends({}, _config2.default, newConfig);\n        this._validateMinuteStep(this.config.minuteStep);\n        this.behaviors = newBehaviors == undefined ? _behaviors2.default : _extends({}, _behaviors2.default, newBehaviors);\n        this._resolveDate(0, date);\n        this._createHeaders();\n        this._createRenderData();\n    }\n\n    _createClass(SchedulerData, [{\n        key: 'setLocaleMoment',\n        value: function setLocaleMoment(localeMoment) {\n            if (!!localeMoment) {\n                this.localeMoment = localeMoment;\n                this._createHeaders();\n                this._createRenderData();\n            }\n        }\n    }, {\n        key: 'setResources',\n        value: function setResources(resources) {\n            this._validateResource(resources);\n            this.resources = Array.from(new Set(resources));\n            this._createRenderData();\n            this.setScrollToSpecialMoment(true);\n        }\n    }, {\n        key: 'setEventGroupsAutoGenerated',\n        value: function setEventGroupsAutoGenerated(autoGenerated) {\n            this.eventGroupsAutoGenerated = autoGenerated;\n        }\n\n        //optional\n\n    }, {\n        key: 'setEventGroups',\n        value: function setEventGroups(eventGroups) {\n            this._validateEventGroups(eventGroups);\n            this.eventGroups = Array.from(new Set(eventGroups));\n            this.eventGroupsAutoGenerated = false;\n            this._createRenderData();\n            this.setScrollToSpecialMoment(true);\n        }\n    }, {\n        key: 'setMinuteStep',\n        value: function setMinuteStep(minuteStep) {\n            if (this.config.minuteStep !== minuteStep) {\n                this._validateMinuteStep(minuteStep);\n                this.config.minuteStep = minuteStep;\n                this._createHeaders();\n                this._createRenderData();\n            }\n        }\n    }, {\n        key: 'setBesidesWidth',\n        value: function setBesidesWidth(besidesWidth) {\n            if (besidesWidth >= 0) {\n                this.config.besidesWidth = besidesWidth;\n            }\n        }\n    }, {\n        key: 'getMinuteStepsInHour',\n        value: function getMinuteStepsInHour() {\n            return 60 / this.config.minuteStep;\n        }\n    }, {\n        key: 'addResource',\n        value: function addResource(resource) {\n            var existedResources = this.resources.filter(function (x) {\n                return x.id === resource.id;\n            });\n            if (existedResources.length === 0) {\n                this.resources.push(resource);\n                this._createRenderData();\n            }\n        }\n    }, {\n        key: 'addEventGroup',\n        value: function addEventGroup(eventGroup) {\n            var existedEventGroups = this.eventGroups.filter(function (x) {\n                return x.id === eventGroup.id;\n            });\n            if (existedEventGroups.length === 0) {\n                this.eventGroups.push(eventGroup);\n                this._createRenderData();\n            }\n        }\n    }, {\n        key: 'removeEventGroupById',\n        value: function removeEventGroupById(eventGroupId) {\n            var index = -1;\n            this.eventGroups.forEach(function (item, idx) {\n                if (item.id === eventGroupId) index = idx;\n            });\n            if (index !== -1) this.eventGroups.splice(index, 1);\n        }\n    }, {\n        key: 'containsEventGroupId',\n        value: function containsEventGroupId(eventGroupId) {\n            var index = -1;\n            this.eventGroups.forEach(function (item, idx) {\n                if (item.id === eventGroupId) index = idx;\n            });\n            return index !== -1;\n        }\n    }, {\n        key: 'setEvents',\n        value: function setEvents(events) {\n            this._validateEvents(events);\n            this.events = Array.from(events);\n            if (this.eventGroupsAutoGenerated) this._generateEventGroups();\n            if (this.config.recurringEventsEnabled) this._handleRecurringEvents();\n\n            this._createRenderData();\n        }\n    }, {\n        key: 'setScrollToSpecialMoment',\n        value: function setScrollToSpecialMoment(scrollToSpecialMoment) {\n            if (this.config.scrollToSpecialMomentEnabled) this.scrollToSpecialMoment = scrollToSpecialMoment;\n        }\n    }, {\n        key: 'prev',\n        value: function prev() {\n            this._resolveDate(-1);\n            this.events = [];\n            this._createHeaders();\n            this._createRenderData();\n        }\n    }, {\n        key: 'next',\n        value: function next() {\n            this._resolveDate(1);\n            this.events = [];\n            this._createHeaders();\n            this._createRenderData();\n        }\n    }, {\n        key: 'setDate',\n        value: function setDate() {\n            var date = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : (0, _moment2.default)().format(_index.DATE_FORMAT);\n\n            this._resolveDate(0, date);\n            this.events = [];\n            this._createHeaders();\n            this._createRenderData();\n        }\n    }, {\n        key: 'setViewType',\n        value: function setViewType() {\n            var viewType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _index.ViewTypes.Week;\n            var showAgenda = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n            var isEventPerspective = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n            this.showAgenda = showAgenda;\n            this.isEventPerspective = isEventPerspective;\n            this.cellUnit = _index.CellUnits.Day;\n\n            if (this.viewType !== viewType) {\n                var date = this.startDate;\n\n                if (viewType === _index.ViewTypes.Custom || viewType === _index.ViewTypes.Custom1 || viewType === _index.ViewTypes.Custom2) {\n                    this.viewType = viewType;\n                    this._resolveDate(0, date);\n                } else {\n                    if (this.viewType < viewType) {\n                        if (viewType === _index.ViewTypes.Week) {\n                            this.startDate = this.localeMoment(date).startOf('week').format(_index.DATE_FORMAT);\n                            this.endDate = this.localeMoment(this.startDate).endOf('week').format(_index.DATE_FORMAT);\n                        } else if (viewType === _index.ViewTypes.Month) {\n                            this.startDate = this.localeMoment(date).startOf('month').format(_index.DATE_FORMAT);\n                            this.endDate = this.localeMoment(this.startDate).endOf('month').format(_index.DATE_FORMAT);\n                        } else if (viewType === _index.ViewTypes.Quarter) {\n                            this.startDate = this.localeMoment(date).startOf('quarter').format(_index.DATE_FORMAT);\n                            this.endDate = this.localeMoment(this.startDate).endOf('quarter').format(_index.DATE_FORMAT);\n                        } else if (viewType === _index.ViewTypes.Year) {\n                            this.startDate = this.localeMoment(date).startOf('year').format(_index.DATE_FORMAT);\n                            this.endDate = this.localeMoment(this.startDate).endOf('year').format(_index.DATE_FORMAT);\n                        }\n                    } else {\n                        var start = this.localeMoment(this.startDate);\n                        var end = this.localeMoment(this.endDate).add(1, 'days');\n\n                        if (this.selectDate !== undefined) {\n                            var selectDate = this.localeMoment(this.selectDate);\n                            if (selectDate >= start && selectDate < end) {\n                                date = this.selectDate;\n                            }\n                        }\n\n                        var now = this.localeMoment();\n                        if (now >= start && now < end) {\n                            date = now.format(_index.DATE_FORMAT);\n                        }\n\n                        if (viewType === _index.ViewTypes.Day) {\n                            this.startDate = date;\n                            this.endDate = this.startDate;\n                            this.cellUnit = _index.CellUnits.Hour;\n                        } else if (viewType === _index.ViewTypes.Week) {\n                            this.startDate = this.localeMoment(date).startOf('week').format(_index.DATE_FORMAT);\n                            this.endDate = this.localeMoment(this.startDate).endOf('week').format(_index.DATE_FORMAT);\n                        } else if (viewType === _index.ViewTypes.Month) {\n                            this.startDate = this.localeMoment(date).startOf('month').format(_index.DATE_FORMAT);\n                            this.endDate = this.localeMoment(this.startDate).endOf('month').format(_index.DATE_FORMAT);\n                        } else if (viewType === _index.ViewTypes.Quarter) {\n                            this.startDate = this.localeMoment(date).startOf('quarter').format(_index.DATE_FORMAT);\n                            this.endDate = this.localeMoment(this.startDate).endOf('quarter').format(_index.DATE_FORMAT);\n                        }\n                    }\n\n                    this.viewType = viewType;\n                }\n\n                this.events = [];\n                this._createHeaders();\n                this._createRenderData();\n                this.setScrollToSpecialMoment(true);\n            }\n        }\n    }, {\n        key: 'setSchedulerMaxHeight',\n        value: function setSchedulerMaxHeight(newSchedulerMaxHeight) {\n            this.config.schedulerMaxHeight = newSchedulerMaxHeight;\n        }\n    }, {\n        key: 'isSchedulerResponsive',\n        value: function isSchedulerResponsive() {\n            return !!this.config.schedulerWidth.endsWith && this.config.schedulerWidth.endsWith(\"%\");\n        }\n    }, {\n        key: 'toggleExpandStatus',\n        value: function toggleExpandStatus(slotId) {\n            var slotEntered = false;\n            var slotIndent = -1;\n            var isExpanded = false;\n            var expandedMap = new Map();\n            this.renderData.forEach(function (item) {\n                if (slotEntered === false) {\n                    if (item.slotId === slotId && item.hasChildren) {\n                        slotEntered = true;\n\n                        isExpanded = !item.expanded;\n                        item.expanded = isExpanded;\n                        slotIndent = item.indent;\n                        expandedMap.set(item.indent, {\n                            expanded: item.expanded,\n                            render: item.render\n                        });\n                    }\n                } else {\n                    if (item.indent > slotIndent) {\n                        var expandStatus = expandedMap.get(item.indent - 1);\n                        item.render = expandStatus.expanded && expandStatus.render;\n\n                        if (item.hasChildren) {\n                            expandedMap.set(item.indent, {\n                                expanded: item.expanded,\n                                render: item.render\n                            });\n                        }\n                    } else {\n                        slotEntered = false;\n                    }\n                }\n            });\n        }\n    }, {\n        key: 'isResourceViewResponsive',\n        value: function isResourceViewResponsive() {\n            var resourceTableWidth = this.getResourceTableConfigWidth();\n            return !!resourceTableWidth.endsWith && resourceTableWidth.endsWith(\"%\");\n        }\n    }, {\n        key: 'isContentViewResponsive',\n        value: function isContentViewResponsive() {\n            var contentCellWidth = this.getContentCellConfigWidth();\n            return !!contentCellWidth.endsWith && contentCellWidth.endsWith(\"%\");\n        }\n    }, {\n        key: 'getSchedulerWidth',\n        value: function getSchedulerWidth() {\n            var baseWidth = this.documentWidth - this.config.besidesWidth > 0 ? this.documentWidth - this.config.besidesWidth : 0;\n            return this.isSchedulerResponsive() ? parseInt(baseWidth * Number(this.config.schedulerWidth.slice(0, -1)) / 100) : this.config.schedulerWidth;\n        }\n    }, {\n        key: 'getResourceTableWidth',\n        value: function getResourceTableWidth() {\n            var resourceTableConfigWidth = this.getResourceTableConfigWidth();\n            var schedulerWidth = this.getSchedulerWidth();\n            var resourceTableWidth = this.isResourceViewResponsive() ? parseInt(schedulerWidth * Number(resourceTableConfigWidth.slice(0, -1)) / 100) : resourceTableConfigWidth;\n            if (this.isSchedulerResponsive() && this.getContentTableWidth() + resourceTableWidth < schedulerWidth) resourceTableWidth = schedulerWidth - this.getContentTableWidth();\n            return resourceTableWidth;\n        }\n    }, {\n        key: 'getContentCellWidth',\n        value: function getContentCellWidth() {\n            var contentCellConfigWidth = this.getContentCellConfigWidth();\n            var schedulerWidth = this.getSchedulerWidth();\n            return this.isContentViewResponsive() ? parseInt(schedulerWidth * Number(contentCellConfigWidth.slice(0, -1)) / 100) : contentCellConfigWidth;\n        }\n    }, {\n        key: 'getContentTableWidth',\n        value: function getContentTableWidth() {\n            return this.headers.length * this.getContentCellWidth();\n        }\n    }, {\n        key: 'getScrollToSpecialMoment',\n        value: function getScrollToSpecialMoment() {\n            if (this.config.scrollToSpecialMomentEnabled) return this.scrollToSpecialMoment;\n            return false;\n        }\n    }, {\n        key: 'getSlots',\n        value: function getSlots() {\n            return this.isEventPerspective ? this.eventGroups : this.resources;\n        }\n    }, {\n        key: 'getSlotById',\n        value: function getSlotById(slotId) {\n            var slots = this.getSlots();\n            var slot = undefined;\n            slots.forEach(function (item) {\n                if (item.id === slotId) slot = item;\n            });\n            return slot;\n        }\n    }, {\n        key: 'getResourceById',\n        value: function getResourceById(resourceId) {\n            var resource = undefined;\n            this.resources.forEach(function (item) {\n                if (item.id === resourceId) resource = item;\n            });\n            return resource;\n        }\n    }, {\n        key: 'getTableHeaderHeight',\n        value: function getTableHeaderHeight() {\n            return this.config.tableHeaderHeight;\n        }\n    }, {\n        key: 'getSchedulerContentDesiredHeight',\n        value: function getSchedulerContentDesiredHeight() {\n            var height = 0;\n            this.renderData.forEach(function (item) {\n                if (item.render) height += item.rowHeight;\n            });\n            return height;\n        }\n    }, {\n        key: 'getCellMaxEvents',\n        value: function getCellMaxEvents() {\n            return this.viewType === _index.ViewTypes.Week ? this.config.weekMaxEvents : this.viewType === _index.ViewTypes.Day ? this.config.dayMaxEvents : this.viewType === _index.ViewTypes.Month ? this.config.monthMaxEvents : this.viewType === _index.ViewTypes.Year ? this.config.yearMaxEvents : this.viewType === _index.ViewTypes.Quarter ? this.config.quarterMaxEvents : this.config.customMaxEvents;\n        }\n    }, {\n        key: 'getDateLabel',\n        value: function getDateLabel() {\n            var start = this.localeMoment(this.startDate);\n            var end = this.localeMoment(this.endDate);\n            var dateLabel = start.format('LL');\n\n            if (start != end) dateLabel = start.format('LL') + '-' + end.format('LL');\n\n            if (!!this.behaviors.getDateLabelFunc) dateLabel = this.behaviors.getDateLabelFunc(this, this.viewType, this.startDate, this.endDate);\n\n            return dateLabel;\n        }\n    }, {\n        key: 'addEvent',\n        value: function addEvent(newEvent) {\n            this._attachEvent(newEvent);\n            if (this.eventGroupsAutoGenerated) this._generateEventGroups();\n            this._createRenderData();\n        }\n    }, {\n        key: 'updateEventStart',\n        value: function updateEventStart(event, newStart) {\n            this._detachEvent(event);\n            event.start = newStart;\n            this._attachEvent(event);\n            this._createRenderData();\n        }\n    }, {\n        key: 'updateEventEnd',\n        value: function updateEventEnd(event, newEnd) {\n            event.end = newEnd;\n            this._createRenderData();\n        }\n    }, {\n        key: 'moveEvent',\n        value: function moveEvent(event, newSlotId, newSlotName, newStart, newEnd) {\n            this._detachEvent(event);\n            if (this.isEventPerspective) {\n                event.groupId = newSlotId;\n                event.groupName = newSlotName;\n            } else event.resourceId = newSlotId;\n            event.end = newEnd;\n            event.start = newStart;\n            this._attachEvent(event);\n            this._createRenderData();\n        }\n    }, {\n        key: 'isEventInTimeWindow',\n        value: function isEventInTimeWindow(eventStart, eventEnd, windowStart, windowEnd) {\n            return eventStart < windowEnd && eventEnd > windowStart;\n        }\n    }, {\n        key: 'removeEvent',\n        value: function removeEvent(event) {\n            var index = this.events.indexOf(event);\n            if (index !== -1) {\n                this.events.splice(index, 1);\n                this._createRenderData();\n            }\n        }\n    }, {\n        key: 'removeEventById',\n        value: function removeEventById(eventId) {\n            var index = -1;\n            this.events.forEach(function (item, idx) {\n                if (item.id === eventId) index = idx;\n            });\n            if (index !== -1) {\n                this.events.splice(index, 1);\n                this._createRenderData();\n            }\n        }\n    }, {\n        key: 'getResourceTableConfigWidth',\n        value: function getResourceTableConfigWidth() {\n            if (this.showAgenda) return this.config.agendaResourceTableWidth;\n\n            return this.viewType === _index.ViewTypes.Week ? this.config.weekResourceTableWidth : this.viewType === _index.ViewTypes.Day ? this.config.dayResourceTableWidth : this.viewType === _index.ViewTypes.Month ? this.config.monthResourceTableWidth : this.viewType === _index.ViewTypes.Year ? this.config.yearResourceTableWidth : this.viewType === _index.ViewTypes.Quarter ? this.config.quarterResourceTableWidth : this.config.customResourceTableWidth;\n        }\n    }, {\n        key: 'getContentCellConfigWidth',\n        value: function getContentCellConfigWidth() {\n            return this.viewType === _index.ViewTypes.Week ? this.config.weekCellWidth : this.viewType === _index.ViewTypes.Day ? this.config.dayCellWidth : this.viewType === _index.ViewTypes.Month ? this.config.monthCellWidth : this.viewType === _index.ViewTypes.Year ? this.config.yearCellWidth : this.viewType === _index.ViewTypes.Quarter ? this.config.quarterCellWidth : this.config.customCellWidth;\n        }\n    }, {\n        key: '_setDocumentWidth',\n        value: function _setDocumentWidth(documentWidth) {\n            if (documentWidth >= 0) {\n                this.documentWidth = documentWidth;\n            }\n        }\n    }, {\n        key: '_detachEvent',\n        value: function _detachEvent(event) {\n            var index = this.events.indexOf(event);\n            if (index !== -1) this.events.splice(index, 1);\n        }\n    }, {\n        key: '_attachEvent',\n        value: function _attachEvent(event) {\n            var _this = this;\n\n            var pos = 0;\n            var eventStart = this.localeMoment(event.start);\n            this.events.forEach(function (item, index) {\n                var start = _this.localeMoment(item.start);\n                if (eventStart >= start) pos = index + 1;\n            });\n            this.events.splice(pos, 0, event);\n        }\n    }, {\n        key: '_handleRecurringEvents',\n        value: function _handleRecurringEvents() {\n            var _this2 = this;\n\n            var recurringEvents = this.events.filter(function (x) {\n                return !!x.rrule;\n            });\n            recurringEvents.forEach(function (item) {\n                _this2._detachEvent(item);\n            });\n\n            recurringEvents.forEach(function (item) {\n                var windowStart = _this2.localeMoment(_this2.startDate),\n                    windowEnd = _this2.localeMoment(_this2.endDate).add(1, 'days'),\n                    oldStart = _this2.localeMoment(item.start),\n                    oldEnd = _this2.localeMoment(item.end),\n                    rule = (0, _rrule.rrulestr)(item.rrule),\n                    oldDtstart = undefined;\n                if (!!rule.origOptions.dtstart) {\n                    oldDtstart = _this2.localeMoment(rule.origOptions.dtstart);\n                }\n                rule.origOptions.dtstart = oldStart.toDate();\n                if (!rule.origOptions.until || windowEnd < _this2.localeMoment(rule.origOptions.until)) {\n                    rule.origOptions.until = windowEnd.toDate();\n                }\n\n                //reload\n                rule = (0, _rrule.rrulestr)(rule.toString());\n                if (item.exdates || item.exrule) {\n                    var rruleSet = new _rrule.RRuleSet();\n                    rruleSet.rrule(rule);\n                    if (item.exrule) {\n                        rruleSet.exrule((0, _rrule.rrulestr)(item.exrule));\n                    }\n                    if (item.exdates) {\n                        item.exdates.forEach(function (exdate) {\n                            rruleSet.exdate(_this2.localeMoment(exdate).toDate());\n                        });\n                    }\n                    rule = rruleSet;\n                }\n\n                var all = rule.all();\n                var newEvents = all.map(function (time, index) {\n                    return _extends({}, item, {\n                        recurringEventId: item.id,\n                        recurringEventStart: item.start,\n                        recurringEventEnd: item.end,\n                        id: item.id + '-' + index,\n                        start: _this2.localeMoment(time).format(_index.DATETIME_FORMAT),\n                        end: _this2.localeMoment(time).add(oldEnd.diff(oldStart), 'ms').format(_index.DATETIME_FORMAT)\n                    });\n                });\n                newEvents.forEach(function (newEvent) {\n                    var eventStart = _this2.localeMoment(newEvent.start),\n                        eventEnd = _this2.localeMoment(newEvent.end);\n                    if (_this2.isEventInTimeWindow(eventStart, eventEnd, windowStart, windowEnd) && (!oldDtstart || eventStart >= oldDtstart)) {\n                        _this2._attachEvent(newEvent);\n                    }\n                });\n            });\n        }\n    }, {\n        key: '_resolveDate',\n        value: function _resolveDate(num) {\n            var date = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n            if (date != undefined) this.selectDate = this.localeMoment(date).format(_index.DATE_FORMAT);\n\n            if (this.viewType === _index.ViewTypes.Week) {\n                this.startDate = date != undefined ? this.localeMoment(date).startOf('week').format(_index.DATE_FORMAT) : this.localeMoment(this.startDate).add(num, 'weeks').format(_index.DATE_FORMAT);\n                this.endDate = this.localeMoment(this.startDate).endOf('week').format(_index.DATE_FORMAT);\n            } else if (this.viewType === _index.ViewTypes.Day) {\n                this.startDate = date != undefined ? this.selectDate : this.localeMoment(this.startDate).add(num, 'days').format(_index.DATE_FORMAT);\n                this.endDate = this.startDate;\n            } else if (this.viewType === _index.ViewTypes.Month) {\n                this.startDate = date != undefined ? this.localeMoment(date).startOf('month').format(_index.DATE_FORMAT) : this.localeMoment(this.startDate).add(num, 'months').format(_index.DATE_FORMAT);\n                this.endDate = this.localeMoment(this.startDate).endOf('month').format(_index.DATE_FORMAT);\n            } else if (this.viewType === _index.ViewTypes.Quarter) {\n                this.startDate = date != undefined ? this.localeMoment(date).startOf('quarter').format(_index.DATE_FORMAT) : this.localeMoment(this.startDate).add(num, 'quarters').format(_index.DATE_FORMAT);\n                this.endDate = this.localeMoment(this.startDate).endOf('quarter').format(_index.DATE_FORMAT);\n            } else if (this.viewType === _index.ViewTypes.Year) {\n                this.startDate = date != undefined ? this.localeMoment(date).startOf('year').format(_index.DATE_FORMAT) : this.localeMoment(this.startDate).add(num, 'years').format(_index.DATE_FORMAT);\n                this.endDate = this.localeMoment(this.startDate).endOf('year').format(_index.DATE_FORMAT);\n            } else if (this.viewType === _index.ViewTypes.Custom || this.viewType === _index.ViewTypes.Custom1 || this.viewType === _index.ViewTypes.Custom2) {\n                if (this.behaviors.getCustomDateFunc != undefined) {\n                    var customDate = this.behaviors.getCustomDateFunc(this, num, date);\n                    this.startDate = customDate.startDate;\n                    this.endDate = customDate.endDate;\n                    if (!!customDate.cellUnit) this.cellUnit = customDate.cellUnit;\n                } else {\n                    throw new Error('This is custom view type, set behaviors.getCustomDateFunc func to resolve the time window(startDate and endDate) yourself');\n                }\n            }\n        }\n    }, {\n        key: '_createHeaders',\n        value: function _createHeaders() {\n            var headers = [],\n                start = this.localeMoment(this.startDate),\n                end = this.localeMoment(this.endDate),\n                header = start;\n\n            if (this.showAgenda) {\n                headers.push({ time: header.format(_index.DATETIME_FORMAT), nonWorkingTime: false });\n            } else {\n                if (this.cellUnit === _index.CellUnits.Hour) {\n                    start = start.add(this.config.dayStartFrom, 'hours');\n                    end = end.add(this.config.dayStopTo, 'hours');\n                    header = start;\n\n                    while (header >= start && header <= end) {\n                        var minuteSteps = this.getMinuteStepsInHour();\n                        for (var i = 0; i < minuteSteps; i++) {\n                            var hour = header.hour();\n                            if (hour >= this.config.dayStartFrom && hour <= this.config.dayStopTo) {\n                                var time = header.format(_index.DATETIME_FORMAT);\n                                var nonWorkingTime = this.behaviors.isNonWorkingTimeFunc(this, time);\n                                headers.push({ time: time, nonWorkingTime: nonWorkingTime });\n                            }\n\n                            header = header.add(this.config.minuteStep, 'minutes');\n                        }\n                    }\n                } else {\n                    while (header >= start && header <= end) {\n                        var _time = header.format(_index.DATETIME_FORMAT);\n                        var dayOfWeek = header.weekday();\n                        if (this.config.displayWeekend || dayOfWeek !== 0 && dayOfWeek !== 6) {\n                            var _nonWorkingTime = this.behaviors.isNonWorkingTimeFunc(this, _time);\n                            headers.push({ time: _time, nonWorkingTime: _nonWorkingTime });\n                        }\n\n                        header = header.add(1, 'days');\n                    }\n                }\n            }\n\n            this.headers = headers;\n        }\n    }, {\n        key: '_createInitHeaderEvents',\n        value: function _createInitHeaderEvents(header) {\n            var start = this.localeMoment(header.time),\n                startValue = start.format(_index.DATETIME_FORMAT);\n            var endValue = this.showAgenda ? this.viewType === _index.ViewTypes.Week ? start.add(1, 'weeks').format(_index.DATETIME_FORMAT) : this.viewType === _index.ViewTypes.Day ? start.add(1, 'days').format(_index.DATETIME_FORMAT) : this.viewType === _index.ViewTypes.Month ? start.add(1, 'months').format(_index.DATETIME_FORMAT) : this.viewType === _index.ViewTypes.Year ? start.add(1, 'years').format(_index.DATETIME_FORMAT) : this.viewType === _index.ViewTypes.Quarter ? start.add(1, 'quarters').format(_index.DATETIME_FORMAT) : this.localeMoment(this.endDate).add(1, 'days').format(_index.DATETIME_FORMAT) : this.cellUnit === _index.CellUnits.Hour ? start.add(this.config.minuteStep, 'minutes').format(_index.DATETIME_FORMAT) : start.add(1, 'days').format(_index.DATETIME_FORMAT);\n            return {\n                time: header.time,\n                nonWorkingTime: header.nonWorkingTime,\n                start: startValue,\n                end: endValue,\n                count: 0,\n                addMore: 0,\n                addMoreIndex: 0,\n                events: [,,,]\n            };\n        }\n    }, {\n        key: '_createHeaderEvent',\n        value: function _createHeaderEvent(render, span, eventItem) {\n            return {\n                render: render,\n                span: span,\n                eventItem: eventItem\n            };\n        }\n    }, {\n        key: '_getEventSlotId',\n        value: function _getEventSlotId(event) {\n            return this.isEventPerspective ? this._getEventGroupId(event) : event.resourceId;\n        }\n    }, {\n        key: '_getEventGroupId',\n        value: function _getEventGroupId(event) {\n            return !!event.groupId ? event.groupId.toString() : event.id.toString();\n        }\n    }, {\n        key: '_getEventGroupName',\n        value: function _getEventGroupName(event) {\n            return !!event.groupName ? event.groupName : event.title;\n        }\n    }, {\n        key: '_generateEventGroups',\n        value: function _generateEventGroups() {\n            var _this3 = this;\n\n            var eventGroups = [];\n            var set = new Set();\n            this.events.forEach(function (item) {\n                var groupId = _this3._getEventGroupId(item);\n                var groupName = _this3._getEventGroupName(item);\n\n                if (!set.has(groupId)) {\n                    eventGroups.push({\n                        id: groupId,\n                        name: groupName,\n                        state: item\n                    });\n                    set.add(groupId);\n                }\n            });\n            this.eventGroups = eventGroups;\n        }\n    }, {\n        key: '_createInitRenderData',\n        value: function _createInitRenderData(isEventPerspective, eventGroups, resources, headers) {\n            var _this4 = this;\n\n            var slots = isEventPerspective ? eventGroups : resources;\n            var slotTree = [],\n                slotMap = new Map();\n            slots.forEach(function (slot) {\n                var headerEvents = headers.map(function (header) {\n                    return _this4._createInitHeaderEvents(header);\n                });\n\n                var slotRenderData = {\n                    slotId: slot.id,\n                    slotName: slot.name,\n                    parentId: slot.parentId,\n                    groupOnly: slot.groupOnly,\n                    hasSummary: false,\n                    rowMaxCount: 0,\n                    rowHeight: _this4.config.nonAgendaSlotMinHeight !== 0 ? _this4.config.nonAgendaSlotMinHeight : _this4.config.eventItemLineHeight + 2,\n                    headerItems: headerEvents,\n                    indent: 0,\n                    hasChildren: false,\n                    expanded: true,\n                    render: true\n                };\n                var id = slot.id;\n                var value = undefined;\n                if (slotMap.has(id)) {\n                    value = slotMap.get(id);\n                    value.data = slotRenderData;\n                } else {\n                    value = {\n                        data: slotRenderData,\n                        children: []\n                    };\n                    slotMap.set(id, value);\n                }\n\n                var parentId = slot.parentId;\n                if (!parentId || parentId === id) {\n                    slotTree.push(value);\n                } else {\n                    var parentValue = undefined;\n                    if (slotMap.has(parentId)) {\n                        parentValue = slotMap.get(parentId);\n                    } else {\n                        parentValue = {\n                            data: undefined,\n                            children: []\n                        };\n                        slotMap.set(parentId, parentValue);\n                    }\n\n                    parentValue.children.push(value);\n                }\n            });\n\n            var slotStack = [];\n            var i = void 0;\n            for (i = slotTree.length - 1; i >= 0; i--) {\n                slotStack.push(slotTree[i]);\n            }\n            var initRenderData = [];\n            var currentNode = undefined;\n            while (slotStack.length > 0) {\n                currentNode = slotStack.pop();\n                if (currentNode.data.indent > 0) {\n                    currentNode.data.render = this.config.defaultExpanded;\n                }\n                if (currentNode.children.length > 0) {\n                    currentNode.data.hasChildren = true;\n                    currentNode.data.expanded = this.config.defaultExpanded;\n                }\n                initRenderData.push(currentNode.data);\n\n                for (i = currentNode.children.length - 1; i >= 0; i--) {\n                    currentNode.children[i].data.indent = currentNode.data.indent + 1;\n                    slotStack.push(currentNode.children[i]);\n                }\n            }\n\n            return initRenderData;\n        }\n    }, {\n        key: '_getSpan',\n        value: function _getSpan(startTime, endTime, headers) {\n            if (this.showAgenda) return 1;\n\n            var start = this.localeMoment(startTime),\n                end = this.localeMoment(endTime),\n                span = 0;\n\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = headers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var header = _step.value;\n\n                    var spanStart = this.localeMoment(header.time),\n                        spanEnd = this.cellUnit === _index.CellUnits.Hour ? this.localeMoment(header.time).add(this.config.minuteStep, 'minutes') : this.localeMoment(header.time).add(1, 'days');\n\n                    if (spanStart < end && spanEnd > start) {\n                        span++;\n                    }\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n\n            return span;\n        }\n    }, {\n        key: '_validateResource',\n        value: function _validateResource(resources) {\n            if (Object.prototype.toString.call(resources) !== \"[object Array]\") {\n                throw new Error('Resources should be Array object');\n            }\n\n            resources.forEach(function (item, index) {\n                if (item == undefined) {\n                    console.error('Resource undefined: ' + index);\n                    throw new Error('Resource undefined: ' + index);\n                }\n                if (item.id == undefined || item.name == undefined) {\n                    console.error('Resource property missed', index, item);\n                    throw new Error('Resource property undefined: ' + index);\n                }\n            });\n        }\n    }, {\n        key: '_validateEventGroups',\n        value: function _validateEventGroups(eventGroups) {\n            if (Object.prototype.toString.call(eventGroups) !== \"[object Array]\") {\n                throw new Error('Event groups should be Array object');\n            }\n\n            eventGroups.forEach(function (item, index) {\n                if (item == undefined) {\n                    console.error('Event group undefined: ' + index);\n                    throw new Error('Event group undefined: ' + index);\n                }\n                if (item.id == undefined || item.name == undefined) {\n                    console.error('Event group property missed', index, item);\n                    throw new Error('Event group property undefined: ' + index);\n                }\n            });\n        }\n    }, {\n        key: '_validateEvents',\n        value: function _validateEvents(events) {\n            if (Object.prototype.toString.call(events) !== \"[object Array]\") {\n                throw new Error('Events should be Array object');\n            }\n\n            events.forEach(function (e, index) {\n                if (e == undefined) {\n                    console.error('Event undefined: ' + index);\n                    throw new Error('Event undefined: ' + index);\n                }\n                if (e.id == undefined || e.resourceId == undefined || e.title == undefined || e.start == undefined || e.end == undefined) {\n                    console.error('Event property missed', index, e);\n                    throw new Error('Event property undefined: ' + index);\n                }\n            });\n        }\n    }, {\n        key: '_validateMinuteStep',\n        value: function _validateMinuteStep(minuteStep) {\n            if (60 % minuteStep !== 0) {\n                console.error('Minute step is not set properly - 60 minutes must be divisible without remainder by this number');\n                throw new Error('Minute step is not set properly - 60 minutes must be divisible without remainder by this number');\n            }\n        }\n    }, {\n        key: '_compare',\n        value: function _compare(event1, event2) {\n            var start1 = this.localeMoment(event1.start),\n                start2 = this.localeMoment(event2.start);\n            if (start1 !== start2) return start1 < start2 ? -1 : 1;\n\n            var end1 = this.localeMoment(event1.end),\n                end2 = this.localeMoment(event2.end);\n            if (end1 !== end2) return end1 < end2 ? -1 : 1;\n\n            return event1.id < event2.id ? -1 : 1;\n        }\n    }, {\n        key: '_createRenderData',\n        value: function _createRenderData() {\n            var _this5 = this;\n\n            var initRenderData = this._createInitRenderData(this.isEventPerspective, this.eventGroups, this.resources, this.headers);\n            //this.events.sort(this._compare);\n            var cellMaxEventsCount = this.getCellMaxEvents();\n            var cellMaxEventsCountValue = 30;\n\n            this.events.forEach(function (item) {\n                var resourceEventsList = initRenderData.filter(function (x) {\n                    return x.slotId === _this5._getEventSlotId(item);\n                });\n                if (resourceEventsList.length > 0) {\n                    var resourceEvents = resourceEventsList[0];\n                    var span = _this5._getSpan(item.start, item.end, _this5.headers);\n                    var eventStart = _this5.localeMoment(item.start),\n                        eventEnd = _this5.localeMoment(item.end);\n                    var pos = -1;\n\n                    resourceEvents.headerItems.forEach(function (header, index) {\n                        var headerStart = _this5.localeMoment(header.start),\n                            headerEnd = _this5.localeMoment(header.end);\n                        if (headerEnd > eventStart && headerStart < eventEnd) {\n                            header.count = header.count + 1;\n                            if (header.count > resourceEvents.rowMaxCount) {\n                                resourceEvents.rowMaxCount = header.count;\n                                var rowsCount = cellMaxEventsCount <= cellMaxEventsCountValue && resourceEvents.rowMaxCount > cellMaxEventsCount ? cellMaxEventsCount : resourceEvents.rowMaxCount;\n                                var newRowHeight = rowsCount * _this5.config.eventItemLineHeight + (_this5.config.creatable && _this5.config.checkConflict === false ? 20 : 2);\n                                if (newRowHeight > resourceEvents.rowHeight) resourceEvents.rowHeight = newRowHeight;\n                            }\n\n                            if (pos === -1) {\n                                var tmp = 0;\n                                while (header.events[tmp] !== undefined) {\n                                    tmp++;\n                                }pos = tmp;\n                            }\n                            var render = headerStart <= eventStart || index === 0;\n                            if (render === false) {\n                                var previousHeader = resourceEvents.headerItems[index - 1];\n                                var previousHeaderStart = _this5.localeMoment(previousHeader.start),\n                                    previousHeaderEnd = _this5.localeMoment(previousHeader.end);\n                                if (previousHeaderEnd <= eventStart || previousHeaderStart >= eventEnd) render = true;\n                            }\n                            header.events[pos] = _this5._createHeaderEvent(render, span, item);\n                        }\n                    });\n                }\n            });\n\n            if (cellMaxEventsCount <= cellMaxEventsCountValue || this.behaviors.getSummaryFunc !== undefined) {\n                initRenderData.forEach(function (resourceEvents) {\n                    var hasSummary = false;\n\n                    resourceEvents.headerItems.forEach(function (headerItem) {\n                        if (cellMaxEventsCount <= cellMaxEventsCountValue) {\n                            var renderItemsCount = 0,\n                                addMoreIndex = 0,\n                                index = 0;\n                            while (index < cellMaxEventsCount - 1) {\n                                if (headerItem.events[index] !== undefined) {\n                                    renderItemsCount++;\n                                    addMoreIndex = index + 1;\n                                }\n\n                                index++;\n                            }\n\n                            if (headerItem.events[index] !== undefined) {\n                                if (renderItemsCount + 1 < headerItem.count) {\n                                    headerItem.addMore = headerItem.count - renderItemsCount;\n                                    headerItem.addMoreIndex = addMoreIndex;\n                                }\n                            } else {\n                                if (renderItemsCount < headerItem.count) {\n                                    headerItem.addMore = headerItem.count - renderItemsCount;\n                                    headerItem.addMoreIndex = addMoreIndex;\n                                }\n                            }\n                        }\n\n                        if (_this5.behaviors.getSummaryFunc !== undefined) {\n                            var events = [];\n                            headerItem.events.forEach(function (e) {\n                                if (!!e && !!e.eventItem) events.push(e.eventItem);\n                            });\n\n                            headerItem.summary = _this5.behaviors.getSummaryFunc(_this5, events, resourceEvents.slotId, resourceEvents.slotName, headerItem.start, headerItem.end);\n                            if (!!headerItem.summary && headerItem.summary.text != undefined) hasSummary = true;\n                        }\n                    });\n\n                    resourceEvents.hasSummary = hasSummary;\n                    if (hasSummary) {\n                        var rowsCount = cellMaxEventsCount <= cellMaxEventsCountValue && resourceEvents.rowMaxCount > cellMaxEventsCount ? cellMaxEventsCount : resourceEvents.rowMaxCount;\n                        var newRowHeight = (rowsCount + 1) * _this5.config.eventItemLineHeight + (_this5.config.creatable && _this5.config.checkConflict === false ? 20 : 2);\n                        if (newRowHeight > resourceEvents.rowHeight) resourceEvents.rowHeight = newRowHeight;\n                    }\n                });\n            }\n\n            this.renderData = initRenderData;\n        }\n    }, {\n        key: '_startResizing',\n        value: function _startResizing() {\n            this.resizing = true;\n        }\n    }, {\n        key: '_stopResizing',\n        value: function _stopResizing() {\n            this.resizing = false;\n        }\n    }, {\n        key: '_isResizing',\n        value: function _isResizing() {\n            return this.resizing;\n        }\n    }]);\n\n    return SchedulerData;\n}();\n\nexports.default = SchedulerData;"]},"metadata":{},"sourceType":"script"}