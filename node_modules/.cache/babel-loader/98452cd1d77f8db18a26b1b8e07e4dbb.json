{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _class, _temp, _initialiseProps;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _popover = require('antd/lib/popover');\n\nvar _popover2 = _interopRequireDefault(_popover);\n\nrequire('antd/lib/popover/style/index.css');\n\nvar _EventItemPopover = require('./EventItemPopover');\n\nvar _EventItemPopover2 = _interopRequireDefault(_EventItemPopover);\n\nvar _index = require('./index');\n\nvar _DnDTypes = require('./DnDTypes');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar supportTouch = ('ontouchstart' in window);\nvar EventItem = (_temp = _class = function (_Component) {\n  _inherits(EventItem, _Component);\n\n  function EventItem(props) {\n    _classCallCheck(this, EventItem);\n\n    var _this = _possibleConstructorReturn(this, (EventItem.__proto__ || Object.getPrototypeOf(EventItem)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var left = props.left,\n        top = props.top,\n        width = props.width;\n    _this.state = {\n      left: left,\n      top: top,\n      width: width\n    };\n    _this.startResizer = null;\n    _this.endResizer = null;\n    return _this;\n  }\n\n  _createClass(EventItem, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(np) {\n      var left = np.left,\n          top = np.top,\n          width = np.width;\n      this.setState({\n        left: left,\n        top: top,\n        width: width\n      });\n      this.subscribeResizeEvent(np);\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.subscribeResizeEvent(this.props);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          eventItem = _props.eventItem,\n          isStart = _props.isStart,\n          isEnd = _props.isEnd,\n          isInPopover = _props.isInPopover,\n          eventItemClick = _props.eventItemClick,\n          schedulerData = _props.schedulerData,\n          isDragging = _props.isDragging,\n          connectDragSource = _props.connectDragSource,\n          connectDragPreview = _props.connectDragPreview,\n          eventItemTemplateResolver = _props.eventItemTemplateResolver;\n      var config = schedulerData.config,\n          localeMoment = schedulerData.localeMoment;\n      var _state = this.state,\n          left = _state.left,\n          width = _state.width,\n          top = _state.top;\n      var roundCls = isStart ? isEnd ? 'round-all' : 'round-head' : isEnd ? 'round-tail' : 'round-none';\n      var bgColor = config.defaultEventBgColor;\n      if (!!eventItem.bgColor) bgColor = eventItem.bgColor;\n      var titleText = schedulerData.behaviors.getEventTextFunc(schedulerData, eventItem);\n\n      var content = _react2.default.createElement(_EventItemPopover2.default, _extends({}, this.props, {\n        eventItem: eventItem,\n        title: eventItem.title,\n        startTime: eventItem.start,\n        endTime: eventItem.end,\n        statusColor: bgColor\n      }));\n\n      var start = localeMoment(eventItem.start);\n      var eventTitle = isInPopover ? start.format('HH:mm') + ' ' + titleText : titleText;\n\n      var startResizeDiv = _react2.default.createElement('div', null);\n\n      if (this.startResizable(this.props)) startResizeDiv = _react2.default.createElement('div', {\n        className: 'event-resizer event-start-resizer',\n        ref: function ref(_ref) {\n          return _this2.startResizer = _ref;\n        }\n      });\n\n      var endResizeDiv = _react2.default.createElement('div', null);\n\n      if (this.endResizable(this.props)) endResizeDiv = _react2.default.createElement('div', {\n        className: 'event-resizer event-end-resizer',\n        ref: function ref(_ref2) {\n          return _this2.endResizer = _ref2;\n        }\n      });\n\n      var eventItemTemplate = _react2.default.createElement('div', {\n        className: roundCls + ' event-item',\n        key: eventItem.id,\n        style: {\n          height: config.eventItemHeight,\n          backgroundColor: bgColor\n        }\n      }, _react2.default.createElement('span', {\n        style: {\n          marginLeft: '10px',\n          lineHeight: config.eventItemHeight + 'px'\n        }\n      }, eventTitle));\n\n      if (eventItemTemplateResolver != undefined) eventItemTemplate = eventItemTemplateResolver(schedulerData, eventItem, bgColor, isStart, isEnd, 'event-item', config.eventItemHeight, undefined);\n\n      var a = _react2.default.createElement('a', {\n        className: 'timeline-event',\n        style: {\n          left: left,\n          width: width,\n          top: top\n        },\n        onClick: function onClick() {\n          if (!!eventItemClick) eventItemClick(schedulerData, eventItem);\n        }\n      }, eventItemTemplate, startResizeDiv, endResizeDiv);\n\n      return isDragging ? null : schedulerData._isResizing() || config.eventItemPopoverEnabled == false || eventItem.showPopover == false ? _react2.default.createElement('div', null, connectDragPreview(connectDragSource(a))) : _react2.default.createElement(_popover2.default, {\n        placement: 'bottomLeft',\n        content: content,\n        trigger: 'hover'\n      }, connectDragPreview(connectDragSource(a)));\n    }\n  }]);\n\n  return EventItem;\n}(_react.Component), _class.propTypes = {\n  schedulerData: _propTypes.PropTypes.object.isRequired,\n  eventItem: _propTypes.PropTypes.object.isRequired,\n  isStart: _propTypes.PropTypes.bool.isRequired,\n  isEnd: _propTypes.PropTypes.bool.isRequired,\n  left: _propTypes.PropTypes.number.isRequired,\n  width: _propTypes.PropTypes.number.isRequired,\n  top: _propTypes.PropTypes.number.isRequired,\n  isInPopover: _propTypes.PropTypes.bool.isRequired,\n  leftIndex: _propTypes.PropTypes.number.isRequired,\n  rightIndex: _propTypes.PropTypes.number.isRequired,\n  isDragging: _propTypes.PropTypes.bool.isRequired,\n  connectDragSource: _propTypes.PropTypes.func.isRequired,\n  connectDragPreview: _propTypes.PropTypes.func.isRequired,\n  updateEventStart: _propTypes.PropTypes.func,\n  updateEventEnd: _propTypes.PropTypes.func,\n  moveEvent: _propTypes.PropTypes.func,\n  subtitleGetter: _propTypes.PropTypes.func,\n  eventItemClick: _propTypes.PropTypes.func,\n  viewEventClick: _propTypes.PropTypes.func,\n  viewEventText: _propTypes.PropTypes.string,\n  viewEvent2Click: _propTypes.PropTypes.func,\n  viewEvent2Text: _propTypes.PropTypes.string,\n  conflictOccurred: _propTypes.PropTypes.func,\n  eventItemTemplateResolver: _propTypes.PropTypes.func\n}, _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.initStartDrag = function (ev) {\n    var _props2 = _this3.props,\n        schedulerData = _props2.schedulerData,\n        eventItem = _props2.eventItem;\n\n    var slotId = schedulerData._getEventSlotId(eventItem);\n\n    var slot = schedulerData.getSlotById(slotId);\n    if (!!slot && !!slot.groupOnly) return;\n    if (schedulerData._isResizing()) return;\n    ev.stopPropagation();\n    var clientX = 0;\n\n    if (supportTouch) {\n      if (ev.changedTouches.length == 0) return;\n      var touch = ev.changedTouches[0];\n      clientX = touch.pageX;\n    } else {\n      if (ev.buttons !== undefined && ev.buttons !== 1) return;\n      clientX = ev.clientX;\n    }\n\n    _this3.setState({\n      startX: clientX\n    });\n\n    schedulerData._startResizing();\n\n    if (supportTouch) {\n      _this3.startResizer.addEventListener('touchmove', _this3.doStartDrag, false);\n\n      _this3.startResizer.addEventListener('touchend', _this3.stopStartDrag, false);\n\n      _this3.startResizer.addEventListener('touchcancel', _this3.cancelStartDrag, false);\n    } else {\n      document.documentElement.addEventListener('mousemove', _this3.doStartDrag, false);\n      document.documentElement.addEventListener('mouseup', _this3.stopStartDrag, false);\n    }\n\n    document.onselectstart = function () {\n      return false;\n    };\n\n    document.ondragstart = function () {\n      return false;\n    };\n  };\n\n  this.doStartDrag = function (ev) {\n    ev.stopPropagation();\n    var clientX = 0;\n\n    if (supportTouch) {\n      if (ev.changedTouches.length == 0) return;\n      var touch = ev.changedTouches[0];\n      clientX = touch.pageX;\n    } else {\n      clientX = ev.clientX;\n    }\n\n    var _props3 = _this3.props,\n        left = _props3.left,\n        width = _props3.width,\n        leftIndex = _props3.leftIndex,\n        rightIndex = _props3.rightIndex,\n        schedulerData = _props3.schedulerData;\n    var cellWidth = schedulerData.getContentCellWidth();\n    var offset = leftIndex > 0 ? 5 : 6;\n    var minWidth = cellWidth - offset;\n    var maxWidth = rightIndex * cellWidth - offset;\n    var startX = _this3.state.startX;\n    var newLeft = left + clientX - startX;\n    var newWidth = width + startX - clientX;\n\n    if (newWidth < minWidth) {\n      newWidth = minWidth;\n      newLeft = (rightIndex - 1) * cellWidth + (rightIndex - 1 > 0 ? 2 : 3);\n    } else if (newWidth > maxWidth) {\n      newWidth = maxWidth;\n      newLeft = 3;\n    }\n\n    _this3.setState({\n      left: newLeft,\n      width: newWidth\n    });\n  };\n\n  this.stopStartDrag = function (ev) {\n    ev.stopPropagation();\n\n    if (supportTouch) {\n      _this3.startResizer.removeEventListener('touchmove', _this3.doStartDrag, false);\n\n      _this3.startResizer.removeEventListener('touchend', _this3.stopStartDrag, false);\n\n      _this3.startResizer.removeEventListener('touchcancel', _this3.cancelStartDrag, false);\n    } else {\n      document.documentElement.removeEventListener('mousemove', _this3.doStartDrag, false);\n      document.documentElement.removeEventListener('mouseup', _this3.stopStartDrag, false);\n    }\n\n    document.onselectstart = null;\n    document.ondragstart = null;\n    var _props4 = _this3.props,\n        width = _props4.width,\n        left = _props4.left,\n        top = _props4.top,\n        leftIndex = _props4.leftIndex,\n        rightIndex = _props4.rightIndex,\n        schedulerData = _props4.schedulerData,\n        eventItem = _props4.eventItem,\n        updateEventStart = _props4.updateEventStart,\n        conflictOccurred = _props4.conflictOccurred;\n\n    schedulerData._stopResizing();\n\n    if (_this3.state.width === width) return;\n    var clientX = 0;\n\n    if (supportTouch) {\n      if (ev.changedTouches.length == 0) {\n        _this3.setState({\n          left: left,\n          top: top,\n          width: width\n        });\n\n        return;\n      }\n\n      var touch = ev.changedTouches[0];\n      clientX = touch.pageX;\n    } else {\n      clientX = ev.clientX;\n    }\n\n    var cellUnit = schedulerData.cellUnit,\n        events = schedulerData.events,\n        config = schedulerData.config,\n        localeMoment = schedulerData.localeMoment;\n    var cellWidth = schedulerData.getContentCellWidth();\n    var offset = leftIndex > 0 ? 5 : 6;\n    var minWidth = cellWidth - offset;\n    var maxWidth = rightIndex * cellWidth - offset;\n    var startX = _this3.state.startX;\n    var newWidth = width + startX - clientX;\n    var deltaX = clientX - startX;\n    var sign = deltaX < 0 ? -1 : deltaX === 0 ? 0 : 1;\n    var count = (sign > 0 ? Math.floor(Math.abs(deltaX) / cellWidth) : Math.ceil(Math.abs(deltaX) / cellWidth)) * sign;\n    if (newWidth < minWidth) count = rightIndex - leftIndex - 1;else if (newWidth > maxWidth) count = -leftIndex;\n    var newStart = localeMoment(eventItem.start).add(cellUnit === _index.CellUnits.Hour ? count * config.minuteStep : count, cellUnit === _index.CellUnits.Hour ? 'minutes' : 'days').format(_index.DATETIME_FORMAT);\n\n    if (count !== 0 && cellUnit !== _index.CellUnits.Hour && config.displayWeekend === false) {\n      if (count > 0) {\n        var tempCount = 0,\n            i = 0;\n\n        while (true) {\n          i++;\n          var tempStart = localeMoment(eventItem.start).add(i, 'days');\n          var dayOfWeek = tempStart.weekday();\n\n          if (dayOfWeek !== 0 && dayOfWeek !== 6) {\n            tempCount++;\n\n            if (tempCount === count) {\n              newStart = tempStart.format(_index.DATETIME_FORMAT);\n              break;\n            }\n          }\n        }\n      } else {\n        var _tempCount = 0,\n            _i = 0;\n\n        while (true) {\n          _i--;\n\n          var _tempStart = localeMoment(eventItem.start).add(_i, 'days');\n\n          var _dayOfWeek = _tempStart.weekday();\n\n          if (_dayOfWeek !== 0 && _dayOfWeek !== 6) {\n            _tempCount--;\n\n            if (_tempCount === count) {\n              newStart = _tempStart.format(_index.DATETIME_FORMAT);\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    var hasConflict = false;\n\n    var slotId = schedulerData._getEventSlotId(eventItem);\n\n    var slotName = undefined;\n    var slot = schedulerData.getSlotById(slotId);\n    if (!!slot) slotName = slot.name;\n\n    if (config.checkConflict) {\n      var start = localeMoment(newStart),\n          end = localeMoment(eventItem.end);\n      events.forEach(function (e) {\n        if (schedulerData._getEventSlotId(e) === slotId && e.id !== eventItem.id) {\n          var eStart = localeMoment(e.start),\n              eEnd = localeMoment(e.end);\n          if (start >= eStart && start < eEnd || end > eStart && end <= eEnd || eStart >= start && eStart < end || eEnd > start && eEnd <= end) hasConflict = true;\n        }\n      });\n    }\n\n    if (hasConflict) {\n      _this3.setState({\n        left: left,\n        top: top,\n        width: width\n      });\n\n      if (conflictOccurred != undefined) {\n        conflictOccurred(schedulerData, 'StartResize', eventItem, _DnDTypes.DnDTypes.EVENT, slotId, slotName, newStart, eventItem.end);\n      } else {\n        console.log('Conflict occurred, set conflictOccurred func in Scheduler to handle it');\n      }\n\n      _this3.subscribeResizeEvent(_this3.props);\n    } else {\n      if (updateEventStart != undefined) updateEventStart(schedulerData, eventItem, newStart);\n    }\n  };\n\n  this.cancelStartDrag = function (ev) {\n    ev.stopPropagation();\n\n    _this3.startResizer.removeEventListener('touchmove', _this3.doStartDrag, false);\n\n    _this3.startResizer.removeEventListener('touchend', _this3.stopStartDrag, false);\n\n    _this3.startResizer.removeEventListener('touchcancel', _this3.cancelStartDrag, false);\n\n    document.onselectstart = null;\n    document.ondragstart = null;\n    var _props5 = _this3.props,\n        schedulerData = _props5.schedulerData,\n        left = _props5.left,\n        top = _props5.top,\n        width = _props5.width;\n\n    schedulerData._stopResizing();\n\n    _this3.setState({\n      left: left,\n      top: top,\n      width: width\n    });\n  };\n\n  this.initEndDrag = function (ev) {\n    var _props6 = _this3.props,\n        schedulerData = _props6.schedulerData,\n        eventItem = _props6.eventItem;\n\n    var slotId = schedulerData._getEventSlotId(eventItem);\n\n    var slot = schedulerData.getSlotById(slotId);\n    if (!!slot && !!slot.groupOnly) return;\n    if (schedulerData._isResizing()) return;\n    ev.stopPropagation();\n    var clientX = 0;\n\n    if (supportTouch) {\n      if (ev.changedTouches.length == 0) return;\n      var touch = ev.changedTouches[0];\n      clientX = touch.pageX;\n    } else {\n      if (ev.buttons !== undefined && ev.buttons !== 1) return;\n      clientX = ev.clientX;\n    }\n\n    _this3.setState({\n      endX: clientX\n    });\n\n    schedulerData._startResizing();\n\n    if (supportTouch) {\n      _this3.endResizer.addEventListener('touchmove', _this3.doEndDrag, false);\n\n      _this3.endResizer.addEventListener('touchend', _this3.stopEndDrag, false);\n\n      _this3.endResizer.addEventListener('touchcancel', _this3.cancelEndDrag, false);\n    } else {\n      document.documentElement.addEventListener('mousemove', _this3.doEndDrag, false);\n      document.documentElement.addEventListener('mouseup', _this3.stopEndDrag, false);\n    }\n\n    document.onselectstart = function () {\n      return false;\n    };\n\n    document.ondragstart = function () {\n      return false;\n    };\n  };\n\n  this.doEndDrag = function (ev) {\n    ev.stopPropagation();\n    var clientX = 0;\n\n    if (supportTouch) {\n      if (ev.changedTouches.length == 0) return;\n      var touch = ev.changedTouches[0];\n      clientX = touch.pageX;\n    } else {\n      clientX = ev.clientX;\n    }\n\n    var _props7 = _this3.props,\n        width = _props7.width,\n        leftIndex = _props7.leftIndex,\n        schedulerData = _props7.schedulerData;\n    var headers = schedulerData.headers;\n    var cellWidth = schedulerData.getContentCellWidth();\n    var offset = leftIndex > 0 ? 5 : 6;\n    var minWidth = cellWidth - offset;\n    var maxWidth = (headers.length - leftIndex) * cellWidth - offset;\n    var endX = _this3.state.endX;\n    var newWidth = width + clientX - endX;\n    if (newWidth < minWidth) newWidth = minWidth;else if (newWidth > maxWidth) newWidth = maxWidth;\n\n    _this3.setState({\n      width: newWidth\n    });\n  };\n\n  this.stopEndDrag = function (ev) {\n    ev.stopPropagation();\n\n    if (supportTouch) {\n      _this3.endResizer.removeEventListener('touchmove', _this3.doEndDrag, false);\n\n      _this3.endResizer.removeEventListener('touchend', _this3.stopEndDrag, false);\n\n      _this3.endResizer.removeEventListener('touchcancel', _this3.cancelEndDrag, false);\n    } else {\n      document.documentElement.removeEventListener('mousemove', _this3.doEndDrag, false);\n      document.documentElement.removeEventListener('mouseup', _this3.stopEndDrag, false);\n    }\n\n    document.onselectstart = null;\n    document.ondragstart = null;\n    var _props8 = _this3.props,\n        width = _props8.width,\n        left = _props8.left,\n        top = _props8.top,\n        leftIndex = _props8.leftIndex,\n        rightIndex = _props8.rightIndex,\n        schedulerData = _props8.schedulerData,\n        eventItem = _props8.eventItem,\n        updateEventEnd = _props8.updateEventEnd,\n        conflictOccurred = _props8.conflictOccurred;\n\n    schedulerData._stopResizing();\n\n    if (_this3.state.width === width) return;\n    var clientX = 0;\n\n    if (supportTouch) {\n      if (ev.changedTouches.length == 0) {\n        _this3.setState({\n          left: left,\n          top: top,\n          width: width\n        });\n\n        return;\n      }\n\n      var touch = ev.changedTouches[0];\n      clientX = touch.pageX;\n    } else {\n      clientX = ev.clientX;\n    }\n\n    var headers = schedulerData.headers,\n        cellUnit = schedulerData.cellUnit,\n        events = schedulerData.events,\n        config = schedulerData.config,\n        localeMoment = schedulerData.localeMoment;\n    var cellWidth = schedulerData.getContentCellWidth();\n    var offset = leftIndex > 0 ? 5 : 6;\n    var minWidth = cellWidth - offset;\n    var maxWidth = (headers.length - leftIndex) * cellWidth - offset;\n    var endX = _this3.state.endX;\n    var newWidth = width + clientX - endX;\n    var deltaX = newWidth - width;\n    var sign = deltaX < 0 ? -1 : deltaX === 0 ? 0 : 1;\n    var count = (sign < 0 ? Math.floor(Math.abs(deltaX) / cellWidth) : Math.ceil(Math.abs(deltaX) / cellWidth)) * sign;\n    if (newWidth < minWidth) count = leftIndex - rightIndex + 1;else if (newWidth > maxWidth) count = headers.length - rightIndex;\n    var newEnd = localeMoment(eventItem.end).add(cellUnit === _index.CellUnits.Hour ? count * config.minuteStep : count, cellUnit === _index.CellUnits.Hour ? 'minutes' : 'days').format(_index.DATETIME_FORMAT);\n\n    if (count !== 0 && cellUnit !== _index.CellUnits.Hour && config.displayWeekend === false) {\n      if (count > 0) {\n        var tempCount = 0,\n            i = 0;\n\n        while (true) {\n          i++;\n          var tempEnd = localeMoment(eventItem.end).add(i, 'days');\n          var dayOfWeek = tempEnd.weekday();\n\n          if (dayOfWeek !== 0 && dayOfWeek !== 6) {\n            tempCount++;\n\n            if (tempCount === count) {\n              newEnd = tempEnd.format(_index.DATETIME_FORMAT);\n              break;\n            }\n          }\n        }\n      } else {\n        var _tempCount2 = 0,\n            _i2 = 0;\n\n        while (true) {\n          _i2--;\n\n          var _tempEnd = localeMoment(eventItem.end).add(_i2, 'days');\n\n          var _dayOfWeek2 = _tempEnd.weekday();\n\n          if (_dayOfWeek2 !== 0 && _dayOfWeek2 !== 6) {\n            _tempCount2--;\n\n            if (_tempCount2 === count) {\n              newEnd = _tempEnd.format(_index.DATETIME_FORMAT);\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    var hasConflict = false;\n\n    var slotId = schedulerData._getEventSlotId(eventItem);\n\n    var slotName = undefined;\n    var slot = schedulerData.getSlotById(slotId);\n    if (!!slot) slotName = slot.name;\n\n    if (config.checkConflict) {\n      var start = localeMoment(eventItem.start),\n          end = localeMoment(newEnd);\n      events.forEach(function (e) {\n        if (schedulerData._getEventSlotId(e) === slotId && e.id !== eventItem.id) {\n          var eStart = localeMoment(e.start),\n              eEnd = localeMoment(e.end);\n          if (start >= eStart && start < eEnd || end > eStart && end <= eEnd || eStart >= start && eStart < end || eEnd > start && eEnd <= end) hasConflict = true;\n        }\n      });\n    }\n\n    if (hasConflict) {\n      _this3.setState({\n        left: left,\n        top: top,\n        width: width\n      });\n\n      if (conflictOccurred != undefined) {\n        conflictOccurred(schedulerData, 'EndResize', eventItem, _DnDTypes.DnDTypes.EVENT, slotId, slotName, eventItem.start, newEnd);\n      } else {\n        console.log('Conflict occurred, set conflictOccurred func in Scheduler to handle it');\n      }\n\n      _this3.subscribeResizeEvent(_this3.props);\n    } else {\n      if (updateEventEnd != undefined) updateEventEnd(schedulerData, eventItem, newEnd);\n    }\n  };\n\n  this.cancelEndDrag = function (ev) {\n    ev.stopPropagation();\n\n    _this3.endResizer.removeEventListener('touchmove', _this3.doEndDrag, false);\n\n    _this3.endResizer.removeEventListener('touchend', _this3.stopEndDrag, false);\n\n    _this3.endResizer.removeEventListener('touchcancel', _this3.cancelEndDrag, false);\n\n    document.onselectstart = null;\n    document.ondragstart = null;\n    var _props9 = _this3.props,\n        schedulerData = _props9.schedulerData,\n        left = _props9.left,\n        top = _props9.top,\n        width = _props9.width;\n\n    schedulerData._stopResizing();\n\n    _this3.setState({\n      left: left,\n      top: top,\n      width: width\n    });\n  };\n\n  this.startResizable = function (props) {\n    var eventItem = props.eventItem,\n        isInPopover = props.isInPopover,\n        schedulerData = props.schedulerData;\n    var config = schedulerData.config;\n    return config.startResizable === true && isInPopover === false && (eventItem.resizable == undefined || eventItem.resizable !== false) && (eventItem.startResizable == undefined || eventItem.startResizable !== false);\n  };\n\n  this.endResizable = function (props) {\n    var eventItem = props.eventItem,\n        isInPopover = props.isInPopover,\n        schedulerData = props.schedulerData;\n    var config = schedulerData.config;\n    return config.endResizable === true && isInPopover === false && (eventItem.resizable == undefined || eventItem.resizable !== false) && (eventItem.endResizable == undefined || eventItem.endResizable !== false);\n  };\n\n  this.subscribeResizeEvent = function (props) {\n    if (_this3.startResizer != undefined) {\n      if (supportTouch) {// this.startResizer.removeEventListener('touchstart', this.initStartDrag, false);\n        // if (this.startResizable(props))\n        //     this.startResizer.addEventListener('touchstart', this.initStartDrag, false);\n      } else {\n        _this3.startResizer.removeEventListener('mousedown', _this3.initStartDrag, false);\n\n        if (_this3.startResizable(props)) _this3.startResizer.addEventListener('mousedown', _this3.initStartDrag, false);\n      }\n    }\n\n    if (_this3.endResizer != undefined) {\n      if (supportTouch) {// this.endResizer.removeEventListener('touchstart', this.initEndDrag, false);\n        // if (this.endResizable(props))\n        //     this.endResizer.addEventListener('touchstart', this.initEndDrag, false);\n      } else {\n        _this3.endResizer.removeEventListener('mousedown', _this3.initEndDrag, false);\n\n        if (_this3.endResizable(props)) _this3.endResizer.addEventListener('mousedown', _this3.initEndDrag, false);\n      }\n    }\n  };\n}, _temp);\nexports.default = EventItem;","map":{"version":3,"sources":["/home/danielmelchor/Documents/CodeProjects/nexus/frontend/node_modules/react-big-scheduler/lib/EventItem.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_class","_temp","_initialiseProps","_react","require","_react2","_interopRequireDefault","_propTypes","_popover","_popover2","_EventItemPopover","_EventItemPopover2","_index","_DnDTypes","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","supportTouch","window","EventItem","_Component","_this","getPrototypeOf","left","top","width","state","startResizer","endResizer","componentWillReceiveProps","np","setState","subscribeResizeEvent","componentDidMount","render","_this2","_props","eventItem","isStart","isEnd","isInPopover","eventItemClick","schedulerData","isDragging","connectDragSource","connectDragPreview","eventItemTemplateResolver","config","localeMoment","_state","roundCls","bgColor","defaultEventBgColor","titleText","behaviors","getEventTextFunc","content","createElement","title","startTime","start","endTime","end","statusColor","eventTitle","format","startResizeDiv","startResizable","className","ref","_ref","endResizeDiv","endResizable","_ref2","eventItemTemplate","id","style","height","eventItemHeight","backgroundColor","marginLeft","lineHeight","undefined","a","onClick","_isResizing","eventItemPopoverEnabled","showPopover","placement","trigger","Component","propTypes","PropTypes","object","isRequired","bool","number","leftIndex","rightIndex","func","updateEventStart","updateEventEnd","moveEvent","subtitleGetter","viewEventClick","viewEventText","string","viewEvent2Click","viewEvent2Text","conflictOccurred","_this3","initStartDrag","ev","_props2","slotId","_getEventSlotId","slot","getSlotById","groupOnly","stopPropagation","clientX","changedTouches","touch","pageX","buttons","startX","_startResizing","addEventListener","doStartDrag","stopStartDrag","cancelStartDrag","document","documentElement","onselectstart","ondragstart","_props3","cellWidth","getContentCellWidth","offset","minWidth","maxWidth","newLeft","newWidth","removeEventListener","_props4","_stopResizing","cellUnit","events","deltaX","sign","count","Math","floor","abs","ceil","newStart","add","CellUnits","Hour","minuteStep","DATETIME_FORMAT","displayWeekend","tempCount","tempStart","dayOfWeek","weekday","_tempCount","_i","_tempStart","_dayOfWeek","hasConflict","slotName","name","checkConflict","forEach","e","eStart","eEnd","DnDTypes","EVENT","console","log","_props5","initEndDrag","_props6","endX","doEndDrag","stopEndDrag","cancelEndDrag","_props7","headers","_props8","newEnd","tempEnd","_tempCount2","_i2","_tempEnd","_dayOfWeek2","_props9","resizable"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _class, _temp, _initialiseProps;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _popover = require('antd/lib/popover');\n\nvar _popover2 = _interopRequireDefault(_popover);\n\nrequire('antd/lib/popover/style/index.css');\n\nvar _EventItemPopover = require('./EventItemPopover');\n\nvar _EventItemPopover2 = _interopRequireDefault(_EventItemPopover);\n\nvar _index = require('./index');\n\nvar _DnDTypes = require('./DnDTypes');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar supportTouch = 'ontouchstart' in window;\n\nvar EventItem = (_temp = _class = function (_Component) {\n    _inherits(EventItem, _Component);\n\n    function EventItem(props) {\n        _classCallCheck(this, EventItem);\n\n        var _this = _possibleConstructorReturn(this, (EventItem.__proto__ || Object.getPrototypeOf(EventItem)).call(this, props));\n\n        _initialiseProps.call(_this);\n\n        var left = props.left,\n            top = props.top,\n            width = props.width;\n\n        _this.state = {\n            left: left,\n            top: top,\n            width: width\n        };\n        _this.startResizer = null;\n        _this.endResizer = null;\n        return _this;\n    }\n\n    _createClass(EventItem, [{\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(np) {\n            var left = np.left,\n                top = np.top,\n                width = np.width;\n\n            this.setState({\n                left: left,\n                top: top,\n                width: width\n            });\n\n            this.subscribeResizeEvent(np);\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.subscribeResizeEvent(this.props);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var _props = this.props,\n                eventItem = _props.eventItem,\n                isStart = _props.isStart,\n                isEnd = _props.isEnd,\n                isInPopover = _props.isInPopover,\n                eventItemClick = _props.eventItemClick,\n                schedulerData = _props.schedulerData,\n                isDragging = _props.isDragging,\n                connectDragSource = _props.connectDragSource,\n                connectDragPreview = _props.connectDragPreview,\n                eventItemTemplateResolver = _props.eventItemTemplateResolver;\n            var config = schedulerData.config,\n                localeMoment = schedulerData.localeMoment;\n            var _state = this.state,\n                left = _state.left,\n                width = _state.width,\n                top = _state.top;\n\n            var roundCls = isStart ? isEnd ? 'round-all' : 'round-head' : isEnd ? 'round-tail' : 'round-none';\n            var bgColor = config.defaultEventBgColor;\n            if (!!eventItem.bgColor) bgColor = eventItem.bgColor;\n\n            var titleText = schedulerData.behaviors.getEventTextFunc(schedulerData, eventItem);\n            var content = _react2.default.createElement(_EventItemPopover2.default, _extends({}, this.props, {\n                eventItem: eventItem,\n                title: eventItem.title,\n                startTime: eventItem.start,\n                endTime: eventItem.end,\n                statusColor: bgColor }));\n\n            var start = localeMoment(eventItem.start);\n            var eventTitle = isInPopover ? start.format('HH:mm') + ' ' + titleText : titleText;\n            var startResizeDiv = _react2.default.createElement('div', null);\n            if (this.startResizable(this.props)) startResizeDiv = _react2.default.createElement('div', { className: 'event-resizer event-start-resizer', ref: function ref(_ref) {\n                    return _this2.startResizer = _ref;\n                } });\n            var endResizeDiv = _react2.default.createElement('div', null);\n            if (this.endResizable(this.props)) endResizeDiv = _react2.default.createElement('div', { className: 'event-resizer event-end-resizer', ref: function ref(_ref2) {\n                    return _this2.endResizer = _ref2;\n                } });\n\n            var eventItemTemplate = _react2.default.createElement(\n                'div',\n                { className: roundCls + ' event-item', key: eventItem.id,\n                    style: { height: config.eventItemHeight, backgroundColor: bgColor } },\n                _react2.default.createElement(\n                    'span',\n                    { style: { marginLeft: '10px', lineHeight: config.eventItemHeight + 'px' } },\n                    eventTitle\n                )\n            );\n            if (eventItemTemplateResolver != undefined) eventItemTemplate = eventItemTemplateResolver(schedulerData, eventItem, bgColor, isStart, isEnd, 'event-item', config.eventItemHeight, undefined);\n\n            var a = _react2.default.createElement(\n                'a',\n                { className: 'timeline-event', style: { left: left, width: width, top: top }, onClick: function onClick() {\n                        if (!!eventItemClick) eventItemClick(schedulerData, eventItem);\n                    } },\n                eventItemTemplate,\n                startResizeDiv,\n                endResizeDiv\n            );\n\n            return isDragging ? null : schedulerData._isResizing() || config.eventItemPopoverEnabled == false || eventItem.showPopover == false ? _react2.default.createElement(\n                'div',\n                null,\n                connectDragPreview(connectDragSource(a))\n            ) : _react2.default.createElement(\n                _popover2.default,\n                { placement: 'bottomLeft', content: content, trigger: 'hover' },\n                connectDragPreview(connectDragSource(a))\n            );\n        }\n    }]);\n\n    return EventItem;\n}(_react.Component), _class.propTypes = {\n    schedulerData: _propTypes.PropTypes.object.isRequired,\n    eventItem: _propTypes.PropTypes.object.isRequired,\n    isStart: _propTypes.PropTypes.bool.isRequired,\n    isEnd: _propTypes.PropTypes.bool.isRequired,\n    left: _propTypes.PropTypes.number.isRequired,\n    width: _propTypes.PropTypes.number.isRequired,\n    top: _propTypes.PropTypes.number.isRequired,\n    isInPopover: _propTypes.PropTypes.bool.isRequired,\n    leftIndex: _propTypes.PropTypes.number.isRequired,\n    rightIndex: _propTypes.PropTypes.number.isRequired,\n    isDragging: _propTypes.PropTypes.bool.isRequired,\n    connectDragSource: _propTypes.PropTypes.func.isRequired,\n    connectDragPreview: _propTypes.PropTypes.func.isRequired,\n    updateEventStart: _propTypes.PropTypes.func,\n    updateEventEnd: _propTypes.PropTypes.func,\n    moveEvent: _propTypes.PropTypes.func,\n    subtitleGetter: _propTypes.PropTypes.func,\n    eventItemClick: _propTypes.PropTypes.func,\n    viewEventClick: _propTypes.PropTypes.func,\n    viewEventText: _propTypes.PropTypes.string,\n    viewEvent2Click: _propTypes.PropTypes.func,\n    viewEvent2Text: _propTypes.PropTypes.string,\n    conflictOccurred: _propTypes.PropTypes.func,\n    eventItemTemplateResolver: _propTypes.PropTypes.func\n}, _initialiseProps = function _initialiseProps() {\n    var _this3 = this;\n\n    this.initStartDrag = function (ev) {\n        var _props2 = _this3.props,\n            schedulerData = _props2.schedulerData,\n            eventItem = _props2.eventItem;\n\n        var slotId = schedulerData._getEventSlotId(eventItem);\n        var slot = schedulerData.getSlotById(slotId);\n        if (!!slot && !!slot.groupOnly) return;\n        if (schedulerData._isResizing()) return;\n\n        ev.stopPropagation();\n        var clientX = 0;\n        if (supportTouch) {\n            if (ev.changedTouches.length == 0) return;\n            var touch = ev.changedTouches[0];\n            clientX = touch.pageX;\n        } else {\n            if (ev.buttons !== undefined && ev.buttons !== 1) return;\n            clientX = ev.clientX;\n        }\n        _this3.setState({\n            startX: clientX\n        });\n        schedulerData._startResizing();\n        if (supportTouch) {\n            _this3.startResizer.addEventListener('touchmove', _this3.doStartDrag, false);\n            _this3.startResizer.addEventListener('touchend', _this3.stopStartDrag, false);\n            _this3.startResizer.addEventListener('touchcancel', _this3.cancelStartDrag, false);\n        } else {\n            document.documentElement.addEventListener('mousemove', _this3.doStartDrag, false);\n            document.documentElement.addEventListener('mouseup', _this3.stopStartDrag, false);\n        }\n        document.onselectstart = function () {\n            return false;\n        };\n        document.ondragstart = function () {\n            return false;\n        };\n    };\n\n    this.doStartDrag = function (ev) {\n        ev.stopPropagation();\n\n        var clientX = 0;\n        if (supportTouch) {\n            if (ev.changedTouches.length == 0) return;\n            var touch = ev.changedTouches[0];\n            clientX = touch.pageX;\n        } else {\n            clientX = ev.clientX;\n        }\n        var _props3 = _this3.props,\n            left = _props3.left,\n            width = _props3.width,\n            leftIndex = _props3.leftIndex,\n            rightIndex = _props3.rightIndex,\n            schedulerData = _props3.schedulerData;\n\n        var cellWidth = schedulerData.getContentCellWidth();\n        var offset = leftIndex > 0 ? 5 : 6;\n        var minWidth = cellWidth - offset;\n        var maxWidth = rightIndex * cellWidth - offset;\n        var startX = _this3.state.startX;\n\n        var newLeft = left + clientX - startX;\n        var newWidth = width + startX - clientX;\n        if (newWidth < minWidth) {\n            newWidth = minWidth;\n            newLeft = (rightIndex - 1) * cellWidth + (rightIndex - 1 > 0 ? 2 : 3);\n        } else if (newWidth > maxWidth) {\n            newWidth = maxWidth;\n            newLeft = 3;\n        }\n\n        _this3.setState({ left: newLeft, width: newWidth });\n    };\n\n    this.stopStartDrag = function (ev) {\n        ev.stopPropagation();\n        if (supportTouch) {\n            _this3.startResizer.removeEventListener('touchmove', _this3.doStartDrag, false);\n            _this3.startResizer.removeEventListener('touchend', _this3.stopStartDrag, false);\n            _this3.startResizer.removeEventListener('touchcancel', _this3.cancelStartDrag, false);\n        } else {\n            document.documentElement.removeEventListener('mousemove', _this3.doStartDrag, false);\n            document.documentElement.removeEventListener('mouseup', _this3.stopStartDrag, false);\n        }\n        document.onselectstart = null;\n        document.ondragstart = null;\n        var _props4 = _this3.props,\n            width = _props4.width,\n            left = _props4.left,\n            top = _props4.top,\n            leftIndex = _props4.leftIndex,\n            rightIndex = _props4.rightIndex,\n            schedulerData = _props4.schedulerData,\n            eventItem = _props4.eventItem,\n            updateEventStart = _props4.updateEventStart,\n            conflictOccurred = _props4.conflictOccurred;\n\n        schedulerData._stopResizing();\n        if (_this3.state.width === width) return;\n\n        var clientX = 0;\n        if (supportTouch) {\n            if (ev.changedTouches.length == 0) {\n                _this3.setState({\n                    left: left,\n                    top: top,\n                    width: width\n                });\n                return;\n            }\n            var touch = ev.changedTouches[0];\n            clientX = touch.pageX;\n        } else {\n            clientX = ev.clientX;\n        }\n        var cellUnit = schedulerData.cellUnit,\n            events = schedulerData.events,\n            config = schedulerData.config,\n            localeMoment = schedulerData.localeMoment;\n\n        var cellWidth = schedulerData.getContentCellWidth();\n        var offset = leftIndex > 0 ? 5 : 6;\n        var minWidth = cellWidth - offset;\n        var maxWidth = rightIndex * cellWidth - offset;\n        var startX = _this3.state.startX;\n\n        var newWidth = width + startX - clientX;\n        var deltaX = clientX - startX;\n        var sign = deltaX < 0 ? -1 : deltaX === 0 ? 0 : 1;\n        var count = (sign > 0 ? Math.floor(Math.abs(deltaX) / cellWidth) : Math.ceil(Math.abs(deltaX) / cellWidth)) * sign;\n        if (newWidth < minWidth) count = rightIndex - leftIndex - 1;else if (newWidth > maxWidth) count = -leftIndex;\n        var newStart = localeMoment(eventItem.start).add(cellUnit === _index.CellUnits.Hour ? count * config.minuteStep : count, cellUnit === _index.CellUnits.Hour ? 'minutes' : 'days').format(_index.DATETIME_FORMAT);\n        if (count !== 0 && cellUnit !== _index.CellUnits.Hour && config.displayWeekend === false) {\n            if (count > 0) {\n                var tempCount = 0,\n                    i = 0;\n                while (true) {\n                    i++;\n                    var tempStart = localeMoment(eventItem.start).add(i, 'days');\n                    var dayOfWeek = tempStart.weekday();\n                    if (dayOfWeek !== 0 && dayOfWeek !== 6) {\n                        tempCount++;\n                        if (tempCount === count) {\n                            newStart = tempStart.format(_index.DATETIME_FORMAT);\n                            break;\n                        }\n                    }\n                }\n            } else {\n                var _tempCount = 0,\n                    _i = 0;\n                while (true) {\n                    _i--;\n                    var _tempStart = localeMoment(eventItem.start).add(_i, 'days');\n                    var _dayOfWeek = _tempStart.weekday();\n                    if (_dayOfWeek !== 0 && _dayOfWeek !== 6) {\n                        _tempCount--;\n                        if (_tempCount === count) {\n                            newStart = _tempStart.format(_index.DATETIME_FORMAT);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n\n        var hasConflict = false;\n        var slotId = schedulerData._getEventSlotId(eventItem);\n        var slotName = undefined;\n        var slot = schedulerData.getSlotById(slotId);\n        if (!!slot) slotName = slot.name;\n        if (config.checkConflict) {\n            var start = localeMoment(newStart),\n                end = localeMoment(eventItem.end);\n\n            events.forEach(function (e) {\n                if (schedulerData._getEventSlotId(e) === slotId && e.id !== eventItem.id) {\n                    var eStart = localeMoment(e.start),\n                        eEnd = localeMoment(e.end);\n                    if (start >= eStart && start < eEnd || end > eStart && end <= eEnd || eStart >= start && eStart < end || eEnd > start && eEnd <= end) hasConflict = true;\n                }\n            });\n        }\n\n        if (hasConflict) {\n            _this3.setState({\n                left: left,\n                top: top,\n                width: width\n            });\n\n            if (conflictOccurred != undefined) {\n                conflictOccurred(schedulerData, 'StartResize', eventItem, _DnDTypes.DnDTypes.EVENT, slotId, slotName, newStart, eventItem.end);\n            } else {\n                console.log('Conflict occurred, set conflictOccurred func in Scheduler to handle it');\n            }\n            _this3.subscribeResizeEvent(_this3.props);\n        } else {\n            if (updateEventStart != undefined) updateEventStart(schedulerData, eventItem, newStart);\n        }\n    };\n\n    this.cancelStartDrag = function (ev) {\n        ev.stopPropagation();\n\n        _this3.startResizer.removeEventListener('touchmove', _this3.doStartDrag, false);\n        _this3.startResizer.removeEventListener('touchend', _this3.stopStartDrag, false);\n        _this3.startResizer.removeEventListener('touchcancel', _this3.cancelStartDrag, false);\n        document.onselectstart = null;\n        document.ondragstart = null;\n        var _props5 = _this3.props,\n            schedulerData = _props5.schedulerData,\n            left = _props5.left,\n            top = _props5.top,\n            width = _props5.width;\n\n        schedulerData._stopResizing();\n        _this3.setState({\n            left: left,\n            top: top,\n            width: width\n        });\n    };\n\n    this.initEndDrag = function (ev) {\n        var _props6 = _this3.props,\n            schedulerData = _props6.schedulerData,\n            eventItem = _props6.eventItem;\n\n        var slotId = schedulerData._getEventSlotId(eventItem);\n        var slot = schedulerData.getSlotById(slotId);\n        if (!!slot && !!slot.groupOnly) return;\n        if (schedulerData._isResizing()) return;\n\n        ev.stopPropagation();\n        var clientX = 0;\n        if (supportTouch) {\n            if (ev.changedTouches.length == 0) return;\n            var touch = ev.changedTouches[0];\n            clientX = touch.pageX;\n        } else {\n            if (ev.buttons !== undefined && ev.buttons !== 1) return;\n            clientX = ev.clientX;\n        }\n        _this3.setState({\n            endX: clientX\n        });\n\n        schedulerData._startResizing();\n        if (supportTouch) {\n            _this3.endResizer.addEventListener('touchmove', _this3.doEndDrag, false);\n            _this3.endResizer.addEventListener('touchend', _this3.stopEndDrag, false);\n            _this3.endResizer.addEventListener('touchcancel', _this3.cancelEndDrag, false);\n        } else {\n            document.documentElement.addEventListener('mousemove', _this3.doEndDrag, false);\n            document.documentElement.addEventListener('mouseup', _this3.stopEndDrag, false);\n        }\n        document.onselectstart = function () {\n            return false;\n        };\n        document.ondragstart = function () {\n            return false;\n        };\n    };\n\n    this.doEndDrag = function (ev) {\n        ev.stopPropagation();\n        var clientX = 0;\n        if (supportTouch) {\n            if (ev.changedTouches.length == 0) return;\n            var touch = ev.changedTouches[0];\n            clientX = touch.pageX;\n        } else {\n            clientX = ev.clientX;\n        }\n        var _props7 = _this3.props,\n            width = _props7.width,\n            leftIndex = _props7.leftIndex,\n            schedulerData = _props7.schedulerData;\n        var headers = schedulerData.headers;\n\n        var cellWidth = schedulerData.getContentCellWidth();\n        var offset = leftIndex > 0 ? 5 : 6;\n        var minWidth = cellWidth - offset;\n        var maxWidth = (headers.length - leftIndex) * cellWidth - offset;\n        var endX = _this3.state.endX;\n\n\n        var newWidth = width + clientX - endX;\n        if (newWidth < minWidth) newWidth = minWidth;else if (newWidth > maxWidth) newWidth = maxWidth;\n\n        _this3.setState({ width: newWidth });\n    };\n\n    this.stopEndDrag = function (ev) {\n        ev.stopPropagation();\n\n        if (supportTouch) {\n            _this3.endResizer.removeEventListener('touchmove', _this3.doEndDrag, false);\n            _this3.endResizer.removeEventListener('touchend', _this3.stopEndDrag, false);\n            _this3.endResizer.removeEventListener('touchcancel', _this3.cancelEndDrag, false);\n        } else {\n            document.documentElement.removeEventListener('mousemove', _this3.doEndDrag, false);\n            document.documentElement.removeEventListener('mouseup', _this3.stopEndDrag, false);\n        }\n        document.onselectstart = null;\n        document.ondragstart = null;\n        var _props8 = _this3.props,\n            width = _props8.width,\n            left = _props8.left,\n            top = _props8.top,\n            leftIndex = _props8.leftIndex,\n            rightIndex = _props8.rightIndex,\n            schedulerData = _props8.schedulerData,\n            eventItem = _props8.eventItem,\n            updateEventEnd = _props8.updateEventEnd,\n            conflictOccurred = _props8.conflictOccurred;\n\n        schedulerData._stopResizing();\n        if (_this3.state.width === width) return;\n\n        var clientX = 0;\n        if (supportTouch) {\n            if (ev.changedTouches.length == 0) {\n                _this3.setState({\n                    left: left,\n                    top: top,\n                    width: width\n                });\n                return;\n            }\n            var touch = ev.changedTouches[0];\n            clientX = touch.pageX;\n        } else {\n            clientX = ev.clientX;\n        }\n        var headers = schedulerData.headers,\n            cellUnit = schedulerData.cellUnit,\n            events = schedulerData.events,\n            config = schedulerData.config,\n            localeMoment = schedulerData.localeMoment;\n\n        var cellWidth = schedulerData.getContentCellWidth();\n        var offset = leftIndex > 0 ? 5 : 6;\n        var minWidth = cellWidth - offset;\n        var maxWidth = (headers.length - leftIndex) * cellWidth - offset;\n        var endX = _this3.state.endX;\n\n\n        var newWidth = width + clientX - endX;\n        var deltaX = newWidth - width;\n        var sign = deltaX < 0 ? -1 : deltaX === 0 ? 0 : 1;\n        var count = (sign < 0 ? Math.floor(Math.abs(deltaX) / cellWidth) : Math.ceil(Math.abs(deltaX) / cellWidth)) * sign;\n        if (newWidth < minWidth) count = leftIndex - rightIndex + 1;else if (newWidth > maxWidth) count = headers.length - rightIndex;\n        var newEnd = localeMoment(eventItem.end).add(cellUnit === _index.CellUnits.Hour ? count * config.minuteStep : count, cellUnit === _index.CellUnits.Hour ? 'minutes' : 'days').format(_index.DATETIME_FORMAT);\n        if (count !== 0 && cellUnit !== _index.CellUnits.Hour && config.displayWeekend === false) {\n            if (count > 0) {\n                var tempCount = 0,\n                    i = 0;\n                while (true) {\n                    i++;\n                    var tempEnd = localeMoment(eventItem.end).add(i, 'days');\n                    var dayOfWeek = tempEnd.weekday();\n                    if (dayOfWeek !== 0 && dayOfWeek !== 6) {\n                        tempCount++;\n                        if (tempCount === count) {\n                            newEnd = tempEnd.format(_index.DATETIME_FORMAT);\n                            break;\n                        }\n                    }\n                }\n            } else {\n                var _tempCount2 = 0,\n                    _i2 = 0;\n                while (true) {\n                    _i2--;\n                    var _tempEnd = localeMoment(eventItem.end).add(_i2, 'days');\n                    var _dayOfWeek2 = _tempEnd.weekday();\n                    if (_dayOfWeek2 !== 0 && _dayOfWeek2 !== 6) {\n                        _tempCount2--;\n                        if (_tempCount2 === count) {\n                            newEnd = _tempEnd.format(_index.DATETIME_FORMAT);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n\n        var hasConflict = false;\n        var slotId = schedulerData._getEventSlotId(eventItem);\n        var slotName = undefined;\n        var slot = schedulerData.getSlotById(slotId);\n        if (!!slot) slotName = slot.name;\n        if (config.checkConflict) {\n            var start = localeMoment(eventItem.start),\n                end = localeMoment(newEnd);\n\n            events.forEach(function (e) {\n                if (schedulerData._getEventSlotId(e) === slotId && e.id !== eventItem.id) {\n                    var eStart = localeMoment(e.start),\n                        eEnd = localeMoment(e.end);\n                    if (start >= eStart && start < eEnd || end > eStart && end <= eEnd || eStart >= start && eStart < end || eEnd > start && eEnd <= end) hasConflict = true;\n                }\n            });\n        }\n\n        if (hasConflict) {\n            _this3.setState({\n                left: left,\n                top: top,\n                width: width\n            });\n\n            if (conflictOccurred != undefined) {\n                conflictOccurred(schedulerData, 'EndResize', eventItem, _DnDTypes.DnDTypes.EVENT, slotId, slotName, eventItem.start, newEnd);\n            } else {\n                console.log('Conflict occurred, set conflictOccurred func in Scheduler to handle it');\n            }\n            _this3.subscribeResizeEvent(_this3.props);\n        } else {\n            if (updateEventEnd != undefined) updateEventEnd(schedulerData, eventItem, newEnd);\n        }\n    };\n\n    this.cancelEndDrag = function (ev) {\n        ev.stopPropagation();\n\n        _this3.endResizer.removeEventListener('touchmove', _this3.doEndDrag, false);\n        _this3.endResizer.removeEventListener('touchend', _this3.stopEndDrag, false);\n        _this3.endResizer.removeEventListener('touchcancel', _this3.cancelEndDrag, false);\n        document.onselectstart = null;\n        document.ondragstart = null;\n        var _props9 = _this3.props,\n            schedulerData = _props9.schedulerData,\n            left = _props9.left,\n            top = _props9.top,\n            width = _props9.width;\n\n        schedulerData._stopResizing();\n        _this3.setState({\n            left: left,\n            top: top,\n            width: width\n        });\n    };\n\n    this.startResizable = function (props) {\n        var eventItem = props.eventItem,\n            isInPopover = props.isInPopover,\n            schedulerData = props.schedulerData;\n        var config = schedulerData.config;\n\n        return config.startResizable === true && isInPopover === false && (eventItem.resizable == undefined || eventItem.resizable !== false) && (eventItem.startResizable == undefined || eventItem.startResizable !== false);\n    };\n\n    this.endResizable = function (props) {\n        var eventItem = props.eventItem,\n            isInPopover = props.isInPopover,\n            schedulerData = props.schedulerData;\n        var config = schedulerData.config;\n\n        return config.endResizable === true && isInPopover === false && (eventItem.resizable == undefined || eventItem.resizable !== false) && (eventItem.endResizable == undefined || eventItem.endResizable !== false);\n    };\n\n    this.subscribeResizeEvent = function (props) {\n        if (_this3.startResizer != undefined) {\n            if (supportTouch) {\n                // this.startResizer.removeEventListener('touchstart', this.initStartDrag, false);\n                // if (this.startResizable(props))\n                //     this.startResizer.addEventListener('touchstart', this.initStartDrag, false);\n            } else {\n                _this3.startResizer.removeEventListener('mousedown', _this3.initStartDrag, false);\n                if (_this3.startResizable(props)) _this3.startResizer.addEventListener('mousedown', _this3.initStartDrag, false);\n            }\n        }\n        if (_this3.endResizer != undefined) {\n            if (supportTouch) {\n                // this.endResizer.removeEventListener('touchstart', this.initEndDrag, false);\n                // if (this.endResizable(props))\n                //     this.endResizer.addEventListener('touchstart', this.initEndDrag, false);\n            } else {\n                _this3.endResizer.removeEventListener('mousedown', _this3.initEndDrag, false);\n                if (_this3.endResizable(props)) _this3.endResizer.addEventListener('mousedown', _this3.initEndDrag, false);\n            }\n        }\n    };\n}, _temp);\nexports.default = EventItem;"]},"metadata":{},"sourceType":"script"}