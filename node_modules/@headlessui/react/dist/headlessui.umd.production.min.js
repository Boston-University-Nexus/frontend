!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],n):n((e=e||self).headlessui={},e.React)}(this,(function(e,n){"use strict";var t="default"in n?n.default:n;function r(){return(r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function o(e,n){if(null==e)return{};var t,r,o={},u=Object.keys(e);for(r=0;r<u.length;r++)n.indexOf(t=u[r])>=0||(o[t]=e[t]);return o}function u(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function i(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return u(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,void 0):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}var a,c,l,s="undefined"!=typeof window?n.useLayoutEffect:n.useEffect,f={serverHandoffComplete:!1},d=0;function v(){return++d}function p(){var e=n.useState(f.serverHandoffComplete?v:null),t=e[0],r=e[1];return s((function(){null===t&&r(v())}),[t]),n.useEffect((function(){!1===f.serverHandoffComplete&&(f.serverHandoffComplete=!0)}),[]),null!=t?""+t:void 0}function m(){var e=n.useRef(!0);return n.useEffect((function(){e.current=!1}),[]),e.current}function b(e,n){if(e in n){for(var t=n[e],r=arguments.length,o=new Array(r>2?r-2:0),u=2;u<r;u++)o[u-2]=arguments[u];return"function"==typeof t?t.apply(void 0,o):t}var i=new Error('Tried to handle "'+e+'" but there is no handler defined. Only defined handlers are: '+Object.keys(n).map((function(e){return'"'+e+'"'})).join(", ")+".");throw Error.captureStackTrace&&Error.captureStackTrace(i,b),i}function y(e,n,t,u,i){if(void 0===i&&(i=!0),i)return h(e,n,t);var l=null!=u?u:a.None;if(l&a.Static){var s=e.static,f=void 0!==s&&s,d=o(e,["static"]);if(f)return h(d,n,t)}if(l&a.RenderStrategy){var v,p=e.unmount,m=void 0===p||p,y=o(e,["unmount"]);return b(m?c.Unmount:c.Hidden,((v={})[c.Unmount]=function(){return null},v[c.Hidden]=function(){return h(r({},y,{hidden:!0,style:{display:"none"}}),n,t)},v))}return h(e,n,t)}function h(e,t,r){var u,a=S(e,["unmount","static"]),c=a.as,l=void 0===c?r:c,s=a.children,f=a.refName,d=void 0===f?"ref":f,v=o(a,["as","children","refName"]),p=void 0!==e.ref?((u={})[d]=e.ref,u):{},m="function"==typeof s?s(t):s;if(l===n.Fragment&&Object.keys(v).length>0){if(Array.isArray(m)&&m.length>1){var b=new Error("You should only render 1 child");throw Error.captureStackTrace&&Error.captureStackTrace(b,h),b}if(!n.isValidElement(m)){var y=new Error('You should render an element as a child. Did you forget the as="..." prop?');throw Error.captureStackTrace&&Error.captureStackTrace(y,h),y}return n.cloneElement(m,Object.assign({},function(e,n,t){for(var r,o=Object.assign({},e),u=function(){var t,u=r.value;void 0!==e[u]&&void 0!==n[u]&&Object.assign(o,((t={})[u]=function(t){t.defaultPrevented||e[u](t),t.defaultPrevented||n[u](t)},t))},a=i(["onClick"]);!(r=a()).done;)u();return o}(function(e){var n=Object.assign({},e);for(var t in n)void 0===n[t]&&delete n[t];return n}(S(v,["ref"])),m.props),p))}return n.createElement(l,Object.assign({},S(v,["ref"]),l!==n.Fragment&&p),m)}function x(e){return n.forwardRef(e)}function S(e,n){void 0===n&&(n=[]);for(var t,r=Object.assign({},e),o=i(n);!(t=o()).done;){var u=t.value;u in r&&delete r[u]}return r}function g(){var e=[],n={requestAnimationFrame:function(e){function n(){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(){var e=requestAnimationFrame.apply(void 0,arguments);n.add((function(){return cancelAnimationFrame(e)}))})),nextFrame:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.requestAnimationFrame((function(){n.requestAnimationFrame.apply(n,t)}))},setTimeout:function(e){function n(){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(){var e=setTimeout.apply(void 0,arguments);n.add((function(){return clearTimeout(e)}))})),add:function(n){e.push(n)},dispose:function(){for(var n,t=i(e.splice(0));!(n=t()).done;)(0,n.value)()}};return n}function I(e){for(var n,t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];e&&r.length>0&&(n=e.classList).add.apply(n,r)}function C(e){for(var n,t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];e&&r.length>0&&(n=e.classList).remove.apply(n,r)}function O(e,n,t,r,o){var u=g(),i=void 0!==o?function(e){var n={called:!1};return function(){if(!n.called)return n.called=!0,e.apply(void 0,arguments)}}(o):function(){};return I.apply(void 0,[e].concat(n,t)),u.nextFrame((function(){C.apply(void 0,[e].concat(t)),I.apply(void 0,[e].concat(r)),u.add(function(e,n){var t=g();if(!e)return t.dispose;var r=getComputedStyle(e),o=[r.transitionDuration,r.transitionDelay].map((function(e){var n=e.split(",").filter(Boolean).map((function(e){return e.includes("ms")?parseFloat(e):1e3*parseFloat(e)})).sort((function(e,n){return n-e}))[0];return void 0===n?0:n})),u=o[0];return 0!==u?t.setTimeout((function(){n(l.Finished)}),u+o[1]):n(l.Finished),t.add((function(){return n(l.Cancelled)})),t.dispose}(e,(function(t){return C.apply(void 0,[e].concat(r,n)),i(t)})))})),u.add((function(){return C.apply(void 0,[e].concat(n,t,r))})),u.add((function(){return i(l.Cancelled)})),u.dispose}function R(e){return void 0===e&&(e=""),n.useMemo((function(){return e.split(" ").filter((function(e){return e.trim().length>1}))}),[e])}!function(e){e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static"}(a||(a={})),function(e){e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden"}(c||(c={})),function(e){e.Finished="finished",e.Cancelled="cancelled"}(l||(l={}));var w,E=n.createContext(null);E.displayName="TransitionContext",function(e){e.Visible="visible",e.Hidden="hidden"}(w||(w={}));var k=n.createContext(null);function T(e){return"children"in e?T(e.children):e.current.filter((function(e){return e.state===w.Visible})).length>0}function L(e){var t=n.useRef(e),r=n.useRef([]),o=function(){var e=n.useRef(!0);return n.useEffect((function(){return function(){e.current=!1}}),[]),e}();n.useEffect((function(){t.current=e}),[e]);var u=n.useCallback((function(e,n){var u;void 0===n&&(n=c.Hidden);var i=r.current.findIndex((function(n){return n.id===e}));-1!==i&&(b(n,((u={})[c.Unmount]=function(){r.current.splice(i,1)},u[c.Hidden]=function(){r.current[i].state=w.Hidden},u)),!T(r)&&o.current&&(null==t.current||t.current()))}),[t,o,r]),i=n.useCallback((function(e){var n=r.current.find((function(n){return n.id===e}));return n?n.state!==w.Visible&&(n.state=w.Visible):r.current.push({id:e,state:w.Visible}),function(){return u(e,c.Unmount)}}),[r,u]);return n.useMemo((function(){return{children:r,register:i,unregister:u}}),[i,u,r])}function D(){}k.displayName="NestingContext";var F=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function M(e){return F.reduce((function(n,t){return n[t]=e[t]||D,n}),{})}var A,N,P,G,j,H=a.RenderStrategy;function U(e){var u=e.beforeEnter,i=e.afterEnter,a=e.beforeLeave,f=e.afterLeave,d=e.enter,v=e.enterFrom,h=e.enterTo,x=e.leave,S=e.leaveFrom,g=e.leaveTo,I=o(e,["beforeEnter","afterEnter","beforeLeave","afterLeave","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo"]),C=n.useRef(null),D=n.useState(w.Visible),F=D[0],A=D[1],N=I.unmount?c.Unmount:c.Hidden,P=function(){var e=n.useContext(E);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition />.");return e}(),G=P.show,j=P.appear,U=function(){var e=n.useContext(k);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition />.");return e}(),V=U.register,Q=U.unregister,B=m(),K=p(),_=n.useRef(!1),q=L((function(){_.current||(A(w.Hidden),Q(K),Z.current.afterLeave())}));s((function(){if(K)return V(K)}),[V,K]),s((function(){var e;N===c.Hidden&&K&&(G&&F!==w.Visible?A(w.Visible):b(F,((e={})[w.Hidden]=function(){return Q(K)},e[w.Visible]=function(){return V(K)},e)))}),[F,K,V,Q,G,N]);var W=R(d),Y=R(v),J=R(h),$=R(x),z=R(S),X=R(g),Z=function(e){var t=n.useRef(M(e));return n.useEffect((function(){t.current=M(e)}),[e]),t}({beforeEnter:u,afterEnter:i,beforeLeave:a,afterLeave:f});n.useEffect((function(){if(F===w.Visible&&null===C.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}),[C,F]);var ee=B&&!j;return s((function(){var e=C.current;if(e&&!ee)return _.current=!0,G&&Z.current.beforeEnter(),G||Z.current.beforeLeave(),G?O(e,W,Y,J,(function(e){_.current=!1,e===l.Finished&&Z.current.afterEnter()})):O(e,$,z,X,(function(e){_.current=!1,e===l.Finished&&(T(q)||(A(w.Hidden),Q(K),Z.current.afterLeave()))}))}),[Z,K,_,Q,q,C,ee,G,W,Y,J,$,z,X]),t.createElement(k.Provider,{value:q},y(r({},I,{ref:C}),{},"div",H,F===w.Visible))}function V(e){var u=e.show,i=e.appear,a=void 0!==i&&i,c=e.unmount,l=o(e,["show","appear","unmount"]);if(![!0,!1].includes(u))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");var s=n.useState(u?w.Visible:w.Hidden),f=s[0],d=s[1],v=L((function(){d(w.Hidden)})),p=m(),b=n.useMemo((function(){return{show:u,appear:a||!p}}),[u,a,p]);n.useEffect((function(){u?d(w.Visible):T(v)||d(w.Hidden)}),[u,v]);var h={unmount:c};return t.createElement(k.Provider,{value:v},t.createElement(E.Provider,{value:b},y(r({},h,{as:n.Fragment,children:t.createElement(U,Object.assign({},h,l))}),{},n.Fragment,H,f===w.Visible)))}function Q(){var e=n.useState(g)[0];return n.useEffect((function(){return function(){return e.dispose()}}),[e]),e}function B(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.useCallback((function(e){t.forEach((function(n){if(null!==n)return"function"==typeof n?n(e):void(n.current=e)}))}),[t])}function K(e,n){var t=n.resolveItems();if(t.length<=0)return null;var r=n.resolveActiveIndex(),o=null!=r?r:-1,u=function(){switch(e.focus){case N.First:return t.findIndex((function(e){return!n.resolveDisabled(e)}));case N.Previous:var r=t.slice().reverse().findIndex((function(e,t,r){return!(-1!==o&&r.length-t-1>=o||n.resolveDisabled(e))}));return-1===r?r:t.length-1-r;case N.Next:return t.findIndex((function(e,t){return!(t<=o||n.resolveDisabled(e))}));case N.Last:var u=t.slice().reverse().findIndex((function(e){return!n.resolveDisabled(e)}));return-1===u?u:t.length-1-u;case N.Specific:return t.findIndex((function(t){return n.resolveId(t)===e.id}));case N.Nothing:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}}();return-1===u?r:u}function _(e,n){if(void 0!==e)return"function"==typeof e?e(n):e}function q(e){for(var n,t,r=e.parentElement,o=null;r&&!(r instanceof HTMLFieldSetElement);)r instanceof HTMLLegendElement&&(o=r),r=r.parentElement;var u=null!=(n=""===(null==(t=r)?void 0:t.getAttribute("disabled")))&&n;return(!u||!function(e){if(!e)return!1;for(var n=e.previousElementSibling;null!==n;){if(n instanceof HTMLLegendElement)return!1;n=n.previousElementSibling}return!0}(o))&&u}V.Child=U,function(e){e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab"}(A||(A={})),function(e){e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing"}(N||(N={})),function(e){e[e.Open=0]="Open",e[e.Closed=1]="Closed"}(G||(G={})),function(e){e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem"}(j||(j={}));var W=((P={})[j.CloseMenu]=function(e){return r({},e,{activeItemIndex:null,menuState:G.Closed})},P[j.OpenMenu]=function(e){return r({},e,{menuState:G.Open})},P[j.GoToItem]=function(e,n){var t=K(n,{resolveItems:function(){return e.items},resolveActiveIndex:function(){return e.activeItemIndex},resolveId:function(e){return e.id},resolveDisabled:function(e){return e.dataRef.current.disabled}});return""===e.searchQuery&&e.activeItemIndex===t?e:r({},e,{searchQuery:"",activeItemIndex:t})},P[j.Search]=function(e,n){var t=e.searchQuery+n.value,o=e.items.findIndex((function(e){var n;return(null==(n=e.dataRef.current.textValue)?void 0:n.startsWith(t))&&!e.dataRef.current.disabled}));return r({},e,-1===o||o===e.activeItemIndex?{searchQuery:t}:{searchQuery:t,activeItemIndex:o})},P[j.ClearSearch]=function(e){return r({},e,{searchQuery:""})},P[j.RegisterItem]=function(e,n){return r({},e,{items:[].concat(e.items,[{id:n.id,dataRef:n.dataRef}])})},P[j.UnregisterItem]=function(e,n){var t=e.items.slice(),o=null!==e.activeItemIndex?t[e.activeItemIndex]:null,u=t.findIndex((function(e){return e.id===n.id}));return-1!==u&&t.splice(u,1),r({},e,{items:t,activeItemIndex:u===e.activeItemIndex||null===o?null:t.indexOf(o)})},P),Y=n.createContext(null);function J(e){var t=n.useContext(Y);if(null===t){var r=new Error("<"+e+" /> is missing a parent <"+X.name+" /> component.");throw Error.captureStackTrace&&Error.captureStackTrace(r,J),r}return t}function $(e,n){return b(n.type,W,e,n)}Y.displayName="MenuContext";var z=n.Fragment;function X(e){var r=n.useReducer($,{menuState:G.Closed,buttonRef:n.createRef(),itemsRef:n.createRef(),items:[],searchQuery:"",activeItemIndex:null}),o=r[0],u=o.menuState,i=o.itemsRef,a=o.buttonRef,c=r[1];n.useEffect((function(){function e(e){var n,t,r,o=e.target,l=document.activeElement;u===G.Open&&((null==(n=a.current)?void 0:n.contains(o))||((null==(t=i.current)?void 0:t.contains(o))||c({type:j.CloseMenu}),l!==document.body&&(null==l?void 0:l.contains(o))||e.defaultPrevented||null==(r=a.current)||r.focus({preventScroll:!0})))}return window.addEventListener("mousedown",e),function(){return window.removeEventListener("mousedown",e)}}),[u,i,a,c]);var l=n.useMemo((function(){return{open:u===G.Open}}),[u]);return t.createElement(Y.Provider,{value:r},y(e,l,z))}var Z,ee,ne,te=x((function e(t,o){var u,i=J([X.name,e.name].join(".")),a=i[0],c=i[1],l=B(a.buttonRef,o),s="headlessui-menu-button-"+p(),f=Q(),d=n.useCallback((function(e){switch(e.key){case A.Space:case A.Enter:case A.ArrowDown:e.preventDefault(),c({type:j.OpenMenu}),f.nextFrame((function(){var e;null==(e=a.itemsRef.current)||e.focus({preventScroll:!0}),c({type:j.GoToItem,focus:N.First})}));break;case A.ArrowUp:e.preventDefault(),c({type:j.OpenMenu}),f.nextFrame((function(){var e;null==(e=a.itemsRef.current)||e.focus({preventScroll:!0}),c({type:j.GoToItem,focus:N.Last})}))}}),[c,a,f]),v=n.useCallback((function(e){if(q(e.currentTarget))return e.preventDefault();t.disabled||(a.menuState===G.Open?(c({type:j.CloseMenu}),f.nextFrame((function(){var e;return null==(e=a.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(e.preventDefault(),c({type:j.OpenMenu}),f.nextFrame((function(){var e;return null==(e=a.itemsRef.current)?void 0:e.focus({preventScroll:!0})}))))}),[c,f,a,t.disabled]),m=n.useMemo((function(){return{open:a.menuState===G.Open}}),[a]);return y(r({},t,{ref:l,id:s,type:"button","aria-haspopup":!0,"aria-controls":null==(u=a.itemsRef.current)?void 0:u.id,"aria-expanded":a.menuState===G.Open||void 0,onKeyDown:d,onClick:v}),m,"button")})),re=a.RenderStrategy|a.Static,oe=x((function e(t,o){var u,i,a=J([X.name,e.name].join(".")),c=a[0],l=a[1],f=B(c.itemsRef,o),d="headlessui-menu-items-"+p(),v=Q();s((function(){var e=c.itemsRef.current;if(e&&c.menuState===G.Open)for(var n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){return"menuitem"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}});n.nextNode();)n.currentNode.setAttribute("role","none")}));var m=n.useCallback((function(e){switch(v.dispose(),e.key){case A.Space:if(""!==c.searchQuery)return e.preventDefault(),l({type:j.Search,value:e.key});case A.Enter:var n;e.preventDefault(),l({type:j.CloseMenu}),null!==c.activeItemIndex&&(null==(n=document.getElementById(c.items[c.activeItemIndex].id))||n.click()),g().nextFrame((function(){var e;return null==(e=c.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));break;case A.ArrowDown:return e.preventDefault(),l({type:j.GoToItem,focus:N.Next});case A.ArrowUp:return e.preventDefault(),l({type:j.GoToItem,focus:N.Previous});case A.Home:case A.PageUp:return e.preventDefault(),l({type:j.GoToItem,focus:N.First});case A.End:case A.PageDown:return e.preventDefault(),l({type:j.GoToItem,focus:N.Last});case A.Escape:e.preventDefault(),l({type:j.CloseMenu}),g().nextFrame((function(){var e;return null==(e=c.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));break;case A.Tab:return e.preventDefault();default:1===e.key.length&&(l({type:j.Search,value:e.key}),v.setTimeout((function(){return l({type:j.ClearSearch})}),350))}}),[l,v,c]),b=n.useMemo((function(){return{open:c.menuState===G.Open}}),[c]);return y(r({},t,{"aria-activedescendant":null===c.activeItemIndex||null==(u=c.items[c.activeItemIndex])?void 0:u.id,"aria-labelledby":null==(i=c.buttonRef.current)?void 0:i.id,id:d,onKeyDown:m,role:"menu",tabIndex:0,ref:f}),b,"div",re,c.menuState===G.Open)})),ue=n.Fragment;function ie(e,t){var r=n.useState(e),o=r[0],u=r[1],i=n.useRef(e);return s((function(){i.current=e}),[e]),s((function(){return u(i.current)}),[i,u].concat(t)),o}X.Button=te,X.Items=oe,X.Item=function e(t){var u=t.disabled,i=void 0!==u&&u,a=t.className,c=t.onClick,l=o(t,["disabled","className","onClick"]),f=J([X.name,e.name].join(".")),d=f[0],v=f[1],m="headlessui-menu-item-"+p(),b=null!==d.activeItemIndex&&d.items[d.activeItemIndex].id===m;s((function(){if(d.menuState===G.Open&&b){var e=g();return e.nextFrame((function(){var e;return null==(e=document.getElementById(m))||null==e.scrollIntoView?void 0:e.scrollIntoView({block:"nearest"})})),e.dispose}}),[m,b,d.menuState]);var h=n.useRef({disabled:i});s((function(){h.current.disabled=i}),[h,i]),s((function(){var e,n;h.current.textValue=null==(e=document.getElementById(m))||null==(n=e.textContent)?void 0:n.toLowerCase()}),[h,m]),s((function(){return v({type:j.RegisterItem,id:m,dataRef:h}),function(){return v({type:j.UnregisterItem,id:m})}}),[h,m]);var x=n.useCallback((function(e){return i?e.preventDefault():(v({type:j.CloseMenu}),g().nextFrame((function(){var e;return null==(e=d.buttonRef.current)?void 0:e.focus({preventScroll:!0})})),c?c(e):void 0)}),[v,d.buttonRef,i,c]),S=n.useCallback((function(){if(i)return v({type:j.GoToItem,focus:N.Nothing});v({type:j.GoToItem,focus:N.Specific,id:m})}),[i,m,v]),I=n.useCallback((function(){i||b||v({type:j.GoToItem,focus:N.Specific,id:m})}),[i,b,m,v]),C=n.useCallback((function(){i||b&&v({type:j.GoToItem,focus:N.Nothing})}),[i,b,v]),O=n.useMemo((function(){return{active:b,disabled:i}}),[b,i]);return y(r({},l,{id:m,role:"menuitem",tabIndex:-1,className:_(a,O),"aria-disabled":!0===i||void 0,onClick:x,onFocus:S,onPointerMove:I,onMouseMove:I,onPointerLeave:C,onMouseLeave:C}),O,ue)},function(e){e[e.Open=0]="Open",e[e.Closed=1]="Closed"}(ee||(ee={})),function(e){e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.SetDisabled=2]="SetDisabled",e[e.GoToOption=3]="GoToOption",e[e.Search=4]="Search",e[e.ClearSearch=5]="ClearSearch",e[e.RegisterOption=6]="RegisterOption",e[e.UnregisterOption=7]="UnregisterOption"}(ne||(ne={}));var ae=((Z={})[ne.CloseListbox]=function(e){return e.disabled||e.listboxState===ee.Closed?e:r({},e,{activeOptionIndex:null,listboxState:ee.Closed})},Z[ne.OpenListbox]=function(e){return e.disabled||e.listboxState===ee.Open?e:r({},e,{listboxState:ee.Open})},Z[ne.SetDisabled]=function(e,n){return e.disabled===n.disabled?e:r({},e,{disabled:n.disabled})},Z[ne.GoToOption]=function(e,n){if(e.disabled)return e;if(e.listboxState===ee.Closed)return e;var t=K(n,{resolveItems:function(){return e.options},resolveActiveIndex:function(){return e.activeOptionIndex},resolveId:function(e){return e.id},resolveDisabled:function(e){return e.dataRef.current.disabled}});return""===e.searchQuery&&e.activeOptionIndex===t?e:r({},e,{searchQuery:"",activeOptionIndex:t})},Z[ne.Search]=function(e,n){if(e.disabled)return e;if(e.listboxState===ee.Closed)return e;var t=e.searchQuery+n.value,o=e.options.findIndex((function(e){var n;return!e.dataRef.current.disabled&&(null==(n=e.dataRef.current.textValue)?void 0:n.startsWith(t))}));return r({},e,-1===o||o===e.activeOptionIndex?{searchQuery:t}:{searchQuery:t,activeOptionIndex:o})},Z[ne.ClearSearch]=function(e){return e.disabled||e.listboxState===ee.Closed||""===e.searchQuery?e:r({},e,{searchQuery:""})},Z[ne.RegisterOption]=function(e,n){return r({},e,{options:[].concat(e.options,[{id:n.id,dataRef:n.dataRef}])})},Z[ne.UnregisterOption]=function(e,n){var t=e.options.slice(),o=null!==e.activeOptionIndex?t[e.activeOptionIndex]:null,u=t.findIndex((function(e){return e.id===n.id}));return-1!==u&&t.splice(u,1),r({},e,{options:t,activeOptionIndex:u===e.activeOptionIndex||null===o?null:t.indexOf(o)})},Z),ce=n.createContext(null);function le(e){var t=n.useContext(ce);if(null===t){var r=new Error("<"+e+" /> is missing a parent <"+de.name+" /> component.");throw Error.captureStackTrace&&Error.captureStackTrace(r,le),r}return t}function se(e,n){return b(n.type,ae,e,n)}ce.displayName="ListboxContext";var fe=n.Fragment;function de(e){var r=e.value,u=e.onChange,i=e.disabled,a=void 0!==i&&i,c=o(e,["value","onChange","disabled"]),l=Q(),f=n.useReducer(se,{listboxState:ee.Closed,propsRef:{current:{value:r,onChange:u}},labelRef:n.createRef(),buttonRef:n.createRef(),optionsRef:n.createRef(),disabled:a,options:[],searchQuery:"",activeOptionIndex:null}),d=f[0],v=d.listboxState,p=d.propsRef,m=d.optionsRef,b=d.buttonRef,h=f[1];s((function(){p.current.value=r}),[r,p]),s((function(){p.current.onChange=u}),[u,p]),s((function(){return h({type:ne.SetDisabled,disabled:a})}),[a]),n.useEffect((function(){function e(e){var n,t,r,o=e.target,u=document.activeElement;v===ee.Open&&((null==(n=b.current)?void 0:n.contains(o))||((null==(t=m.current)?void 0:t.contains(o))||h({type:ne.CloseListbox}),u!==document.body&&(null==u?void 0:u.contains(o))||e.defaultPrevented||null==(r=b.current)||r.focus({preventScroll:!0})))}return window.addEventListener("mousedown",e),function(){return window.removeEventListener("mousedown",e)}}),[v,m,b,l,h]);var x=n.useMemo((function(){return{open:v===ee.Open,disabled:a}}),[v,a]);return t.createElement(ce.Provider,{value:f},y(c,x,fe))}var ve=x((function e(t,o){var u,i=le([de.name,e.name].join(".")),a=i[0],c=i[1],l=B(a.buttonRef,o),s="headlessui-listbox-button-"+p(),f=Q(),d=n.useCallback((function(e){switch(e.key){case A.Space:case A.Enter:case A.ArrowDown:e.preventDefault(),c({type:ne.OpenListbox}),f.nextFrame((function(){var e;null==(e=a.optionsRef.current)||e.focus({preventScroll:!0}),a.propsRef.current.value||c({type:ne.GoToOption,focus:N.First})}));break;case A.ArrowUp:e.preventDefault(),c({type:ne.OpenListbox}),f.nextFrame((function(){var e;null==(e=a.optionsRef.current)||e.focus({preventScroll:!0}),a.propsRef.current.value||c({type:ne.GoToOption,focus:N.Last})}))}}),[c,a,f]),v=n.useCallback((function(e){if(q(e.currentTarget))return e.preventDefault();a.listboxState===ee.Open?(c({type:ne.CloseListbox}),f.nextFrame((function(){var e;return null==(e=a.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(e.preventDefault(),c({type:ne.OpenListbox}),f.nextFrame((function(){var e;return null==(e=a.optionsRef.current)?void 0:e.focus({preventScroll:!0})})))}),[c,f,a]),m=ie((function(){if(a.labelRef.current)return[a.labelRef.current.id,s].join(" ")}),[a.labelRef.current,s]),b=n.useMemo((function(){return{open:a.listboxState===ee.Open,disabled:a.disabled}}),[a]);return y(r({},t,{ref:l,id:s,type:"button","aria-haspopup":!0,"aria-controls":null==(u=a.optionsRef.current)?void 0:u.id,"aria-expanded":a.listboxState===ee.Open||void 0,"aria-labelledby":m,disabled:a.disabled,onKeyDown:d,onClick:v}),b,"button")})),pe=a.RenderStrategy|a.Static,me=x((function e(t,o){var u,i=le([de.name,e.name].join(".")),a=i[0],c=i[1],l=B(a.optionsRef,o),s="headlessui-listbox-options-"+p(),f=Q(),d=Q(),v=n.useCallback((function(e){switch(d.dispose(),e.key){case A.Space:if(""!==a.searchQuery)return e.preventDefault(),c({type:ne.Search,value:e.key});case A.Enter:e.preventDefault(),c({type:ne.CloseListbox}),null!==a.activeOptionIndex&&a.propsRef.current.onChange(a.options[a.activeOptionIndex].dataRef.current.value),g().nextFrame((function(){var e;return null==(e=a.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));break;case A.ArrowDown:return e.preventDefault(),c({type:ne.GoToOption,focus:N.Next});case A.ArrowUp:return e.preventDefault(),c({type:ne.GoToOption,focus:N.Previous});case A.Home:case A.PageUp:return e.preventDefault(),c({type:ne.GoToOption,focus:N.First});case A.End:case A.PageDown:return e.preventDefault(),c({type:ne.GoToOption,focus:N.Last});case A.Escape:return e.preventDefault(),c({type:ne.CloseListbox}),f.nextFrame((function(){var e;return null==(e=a.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));case A.Tab:return e.preventDefault();default:1===e.key.length&&(c({type:ne.Search,value:e.key}),d.setTimeout((function(){return c({type:ne.ClearSearch})}),350))}}),[f,c,d,a]),m=ie((function(){var e,n,t;return null!=(e=null==(n=a.labelRef.current)?void 0:n.id)?e:null==(t=a.buttonRef.current)?void 0:t.id}),[a.labelRef.current,a.buttonRef.current]),b=n.useMemo((function(){return{open:a.listboxState===ee.Open}}),[a]);return y(r({},t,{"aria-activedescendant":null===a.activeOptionIndex||null==(u=a.options[a.activeOptionIndex])?void 0:u.id,"aria-labelledby":m,id:s,onKeyDown:v,role:"listbox",tabIndex:0,ref:l}),b,"ul",pe,a.listboxState===ee.Open)}));de.Button=ve,de.Label=function e(t){var o=le([de.name,e.name].join("."))[0],u="headlessui-listbox-label-"+p(),i=n.useCallback((function(){var e;return null==(e=o.buttonRef.current)?void 0:e.focus({preventScroll:!0})}),[o.buttonRef]),a=n.useMemo((function(){return{open:o.listboxState===ee.Open,disabled:o.disabled}}),[o]);return y(r({},t,{ref:o.labelRef,id:u,onClick:i}),a,"label")},de.Options=me,de.Option=function e(t){var u=t.disabled,i=void 0!==u&&u,a=t.value,c=t.className,l=o(t,["disabled","value","className"]),f=le([de.name,e.name].join(".")),d=f[0],v=f[1],m="headlessui-listbox-option-"+p(),b=null!==d.activeOptionIndex&&d.options[d.activeOptionIndex].id===m,h=d.propsRef.current.value===a,x=n.useRef({disabled:i,value:a});s((function(){x.current.disabled=i}),[x,i]),s((function(){x.current.value=a}),[x,a]),s((function(){var e,n;x.current.textValue=null==(e=document.getElementById(m))||null==(n=e.textContent)?void 0:n.toLowerCase()}),[x,m]);var S=n.useCallback((function(){return d.propsRef.current.onChange(a)}),[d.propsRef,a]);s((function(){return v({type:ne.RegisterOption,id:m,dataRef:x}),function(){return v({type:ne.UnregisterOption,id:m})}}),[x,m]),s((function(){var e;d.listboxState===ee.Open&&h&&(v({type:ne.GoToOption,focus:N.Specific,id:m}),null==(e=document.getElementById(m))||null==e.focus||e.focus())}),[d.listboxState]),s((function(){if(d.listboxState===ee.Open&&b){var e=g();return e.nextFrame((function(){var e;return null==(e=document.getElementById(m))||null==e.scrollIntoView?void 0:e.scrollIntoView({block:"nearest"})})),e.dispose}}),[m,b,d.listboxState]);var I=n.useCallback((function(e){if(i)return e.preventDefault();S(),v({type:ne.CloseListbox}),g().nextFrame((function(){var e;return null==(e=d.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))}),[v,d.buttonRef,i,S]),C=n.useCallback((function(){if(i)return v({type:ne.GoToOption,focus:N.Nothing});v({type:ne.GoToOption,focus:N.Specific,id:m})}),[i,m,v]),O=n.useCallback((function(){i||b||v({type:ne.GoToOption,focus:N.Specific,id:m})}),[i,b,m,v]),R=n.useCallback((function(){i||b&&v({type:ne.GoToOption,focus:N.Nothing})}),[i,b,v]),w=n.useMemo((function(){return{active:b,selected:h,disabled:i}}),[b,h,i]);return y(r({},l,{id:m,role:"option",tabIndex:-1,className:_(c,w),"aria-disabled":!0===i||void 0,"aria-selected":!0===h||void 0,onClick:I,onFocus:C,onPointerMove:O,onMouseMove:O,onPointerLeave:R,onMouseLeave:R}),w,"li")};var be=n.createContext(null);function ye(e){var t=n.useContext(be);if(null===t){var r=new Error("<"+e+" /> is missing a parent <Switch.Group /> component.");throw Error.captureStackTrace&&Error.captureStackTrace(r,ye),r}return t}be.displayName="GroupContext";var he=n.Fragment;function xe(e){var t,u=e.checked,i=e.onChange,a=e.className,c=o(e,["checked","onChange","className"]),l="headlessui-switch-"+p(),s=n.useContext(be),f=n.useCallback((function(){return i(!u)}),[i,u]),d=n.useCallback((function(e){if(q(e.currentTarget))return e.preventDefault();e.preventDefault(),f()}),[f]),v=n.useCallback((function(e){e.key!==A.Tab&&e.preventDefault(),e.key===A.Space&&f()}),[f]),m=n.useCallback((function(e){return e.preventDefault()}),[]),b=n.useMemo((function(){return{checked:u}}),[u]),h={id:l,ref:null===s?void 0:s.setSwitch,role:"switch",tabIndex:0,className:_(a,b),"aria-checked":u,"aria-labelledby":null==s||null==(t=s.label)?void 0:t.id,onClick:d,onKeyUp:v,onKeyPress:m};return"button"===c.as&&Object.assign(h,{type:"button"}),y(r({},c,h),b,"button")}xe.Group=function(e){var r=n.useState(null),o=r[0],u=r[1],i=n.useState(null),a=i[0],c=i[1],l=n.useMemo((function(){return{switch:o,label:a,setSwitch:u,setLabel:c}}),[o,u,a,c]);return t.createElement(be.Provider,{value:l},y(e,{},he))},xe.Label=function e(t){var o=ye([xe.name,e.name].join(".")),u="headlessui-switch-label-"+p(),i=n.useCallback((function(){o.switch&&(o.switch.click(),o.switch.focus({preventScroll:!0}))}),[o.switch]);return y(r({},t,{ref:o.setLabel,id:u,onClick:i}),{},"label")},e.Listbox=de,e.Menu=X,e.Switch=xe,e.Transition=V,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=headlessui.umd.production.min.js.map
